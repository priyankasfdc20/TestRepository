/*! StxRtcClient - v0.2.3 - 2019-07-10
* Copyright (c) 2019 Amazon Web Services, Inc.; Licensed AmazonProprietary */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Stxhd=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a,c){(function(a,b,d,e,f){function g(){this.url=null,this.groupName=null,this.userName=null,this.credential=null,this.expirationTime=null,this.debugLevel=0,this.heartbeatInterval=10,this.heartbeatFailureCount=3,this.statusListener=null,this.transmissionListener=null,this.peerListener=null,this.webSocketClient=null,this.prevState=g.STATE_INIT,this.currentState=g.STATE_INIT,this.heartbeatTimer=null,this.outstandingHeartbeatCount=0;var a=this;this.transit=function(b){a.debugLevel>0&&console.log("MessagingLib transitted state "+a.getStateName(a.currentState)+" ---\x3e "+a.getStateName(b)),a.prevState=a.currentState,a.currentState=b},this.heartbeat=function(){if(a.outstandingHeartbeatCount>=a.heartbeatFailureCount)a.transit(g.STATE_DISCONNECTED),a.webSocketClient.close(),a.heartbeatInterval>0&&clearInterval(a.heartbeatTimer),null!==a.statusListener&&a.statusListener(g.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT,"Heartbeat timed out");else{var b=(new Date).valueOf(),c={version:g.VERSION,messageType:g.HEARTBEAT_MESSAGE_TYPE,timestamp:b};a.webSocketClient.send(JSON.stringify(c)),a.outstandingHeartbeatCount++,a.debugLevel>2&&console.log("MessagingLib sent a heartbeat message at "+b.toString()+", outstanding count: "+a.outstandingHeartbeatCount.toString())}},this.openListener=function(b){a.debugLevel>0&&console.log("MessangingLib connected websocket to "+a.url);var c={version:g.VERSION,messageType:g.MESSAGE_TYPE_SIGN_IN,groupName:a.groupName,userName:a.userName,credential:a.credential,expirationTime:a.expirationTime};a.webSocketClient.send(JSON.stringify(c))},this.closeListener=function(b){a.currentState===g.STATE_SIGNING_IN?(a.transit(g.STATE_DISCONNECTED),a.webSocketClient.close(),null!==a.statusListener&&a.statusListener(g.STATUS_SIGN_IN_FAILED_CONNECTION,"Connection closed, "+b.code.toString()+", "+b.reason)):a.currentState===g.STATE_SIGNED_IN&&(a.transit(g.STATE_DISCONNECTED),a.webSocketClient.close(),a.heartbeatInterval>0&&clearInterval(a.heartbeatTimer),null!==a.statusListener&&a.statusListener(g.STATUS_DISCONNECTED_CONNECTION_CLOSED,"Connection closed, "+b.code.toString()+", "+b.reason))},this.messageListener=function(b){a.debugLevel>1&&console.log("MessagingLib in state: "+a.getStateName(a.currentState)+" received message: "+b.data);var d=JSON.parse(b.data);if(d.messageType===g.MESSAGE_TYPE_SIGN_IN)a.currentState===g.STATE_SIGNING_IN&&(0===d.statusCode?(a.outstandingHeartbeatCount=0,a.heartbeatInterval>0&&(a.heartbeatTimer=setInterval(a.Heartbeat,1e3*a.heartbeatInterval)),a.transit(g.STATE_SIGNED_IN),null!==a.statusListener&&a.statusListener(g.STATUS_SIGN_IN_SUCCESSFUL,"")):(a.transit(g.STATE_DISCONNECTED),a.webSocketClient.close(),null!==a.statusListener&&a.statusListener(g.STATUS_SIGN_IN_FAILED_AUTHENTICATION,d.statusCode.toString()+" "+d.statusDescription)));else if(d.messageType===g.MESSAGE_TYPE_TRANSMISSION)a.currentState===g.STATE_SIGNED_IN&&null!==a.transmissionListener&&a.transmissionListener(d.userName,c.base64ToString(d.payload));else if(d.messageType===g.HEARTBEAT_MESSAGE_TYPE){if(a.currentState===g.STATE_SIGNED_IN){if(a.debugLevel>2){var e=(new Date).valueOf();console.log("MessagingLib received a heartbeat message, RTT:  "+(e-d.timestamp).toString())}a.outstandingHeartbeatCount=0}}else d.messageType===g.MESSAGE_TYPE_NOTIFICATION?(a.transit(g.STATE_DISCONNECTED),a.currentState!==g.STATE_SIGNING_IN&&a.currentState!==g.STATE_SIGNED_IN||a.webSocketClient.close(),null!==a.statusListener&&a.statusListener(g.STATUS_DISCONNECTED_SERVER_NOTIFICATION,d.notificationCode.toString()+" "+d.notificationDescription)):d.messageType===g.MESSAGE_TYPE_SIGNED_IN?null!==a.peerListener&&a.peerListener(d.userName,g.PEER_SIGNED_IN,0,""):d.messageType===g.MESSAGE_TYPE_SIGNED_OUT&&null!==a.peerListener&&a.peerListener(d.userName,g.PEER_SIGNED_OUT,d.reasonCode,d.reasonDescription)},this.signIn=function(){if(a.currentState!==g.STATE_SIGNING_IN&&a.currentState!==g.STATE_SIGNED_IN){if(null===a.url||null===a.groupName||null===a.userName||null===a.credential||null===a.expirationTime)return g.RET_VAL_MISSING_CONFIG_PARAMETERS;if(null===a.statusListener)return g.RET_VAL_MISSING_STATUS_LISTENER;if(null===a.transmissionListener)return g.RET_VAL_MISSING_TRANSMISSION_LISTENER;if(null===a.peerListener)return g.RET_VAL_MISSING_PEER_LISTENER;if(a.transit(g.STATE_SIGNING_IN),"undefined"==typeof window&&"undefined"==typeof navigator&&"undefined"==typeof screen){var b={};if(null!==a.proxy&&void 0!==a.proxy){console.log("MessagingLib connecting websocket through proxy "+a.proxy);var c=a.proxy.split(":"),d=tunnel.httpsOverHttp({proxy:{host:c[0],port:c[1]}});b.agent=d}a.webSocketClient=new WebSocket(a.url,null,null,null,b)}else a.webSocketClient=new WebSocket(a.url);a.webSocketClient.onopen=a.openListener,a.webSocketClient.onclose=a.closeListener,a.webSocketClient.onmessage=a.messageListener,a.debugLevel>0&&console.log("MessagingLib connecting websocket to "+a.url)}return g.RET_VAL_OK},this.signOut=function(){if(a.currentState===g.STATE_SIGNED_IN){var b={version:g.VERSION,messageType:g.MESSAGE_TYPE_SIGN_OUT};a.webSocketClient.send(JSON.stringify(b)),a.webSocketClient.close(),a.heartbeatInterval>0&&clearInterval(a.heartbeatTimer),a.transit(g.STATE_SIGNED_OUT)}else a.currentState===g.STATE_SIGNING_IN&&(a.webSocketClient.close(),a.transit(g.STATE_SIGNED_OUT));return g.RET_VAL_OK},this.transmit=function(b,d){if(a.currentState===g.STATE_SIGNED_IN){a.debugLevel>1&&console.log("MessagingLib sending payload: "+d);var e={version:g.VERSION,messageType:g.MESSAGE_TYPE_TRANSMISSION,payload:c.stringToBase64(d)};return b.length>0&&(e.destinationUserNames=b),a.debugLevel>1&&console.log("MessagingLib sending message: "+JSON.stringify(e)),a.webSocketClient.send(JSON.stringify(e)),g.RET_VAL_OK}return g.RET_VAL_NOT_SIGNEDD_IN},this.getStateName=function(a){switch(a){case g.STATE_INIT:return"Init State";case g.STATE_SIGNING_IN:return"Signing In State";case g.STATE_SIGNED_IN:return"Signed In State";case g.STATE_SIGNED_OUT:return"Signed Out State";case g.STATE_DISCONNECTED:return"Disconnected State";default:return"Invalid State"}}}g.VERSION=1,g.RET_VAL_OK=0,g.RET_VAL_MISSING_CONFIG_PARAMETERS=1,g.RET_VAL_MISSING_STATUS_LISTENER=2,g.RET_VAL_MISSING_TRANSMISSION_LISTENER=3,g.RET_VAL_MISSING_PEER_LISTENER=4,g.RET_VAL_NOT_SIGNEDD_IN=5,g.MESSAGE_TYPE_SIGN_IN="SignIn",g.MESSAGE_TYPE_SIGN_OUT="SignOut",g.MESSAGE_TYPE_TRANSMISSION="Transmission",g.MESSAGE_TYPE_HEARTBEAT="Heartbeat",g.MESSAGE_TYPE_NOTIFICATION="Notification",g.MESSAGE_TYPE_SIGNED_IN="SignedIn",g.MESSAGE_TYPE_SIGNED_OUT="SignedOut",g.STATE_INIT=0,g.STATE_SIGNING_IN=1,g.STATE_SIGNED_IN=2,g.STATE_SIGNED_OUT=3,g.STATE_DISCONNECTED=4,g.STATUS_SIGN_IN_SUCCESSFUL=0,g.STATUS_SIGN_IN_FAILED_CONNECTION=1,g.STATUS_SIGN_IN_FAILED_AUTHENTICATION=2,g.STATUS_DISCONNECTED_CONNECTION_CLOSED=3,g.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT=4,g.STATUS_DISCONNECTED_SERVER_NOTIFICATION=5,g.PEER_SIGNED_IN=0,g.PEER_SIGNED_OUT=1,f(void 0!==g?g:window.A2sMessagingLib)}).call(a,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("PanamaSignalingClientJs/js/A2sUtilsLib.js"))},{"PanamaSignalingClientJs/js/A2sUtilsLib.js":3}],2:[function(a,b,c){(function(c,d,e){a("PanamaSignalingClientJs/js/A2sMessagingLib.js");(function(a,b,c,f,g){function h(){this.configParameters=null,this.url=null,this.groupName=null,this.userName=null,this.credential=null,this.expirationTime=null,this.debugLevel=0,this.heartbeatInterval=10,this.heartbeatFailureCount=3,this.pingInterval=6,this.pingExpirationCount=1,this.proxy=null,this.statusListener=null,this.dataMessageListener=null,this.dataAckListener=null,this.peerListener=null,this.messagingLib=null,this.prevState=h.STATE_INIT,this.currentState=h.STATE_INIT,this.pingTimer=null,this.messageSeqNumberPool=0,this.peerMap={},this.lastError=h.RET_VAL_OK;var a=this;this.transit=function(b){a.debugLevel>0&&console.log("SignalingLib transitted state "+a.getStateName(a.currentState)+" ---\x3e "+a.getStateName(b)),a.prevState=a.currentState,a.currentState=b},this.pingTimerCallback=function(){var b={};for(var c in a.peerMap)a.peerMap.hasOwnProperty(c)&&(a.peerMap[c]=a.peerMap[c]-1),a.peerMap[c]>0?b[c]=a.peerMap[c]:(a.debugLevel>0&&console.log("SignalingLib notified disconnected user: "+c),null!==a.peerListener&&a.peerListener(c,h.PEER_DISCONNECTED,"Ping timed out"));a.peerMap=b;var d={version:h.VERSION,seqNumber:a.messageSeqNumberPool,type:h.TYPE_PING_REQUEST};a.messageSeqNumberPool++,a.messagingLib.transmit([],JSON.stringify(d))},this.messagingLibStatusListener=function(b,c){if(b===d.STATUS_SIGN_IN_SUCCESSFUL){if(a.currentState===h.STATE_SIGNING_IN){a.transit(h.STATE_SIGNED_IN),null!==a.statusListener&&a.statusListener(h.STATUS_SIGN_IN_SUCCESSFUL,"");var e={version:h.VERSION,seqNumber:a.messageSeqNumberPool,type:h.TYPE_PING_REQUEST};a.messageSeqNumberPool++,a.messagingLib.transmit([],JSON.stringify(e)),a.pingInterval>0&&(a.pingTimer=setInterval(a.pingTimerCallback,1e3*a.pingInterval))}}else a.currentState===h.STATE_SIGNED_IN&&(a.pingInterval>0&&clearInterval(a.pingTimer),a.peerMap={}),a.transit(h.STATE_DISCONNECTED),null!==a.statusListener&&a.statusListener(a.mapStatus(b),c)},this.messagingLibTransmissionListener=function(b,c){if(a.debugLevel>1&&console.log("SignalingLib in state: "+a.getStateName(a.currentState)+" received payload: ["+c+"] from user: "+b),a.currentState===h.STATE_SIGNED_IN){var d=JSON.parse(c);if(d.type===h.TYPE_DATA_MESSAGE){null!==a.dataMessageListener&&a.dataMessageListener(b,e.base64ToArrayBuffer(d.data));var f={version:h.VERSION,seqNumber:a.messageSeqNumberPool,type:h.TYPE_DATA_ACK,ackedSeqNumber:d.seqNumber};a.messageSeqNumberPool++,a.messagingLib.transmit([b],JSON.stringify(f))}else if(d.type===h.TYPE_DATA_ACK)null!==a.dataAckListener&&a.dataAckListener(b,d.ackedSeqNumber);else if(d.type===h.TYPE_PING_REQUEST){a.addPeer(b);var g={version:h.VERSION,seqNumber:a.messageSeqNumberPool,type:h.TYPE_PING_RESPONSE,requestSeqNumber:d.seqNumber};a.messageSeqNumberPool++,a.messagingLib.transmit([b],JSON.stringify(g))}else d.type===h.TYPE_PING_RESPONSE&&a.addPeer(b)}},this.messagingLibPeerListener=function(b,c,e,f){c===d.PEER_SIGNED_IN?a.addPeer(b):c===d.PEER_SIGNED_OUT&&a.peerMap.hasOwnProperty(b)&&(1e3===e?null!==a.peerListener&&a.peerListener(b,h.PEER_SIGNED_OUT,""):null!==a.peerListener&&a.peerListener(b,h.PEER_DISCONNECTED,e.toString()+" "+f),delete a.peerMap[b])},this.signIn=function(){if(a.currentState!==h.STATE_SIGNING_IN&&a.currentState!==h.STATE_SIGNED_IN){if(null!==a.configParameters){var b=JSON.parse(a.configParameters);void 0!==b.url&&(a.url=b.url),void 0!==b.groupName&&(a.groupName=b.groupName),void 0!==b.userName&&(a.userName=b.userName),void 0!==b.credential&&(a.credential=b.credential),void 0!==b.expirationTime&&(a.expirationTime=b.expirationTime),void 0!==b.heartbeatIntervalInSeconds&&(a.heartbeatInterval=b.heartbeatIntervalInSeconds),void 0!==b.heartbeatFailureCount&&(a.heartbeatFailureCount=b.heartbeatFailureCount),void 0!==b.pingIntervalInSeconds&&(a.pingInterval=b.pingIntervalInSeconds),void 0!==b.pingExpirationCount&&(a.pingExpirationCount=b.pingExpirationCount),void 0!==b.proxy&&(a.proxy=b.proxy)}if(null===a.url||null===a.groupName||null===a.userName||null===a.credential||null===a.expirationTime)return h.RET_VAL_MISSING_CONFIG_PARAMETERS;if(null===a.statusListener)return h.RET_VAL_MISSING_STATUS_LISTENER;if(null===a.dataMessageListener)return h.RET_VAL_MISSING_DATA_MESSAGE_LISTENER;if(null===a.peerListener)return h.RET_VAL_MISSING_PEER_LISTENER;a.messagingLib=new d,a.messagingLib.url=a.url,a.messagingLib.groupName=a.groupName,a.messagingLib.userName=a.userName,a.messagingLib.credential=a.credential,a.messagingLib.expirationTime=a.expirationTime,a.messagingLib.proxy=a.proxy,a.messagingLib.debugLevel=a.debugLevel,a.messagingLib.heartbeatInterval=a.heartbeatInterval,a.messagingLib.heartbeatFailureCount=a.heartbeatFailureCount,a.messagingLib.statusListener=a.messagingLibStatusListener,a.messagingLib.transmissionListener=a.messagingLibTransmissionListener,a.messagingLib.peerListener=a.messagingLibPeerListener,a.debugLevel>0&&console.log("SignalingLib signing in to "+a.url);var c=a.messagingLib.signIn();return a.debugLevel>0&&console.log("messaging lib return "+c.toString()),c===d.RET_VAL_OK?(a.transit(h.STATE_SIGNING_IN),h.RET_VAL_OK):h.RET_VAL_MESSAGING_LIB_ERROR}return h.RET_VAL_OK},this.signOut=function(){return a.currentState===h.STATE_SIGNED_IN?(a.pingInterval>0&&clearInterval(a.pingTimer),a.messagingLib.signOut(),a.transit(h.STATE_SIGNED_OUT)):a.currentState===h.STATE_SIGNING_IN&&(a.messagingLib.signOut(),a.transit(h.STATE_SIGNED_OUT)),h.RET_VAL_OK},this.sendData=function(b,c){var f=-1;if(a.currentState===h.STATE_SIGNED_IN){var g=e.arrayBufferToBase64(c);a.debugLevel>1&&console.log("SignalingLib based64 encoded data to be sent: "+g),f=a.messageSeqNumberPool,a.messageSeqNumberPool++;var i={version:h.VERSION,seqNumber:f,type:h.TYPE_DATA_MESSAGE,data:g};a.messagingLib.transmit(b,JSON.stringify(i))!==d.RET_VAL_OK&&(a.lastError=h.RET_VAL_MESSAGING_LIB_ERROR,f=-1)}else a.lastError=h.RET_VAL_NOT_SIGNEDD_IN;return f},this.getStateName=function(a){switch(a){case h.STATE_INIT:return"Init State";case h.STATE_SIGNING_IN:return"Signing In State";case h.STATE_SIGNED_IN:return"Signed In State";case h.STATE_SIGNED_OUT:return"Signed Out State";case h.STATE_DISCONNECTED:return"Disconnected State";default:return"Invalid State"}},this.mapStatus=function(a){switch(a){case d.STATUS_SIGN_IN_SUCCESSFUL:return h.STATUS_SIGN_IN_SUCCESSFUL;case d.STATUS_SIGN_IN_FAILED_CONNECTION:return h.STATUS_SIGN_IN_FAILED_CONNECTION;case d.STATUS_SIGN_IN_FAILED_AUTHENTICATION:return h.STATUS_SIGN_IN_FAILED_AUTHENTICATION;case d.STATUS_DISCONNECTED_CONNECTION_CLOSED:return h.STATUS_DISCONNECTED_CONNECTION_CLOSED;case d.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT:return h.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT;case d.STATUS_DISCONNECTED_SERVER_NOTIFICATION:default:return h.STATUS_DISCONNECTED_SERVER_NOTIFICATION}},this.addPeer=function(b){a.peerMap.hasOwnProperty(b)||(a.debugLevel>0&&console.log("SignalingLib added peer: "+b),null!==a.peerListener&&a.peerListener(b,h.PEER_SIGNED_IN,"")),a.peerMap[b]=a.pingExpirationCount+1},this.getLastError=function(){return a.lastError}}h.VERSION=1,h.RET_VAL_OK=0,h.RET_VAL_MISSING_CONFIG_PARAMETERS=1,h.RET_VAL_MISSING_STATUS_LISTENER=2,h.RET_VAL_MISSING_DATA_MESSAGE_LISTENER=3,h.RET_VAL_MISSING_PEER_LISTENER=4,h.RET_VAL_NOT_SIGNEDD_IN=5,h.RET_VAL_MESSAGING_LIB_ERROR=6,h.TYPE_DATA_MESSAGE="DataMessage",h.TYPE_DATA_ACK="DataAck",h.TYPE_PING_REQUEST="PingRequest",h.TYPE_PING_RESPONSE="PingResponse",h.STATE_INIT=0,h.STATE_SIGNING_IN=1,h.STATE_SIGNED_IN=2,h.STATE_SIGNED_OUT=3,h.STATE_DISCONNECTED=4,h.STATUS_SIGN_IN_SUCCESSFUL=0,h.STATUS_SIGN_IN_FAILED_CONNECTION=1,h.STATUS_SIGN_IN_FAILED_AUTHENTICATION=2,h.STATUS_DISCONNECTED_CONNECTION_CLOSED=3,h.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT=4,h.STATUS_DISCONNECTED_SERVER_NOTIFICATION=5,h.PEER_SIGNED_IN=0,h.PEER_SIGNED_OUT=1,h.PEER_DISCONNECTED=2,g(void 0!==h?h:window.A2sSignalingLib)}).call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("PanamaSignalingClientJs/js/A2sMessagingLib.js"),a("PanamaSignalingClientJs/js/A2sUtilsLib.js"))},{"PanamaSignalingClientJs/js/A2sMessagingLib.js":1,"PanamaSignalingClientJs/js/A2sUtilsLib.js":3}],3:[function(a,b,c){(function(a){(function(a,b,c,d,e){function f(){}f.arrayBufferToBase64=function(a){for(var b=new Uint8Array(a),c="",d=0;d<b.length;d++)c+=String.fromCharCode(b[d]);return btoa(c)},f.base64ToArrayBuffer=function(a){for(var b=atob(a),c=b.length,d=new Uint8Array(c),e=0;e<c;e++)d[e]=b.charCodeAt(e);return d.buffer},f.stringToBase64=function(a){return btoa(a)},f.base64ToString=function(a){return atob(a)},f.arrayBufferToString=function(a){for(var b=new Uint8Array(a),c="",d=0;d<b.length;d++)c+=String.fromCharCode(b[d]);return c},f.stringToArrayBuffer=function(a){for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer},e(void 0!==f?f:window.A2sUtilsLib)}).call(a,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(b,c,d){!function(b,d){void 0!==c&&c.exports?c.exports=d():"function"==typeof a&&a.amd?a(d):this[b]=d()}("bowser",function(){function a(a){function c(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}function d(b){var c=a.match(b);return c&&c.length>1&&c[2]||""}var e,f=c(/(ipod|iphone|ipad)/i).toLowerCase(),g=/like android/i.test(a),h=!g&&/android/i.test(a),i=/CrOS/.test(a),j=c(/edge\/(\d+(\.\d+)?)/i),k=c(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(a),m=!l&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?e={name:"Opera",opera:b,version:k||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?e={name:"Yandex Browser",yandexbrowser:b,version:k||c(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?(e={name:"Windows Phone",windowsphone:b},j?(e.msedge=b,e.version=j):(e.msie=b,e.version=c(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(a)?e={name:"Internet Explorer",msie:b,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:i?e={name:"Chrome",chromeBook:b,chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?e={name:"Microsoft Edge",msedge:b,version:j}:/chrome|crios|crmo/i.test(a)?e={name:"Chrome",chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:f?(e={name:"iphone"==f?"iPhone":"ipad"==f?"iPad":"iPod"},k&&(e.version=k)):/sailfish/i.test(a)?e={name:"Sailfish",sailfish:b,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?e={name:"SeaMonkey",seamonkey:b,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(e={name:"Firefox",firefox:b,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(e.firefoxos=b)):/silk/i.test(a)?e={name:"Amazon Silk",silk:b,version:c(/silk\/(\d+(\.\d+)?)/i)}:h?e={name:"Android",version:k}:/phantom/i.test(a)?e={name:"PhantomJS",phantom:b,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?e={name:"BlackBerry",blackberry:b,version:k||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(e={name:"WebOS",webos:b,version:k||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(e.touchpad=b)):e=/bada/i.test(a)?{name:"Bada",bada:b,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:b,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||k}:/safari/i.test(a)?{name:"Safari",safari:b,version:k}:{name:c(/^(.*)\/(.*) /),version:d(/^(.*)\/(.*) /)},!e.msedge&&/(apple)?webkit/i.test(a)?(e.name=e.name||"Webkit",e.webkit=b,!e.version&&k&&(e.version=k)):!e.opera&&/gecko\//i.test(a)&&(e.name=e.name||"Gecko",e.gecko=b,e.version=e.version||c(/gecko\/(\d+(\.\d+)?)/i)),e.msedge||!h&&!e.silk?f&&(e[f]=b,e.ios=b):e.android=b;var n="";e.windowsphone?n=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):f?(n=c(/os (\d+([_\s]\d+)*) like mac os x/i),n=n.replace(/[_\s]/g,".")):h?n=c(/android[ \/-](\d+(\.\d+)*)/i):e.webos?n=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?n=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?n=c(/bada\/(\d+(\.\d+)*)/i):e.tizen&&(n=c(/tizen[\/\s](\d+(\.\d+)*)/i)),n&&(e.osversion=n);var o=n.split(".")[0];return l||"ipad"==f||h&&(3==o||4==o&&!m)||e.silk?e.tablet=b:(m||"iphone"==f||"ipod"==f||h||e.blackberry||e.webos||e.bada)&&(e.mobile=b),e.msedge||e.msie&&e.version>=10||e.yandexbrowser&&e.version>=15||e.chrome&&e.version>=20||e.firefox&&e.version>=20||e.safari&&e.version>=6||e.opera&&e.version>=10||e.ios&&e.osversion&&e.osversion.split(".")[0]>=6||e.blackberry&&e.version>=10.1?e.a=b:e.msie&&e.version<10||e.chrome&&e.version<20||e.firefox&&e.version<20||e.safari&&e.version<6||e.opera&&e.version<10||e.ios&&e.osversion&&e.osversion.split(".")[0]<6?e.c=b:e.x=b,e}var b=!0,c=a("undefined"!=typeof navigator?navigator.userAgent:"");return c.test=function(a){for(var b=0;b<a.length;++b){var d=a[b];if("string"==typeof d&&d in c)return!0}return!1},c._detect=a,c})},{}],5:[function(b,c,d){!function(){var b={VERSION:"2.3.5",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(a,c){var d="string"==typeof a.initial?{state:a.initial}:a.initial,e=a.terminal||a.final,f=c||a.target||{},g=a.events||[],h=a.callbacks||{},i={},j={},k=function(a){var c=a.from instanceof Array?a.from:a.from?[a.from]:[b.WILDCARD];i[a.name]=i[a.name]||{};for(var d=0;d<c.length;d++)j[c[d]]=j[c[d]]||[],j[c[d]].push(a.name),i[a.name][c[d]]=a.to||c[d]};d&&(d.event=d.event||"startup",k({name:d.event,from:"none",to:d.state}));for(var l=0;l<g.length;l++)k(g[l]);for(var m in i)i.hasOwnProperty(m)&&(f[m]=b.buildEvent(m,i[m]));for(var m in h)h.hasOwnProperty(m)&&(f[m]=h[m]);return f.current="none",f.is=function(a){return a instanceof Array?a.indexOf(this.current)>=0:this.current===a},f.can=function(a){return!this.transition&&(i[a].hasOwnProperty(this.current)||i[a].hasOwnProperty(b.WILDCARD))},f.cannot=function(a){return!this.can(a)},f.transitions=function(){return j[this.current]},f.isFinished=function(){return this.is(e)},f.error=a.error||function(a,b,c,d,e,f,g){throw g||f},d&&!d.defer&&f[d.event](),f},doCallback:function(a,c,d,e,f,g){if(c)try{return c.apply(a,[d,e,f].concat(g))}catch(c){return a.error(d,e,f,g,b.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",c)}},beforeAnyEvent:function(a,c,d,e,f){return b.doCallback(a,a.onbeforeevent,c,d,e,f)},afterAnyEvent:function(a,c,d,e,f){return b.doCallback(a,a.onafterevent||a.onevent,c,d,e,f)},leaveAnyState:function(a,c,d,e,f){return b.doCallback(a,a.onleavestate,c,d,e,f)},enterAnyState:function(a,c,d,e,f){return b.doCallback(a,a.onenterstate||a.onstate,c,d,e,f)},changeState:function(a,c,d,e,f){return b.doCallback(a,a.onchangestate,c,d,e,f)},beforeThisEvent:function(a,c,d,e,f){return b.doCallback(a,a["onbefore"+c],c,d,e,f)},afterThisEvent:function(a,c,d,e,f){return b.doCallback(a,a["onafter"+c]||a["on"+c],c,d,e,f)},leaveThisState:function(a,c,d,e,f){return b.doCallback(a,a["onleave"+d],c,d,e,f)},enterThisState:function(a,c,d,e,f){return b.doCallback(a,a["onenter"+e]||a["on"+e],c,d,e,f)},beforeEvent:function(a,c,d,e,f){if(!1===b.beforeThisEvent(a,c,d,e,f)||!1===b.beforeAnyEvent(a,c,d,e,f))return!1},afterEvent:function(a,c,d,e,f){b.afterThisEvent(a,c,d,e,f),b.afterAnyEvent(a,c,d,e,f)},leaveState:function(a,c,d,e,f){var g=b.leaveThisState(a,c,d,e,f),h=b.leaveAnyState(a,c,d,e,f);return!1!==g&&!1!==h&&(b.ASYNC===g||b.ASYNC===h?b.ASYNC:void 0)},enterState:function(a,c,d,e,f){b.enterThisState(a,c,d,e,f),b.enterAnyState(a,c,d,e,f)},buildEvent:function(a,c){return function(){var d=this.current,e=c[d]||c[b.WILDCARD]||d,f=Array.prototype.slice.call(arguments);if(this.transition)return this.error(a,d,e,f,b.Error.PENDING_TRANSITION,"event "+a+" inappropriate because previous transition did not complete");if(this.cannot(a))return this.error(a,d,e,f,b.Error.INVALID_TRANSITION,"event "+a+" inappropriate in current state "+this.current);if(!1===b.beforeEvent(this,a,d,e,f))return b.Result.CANCELLED;if(d===e)return b.afterEvent(this,a,d,e,f),b.Result.NOTRANSITION;var g=this;this.transition=function(){return g.transition=null,g.current=e,b.enterState(g,a,d,e,f),b.changeState(g,a,d,e,f),b.afterEvent(g,a,d,e,f),b.Result.SUCCEEDED},this.transition.cancel=function(){g.transition=null,b.afterEvent(g,a,d,e,f)};var h=b.leaveState(this,a,d,e,f);return!1===h?(this.transition=null,b.Result.CANCELLED):b.ASYNC===h?b.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==d?(void 0!==c&&c.exports&&(d=c.exports=b),d.StateMachine=b):"function"==typeof a&&a.amd?a(function(a){return b}):"undefined"!=typeof window?window.StateMachine=b:"undefined"!=typeof self&&(self.StateMachine=b)}()},{}],6:[function(b,c,d){"use strict";function e(a){return new Promise(function(b,c){f(a,b,c)})}var f=null,g=null,h=null,i=null,j=null,k=null,l={log:function(){void 0!==c||"function"==typeof b&&"function"==typeof a||console.log.apply(console,arguments)},extractVersion:function(a,b,c){var d=a.match(b);return d&&d.length>=c&&parseInt(d[c])}};if("object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return"mozSrcObject"in this?this.mozSrcObject:this._srcObject},set:function(a){"mozSrcObject"in this?this.mozSrcObject=a:(this._srcObject=a,this.src=URL.createObjectURL(a))}}),f=window.navigator&&window.navigator.getUserMedia),g=function(a,b){a.srcObject=b},h=function(a,b){a.srcObject=b.srcObject},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){if(l.log("This appears to be Firefox"),i="firefox",j=l.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),k=31,window.RTCPeerConnection=function(a,b){if(j<38&&a&&a.iceServers){for(var c=[],d=0;d<a.iceServers.length;d++){var e=a.iceServers[d];if(e.hasOwnProperty("urls"))for(var f=0;f<e.urls.length;f++){var g={url:e.urls[f]};0===e.urls[f].indexOf("turn")&&(g.username=e.username,g.credential=e.credential),c.push(g)}else c.push(a.iceServers[d])}a.iceServers=c}return new mozRTCPeerConnection(a,b)},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),f=function(a,b,c){var d=function(a){if("object"!=typeof a||a.require)return a;var b=[];return Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var d=a[c]="object"==typeof a[c]?a[c]:{ideal:a[c]};if(void 0===d.min&&void 0===d.max&&void 0===d.exact||b.push(c),void 0!==d.exact&&("number"==typeof d.exact?d.min=d.max=d.exact:a[c]=d.exact,delete d.exact),void 0!==d.ideal){a.advanced=a.advanced||[];var e={};"number"==typeof d.ideal?e[c]={min:d.ideal,max:d.ideal}:e[c]=d.ideal,a.advanced.push(e),delete d.ideal,Object.keys(d).length||delete a[c]}}}),b.length&&(a.require=b),a};return j<38&&(l.log("spec: "+JSON.stringify(a)),a.audio&&(a.audio=d(a.audio)),a.video&&(a.video=d(a.video)),l.log("ff37: "+JSON.stringify(a))),navigator.mozGetUserMedia(a,b,c)},navigator.getUserMedia=f,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:e,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(a){a([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},j<41){var m=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return m().then(void 0,function(a){if("NotFoundError"===a.name)return[];throw a})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){l.log("This appears to be Chrome"),i="chrome",j=l.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),k=38,window.RTCPeerConnection=function(a,b){a&&a.iceTransportPolicy&&(a.iceTransports=a.iceTransportPolicy);var c=new webkitRTCPeerConnection(a,b),d=c.getStats.bind(c);return c.getStats=function(a,b,c){var e=this,f=arguments;if(arguments.length>0&&"function"==typeof a)return d(a,b);var g=function(a){var b={};return a.result().forEach(function(a){var c={id:a.id,timestamp:a.timestamp,type:a.type};a.names().forEach(function(b){c[b]=a.stat(b)}),b[c.id]=c}),b};if(arguments.length>=2){var h=function(a){f[1](g(a))};return d.apply(this,[h,arguments[0]])}return new Promise(function(b,c){1===f.length&&null===a?d.apply(e,[function(a){b.apply(null,[g(a)])},c]):d.apply(e,[b,c])})},c},["createOffer","createAnswer"].forEach(function(a){var b=webkitRTCPeerConnection.prototype[a];webkitRTCPeerConnection.prototype[a]=function(){var a=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var c=1===arguments.length?arguments[0]:void 0;return new Promise(function(d,e){b.apply(a,[d,e,c])})}return b.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=webkitRTCPeerConnection.prototype[a];webkitRTCPeerConnection.prototype[a]=function(){var a=arguments,c=this;return new Promise(function(d,e){b.apply(c,[a[0],function(){d(),a.length>=2&&a[1].apply(null,[])},function(b){e(b),a.length>=3&&a[2].apply(null,[b])}])})}});var n=function(a){if("object"!=typeof a||a.mandatory||a.optional)return a;var b={};return Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var d="object"==typeof a[c]?a[c]:{ideal:a[c]};void 0!==d.exact&&"number"==typeof d.exact&&(d.min=d.max=d.exact);var e=function(a,b){return a?a+b.charAt(0).toUpperCase()+b.slice(1):"deviceId"===b?"sourceId":b};if(void 0!==d.ideal){b.optional=b.optional||[];var f={};"number"==typeof d.ideal?(f[e("min",c)]=d.ideal,b.optional.push(f),f={},f[e("max",c)]=d.ideal,b.optional.push(f)):(f[e("",c)]=d.ideal,b.optional.push(f))}void 0!==d.exact&&"number"!=typeof d.exact?(b.mandatory=b.mandatory||{},b.mandatory[e("",c)]=d.exact):["min","max"].forEach(function(a){void 0!==d[a]&&(b.mandatory=b.mandatory||{},b.mandatory[e(a,c)]=d[a])})}}),a.advanced&&(b.optional=(b.optional||[]).concat(a.advanced)),b};if(f=function(a,b,c){return a.audio&&(a.audio=n(a.audio)),a.video&&(a.video=n(a.video)),l.log("chrome: "+JSON.stringify(a)),navigator.webkitGetUserMedia(a,b,c)},navigator.getUserMedia=f,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:e,enumerateDevices:function(){return new Promise(function(a){var b={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(c){a(c.map(function(a){return{label:a.label,kind:b[a.kind],deviceId:a.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(a){return l.log("spec:   "+JSON.stringify(a)),a.audio=n(a.audio),a.video=n(a.video),l.log("chrome: "+JSON.stringify(a)),o(a)}}else navigator.mediaDevices.getUserMedia=function(a){return e(a)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){l.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){l.log("Dummy mediaDevices.removeEventListener called.")}),g=function(a,b){j>=43?a.srcObject=b:void 0!==a.src?a.src=URL.createObjectURL(b):l.log("Error attaching stream to element.")},h=function(a,b){j>=43?a.srcObject=b.srcObject:a.src=b.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(l.log("This appears to be Edge"),i="edge",j=l.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),k=12):l.log("Browser does not appear to be WebRTC-capable");else l.log("This does not appear to be a browser"),i="not a browser";var p={};try{Object.defineProperty(p,"version",{
set:function(a){j=a}})}catch(a){}if(void 0!==c){var q;"undefined"!=typeof window&&(q=window.RTCPeerConnection),c.exports={RTCPeerConnection:q,getUserMedia:f,attachMediaStream:g,reattachMediaStream:h,webrtcDetectedBrowser:i,webrtcDetectedVersion:j,webrtcMinimumVersion:k,webrtcTesting:p,webrtcUtils:l}}else"function"==typeof b&&"function"==typeof a&&a([],function(){return{RTCPeerConnection:window.RTCPeerConnection,getUserMedia:f,attachMediaStream:g,reattachMediaStream:h,webrtcDetectedBrowser:i,webrtcDetectedVersion:j,webrtcMinimumVersion:k,webrtcTesting:p,webrtcUtils:l}})},{}],7:[function(a,b,c){b.exports={package:"StxhdControlMessages",messages:[{name:"ControlMessage",fields:[{rule:"required",options:{},type:"uint64",name:"id",id:1},{rule:"required",options:{},type:"ControlType",name:"control_type",id:2},{rule:"optional",options:{},type:"HelloRequest",name:"hello_request",id:3},{rule:"optional",options:{},type:"HelloReply",name:"hello_reply",id:4},{rule:"optional",options:{},type:"GoodbyeRequest",name:"goodbye_request",id:5},{rule:"optional",options:{},type:"GoodbyeReply",name:"goodbye_reply",id:6},{rule:"optional",options:{},type:"HeartbeatRequest",name:"heartbeat_request",id:7},{rule:"optional",options:{},type:"HeartbeatReply",name:"heartbeat_reply",id:8},{rule:"optional",options:{},type:"ResolutionChangeMessage",name:"resolution_change_message",id:9}],enums:[{name:"ControlType",values:[{name:"HELLO_REQUEST",id:1},{name:"HELLO_REPLY",id:2},{name:"GOODBYE_REQUEST",id:3},{name:"GOODBYE_REPLY",id:4},{name:"HEARTBEAT_REQUEST",id:5},{name:"HEARTBEAT_REPLY",id:6},{name:"RESOLUTION_CHANGE_MESSAGE",id:7}],options:{}}],messages:[],options:{},oneofs:{}},{name:"HelloRequest",fields:[],enums:[],messages:[],options:{},oneofs:{}},{name:"HelloReply",fields:[{rule:"required",options:{},type:"uint64",name:"request_id",id:1}],enums:[],messages:[],options:{},oneofs:{}},{name:"GoodbyeRequest",fields:[{rule:"required",options:{},type:"uint32",name:"disconnect_reason",id:1},{rule:"required",options:{},type:"string",name:"description",id:2}],enums:[],messages:[],options:{},oneofs:{}},{name:"GoodbyeReply",fields:[{rule:"required",options:{},type:"uint64",name:"request_id",id:1}],enums:[],messages:[],options:{},oneofs:{}},{name:"HeartbeatRequest",fields:[{rule:"required",options:{},type:"uint64",name:"counter",id:1},{rule:"required",options:{},type:"uint64",name:"time",id:2}],enums:[],messages:[],options:{},oneofs:{}},{name:"HeartbeatReply",fields:[{rule:"required",options:{},type:"uint64",name:"request_id",id:1},{rule:"required",options:{},type:"uint64",name:"request_counter",id:2},{rule:"required",options:{},type:"uint64",name:"request_time",id:3}],enums:[],messages:[],options:{},oneofs:{}},{name:"ResolutionChangeMessage",fields:[{rule:"required",options:{},type:"string",name:"videotrack_name",id:1},{rule:"required",options:{},type:"string",name:"mediastream_name",id:2},{rule:"required",options:{},type:"uint32",name:"width",id:3},{rule:"required",options:{},type:"uint32",name:"height",id:4}],enums:[],messages:[],options:{},oneofs:{}}],enums:[],imports:[],options:{optimize_for:"LITE_RUNTIME"},services:[]}},{}],8:[function(a,b,c){b.exports={package:"Stxhd_input_event_messages",messages:[{name:"InputMessage",fields:[{rule:"required",options:{},type:"uint64",name:"id",id:1},{rule:"required",options:{},type:"InputType",name:"input_type",id:2},{rule:"required",options:{},type:"uint64",name:"time",id:3},{rule:"optional",options:{},type:"CustomInputMessage",name:"custom",id:4},{rule:"optional",options:{},type:"RawKeyboardInputMessage",name:"raw_keyboard",id:5},{rule:"optional",options:{},type:"RawMouseInputMessage",name:"raw_mouse",id:6},{rule:"optional",options:{},type:"TouchInputMessage",name:"touch",id:7},{rule:"optional",options:{},type:"GamepadInputMessage",name:"gamepad",id:8}],enums:[{name:"InputType",values:[{name:"CUSTOM",id:0},{name:"RAW_KEYBOARD",id:1},{name:"RAW_MOUSE",id:2},{name:"TOUCH",id:3},{name:"GAMEPAD",id:4}],options:{}}],messages:[],options:{},oneofs:{}},{name:"CustomInputMessage",fields:[{rule:"required",options:{},type:"bool",name:"reliable",id:1},{rule:"required",options:{},type:"uint32",name:"size",id:2},{rule:"required",options:{},type:"bytes",name:"data",id:3},{rule:"optional",options:{},type:"uint64",name:"sequence_number",id:4}],enums:[],messages:[],options:{},oneofs:{}},{name:"RawKeyboardInputMessage",fields:[{rule:"required",options:{},type:"bool",name:"is_key_down",id:1},{rule:"required",options:{},type:"sint32",name:"virtual_key",id:2},{rule:"required",options:{},type:"sint32",name:"scan_code",id:3}],enums:[],messages:[],options:{},oneofs:{}},{name:"RawMouseInputMessage",fields:[{rule:"required",options:{},type:"uint32",name:"mouse_id",id:1},{rule:"required",options:{},type:"uint32",name:"flags",id:2},{rule:"required",options:{},type:"uint32",name:"button_flags",id:3},{rule:"required",options:{},type:"sint32",name:"buttons",id:4},{rule:"required",options:{},type:"sint32",name:"button_data",id:5},{rule:"required",options:{},type:"sint32",name:"last_x",id:6},{rule:"required",options:{},type:"sint32",name:"last_y",id:7}],enums:[],messages:[],options:{},oneofs:{}},{name:"TouchInputMessage",fields:[{rule:"repeated",options:{},type:"Pointer",name:"pointer",id:1}],enums:[{name:"TouchType",values:[{name:"DOWN",id:0},{name:"UP",id:1},{name:"MOVE",id:2},{name:"CANCELLED",id:3}],options:{}}],messages:[{name:"Pointer",fields:[{rule:"required",options:{},type:"uint64",name:"pointer_id",id:1},{rule:"required",options:{},type:"float",name:"x",id:2},{rule:"required",options:{},type:"float",name:"y",id:3},{rule:"required",options:{},type:"float",name:"pointerSize",id:4},{rule:"required",options:{},type:"TouchType",name:"touch_type",id:5},{rule:"optional",options:{},type:"float",name:"pressure",id:6}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}},{name:"GamepadInputMessage",fields:[{rule:"required",options:{},type:"uint32",name:"buttons",id:1},{rule:"required",options:{},type:"uint32",name:"left_trigger",id:2},{rule:"required",options:{},type:"uint32",name:"right_trigger",id:3},{rule:"required",options:{},type:"sint32",name:"thumb_lx",id:4},{rule:"required",options:{},type:"sint32",name:"thumb_ly",id:5},{rule:"required",options:{},type:"sint32",name:"thumb_rx",id:6},{rule:"required",options:{},type:"sint32",name:"thumb_ry",id:7}],enums:[],messages:[],options:{},oneofs:{}}],enums:[],imports:[],options:{optimize_for:"LITE_RUNTIME"},services:[]}},{}],9:[function(a,b,c){b.exports={version:"developer_build at Wed Jul 10 2019 14:35:35 GMT-0700 (Pacific Daylight Time) on Fix_TT_P24880065"}},{}],10:[function(a,b,c){"use strict";a("webrtc-adapter");var d={};d.RTCPeerConnection=window.RTCPeerConnection,d.RTCSessionDescription=window.RTCSessionDescription,d.RTCIceCandidate=window.RTCIceCandidate,b.exports=d},{"webrtc-adapter":6}],11:[function(a,b,c){function d(b){function c(){if(!h.chrome&&!h.firefox)throw new Error("Currently AppStream web client only supports the Chrome and Firefox browsers.");if(h.chrome&&h.version<"40")throw new Error("AppStream requires Chrome version 40 or higher; please upgrade.");if(h.firefox&&h.version<"31.0")throw new Error("AppStream requires Firefox version 31 or higher; please upgrade.")}var d=a("./stxhdlog.js"),e=a("./stxhdpeersignaler.js"),f=a("./stxhdpeerconnection.js"),g=a("./stxhdinputadapter.js"),h=a("bowser"),i=a("version.json"),j=d.getLogger();b||c();var k={browserName:h.name,browserVersion:h.version,navigator:{}},l=0;for(var m in navigator){var n=navigator[m];if("string"==typeof n||"number"==typeof n||"boolean"==typeof n){if(!((l+=String(n).length+String(m).length+7)<2e3)){k.navigator.log_truncated_before=l;break}k.navigator[m]=n}}this.getLogger=function(){return j},this.getVersionString=function(){return i.version},this.getBrowserStats=function(){return k},this.createPeerSignaler=function(a){return new e(a,j)},this.createPeerConnection=function(a){return new f(a,j)},this.createInputAdapter=function(a,b,c,d,e){return new g(a,b,c,d,j,e)}}b.exports=d},{"./stxhdinputadapter.js":16,"./stxhdlog.js":18,"./stxhdpeerconnection.js":19,"./stxhdpeersignaler.js":20,bowser:4,"version.json":9}],12:[function(a,b,c){var d={STXHD_CONNECTION_STATE_NEW:100,STXHD_CONNECTION_STATE_CONNECTING:200,STXHD_CONNECTION_STATE_CONNECTED:300,STXHD_CONNECTION_STATE_RECONNECTING:400,STXHD_CONNECTION_STATE_DISCONNECTING:500,STXHD_CONNECTION_STATE_DISCONNECTED:600,STXHD_CONNECTION_STATE_FAILED:700,toString:function(a){for(var b in this)if(this[b]===a)return b;return"ERROR: Unknown StxhdConnectionState value: "+a}};b.exports=d},{}],13:[function(a,b,c){function d(b,c){function e(){C.hasOwnProperty("onControlChannelOpen")?C.onControlChannelOpen():b.warn(D,"StxhdControlChannel.onControlChannelOpen() callback function was not defined.")}function f(){C.hasOwnProperty("onControlChannelClosed")?C.onControlChannelClosed(F,G):b.warn(D,"StxhdControlChannel.onControlChannelClosed() callback function was not defined.")}function g(a,c,d){C.hasOwnProperty("onHeartbeatRequest")?C.onHeartbeatRequest(a,c,d):b.warn(D,"StxhdControlChannel.onHeartbeatRequest() callback function was not defined.")}function h(a,c){C.hasOwnProperty("onHeartbeatReply")?C.onHeartbeatReply(a,c):b.warn(D,"StxhdControlChannel.onHeartbeatReply() callback function was not defined.")}function i(a,c,d){C.hasOwnProperty("onResolutionChangeMessage")?C.onResolutionChangeMessage(a,c,d):b.warn(D,"StxhdControlChannel.onResolutionChangeMessage()) callback function was not defined.")}function j(){m({control_type:d.proto.ControlMessage.ControlType.HELLO_REQUEST,hello_request:{}})}function k(a){m({control_type:d.proto.ControlMessage.ControlType.HELLO_REPLY,hello_reply:{request_id:a}})}function l(a,b){m({control_type:d.proto.ControlMessage.ControlType.GOODBYE_REQUEST,goodbye_request:{disconnect_reason:a,description:b}})}function m(a){a.id=H,H+=1;var b=new d.proto.ControlMessage(a),c=b.encode().toArrayBuffer();x.send(c)}function n(a,c,d){q()?b.info(D,"setDisconnectReason(reason={0}, description='{1}').  Already disconnecting(), ignored.",t.toString(a),c):(b.info(D,"setDisconnectReason(reason={0}, description='{1}')",t.toString(a),c),F=a,G=c,E=r.STXHD_CONNECTION_STATE_DISCONNECTING),d&&!I&&(I=!0,f(F,G))}function o(){return r.STXHD_CONNECTION_STATE_CONNECTING===E}function p(){return r.STXHD_CONNECTION_STATE_CONNECTED===E}function q(){return r.STXHD_CONNECTION_STATE_DISCONNECTING===E}var r=a("./stxhdconnectionstate.js"),s=a("./stxhddatachannel.js"),t=a("./stxhddisconnectreason.js");if(!d.proto){var u=a("protobuf.noparse"),v=a("StxhdControlMessages.json"),w=u.loadJson(v);d.proto=w.build("StxhdControlMessages")}var x=c.dataChannel,y=!x;if(y){var z={order:!0},A=c.webRtcPeerConnection;if(!A)throw new Error("The options parameter must contains eitherdataChannel or webRtcPeerConnection");var B=A.createDataChannel(d.LABEL,z);x=new s(b,!0,B)}var C=this,D="StxhdControlChannel",E=r.STXHD_CONNECTION_STATE_CONNECTING,F=t.STXHD_DISCONNECT_REASON_NOT_SET,G=null,H=0,I=!1;x.onOpen=function(){if(b.info(D,"onOpen()"),y)try{j()}catch(a){b.error(D,"sendHelloRequest() failed: {0}\n{1}",a.message,a.stack),n(t.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"sendHelloRequest() failed!.  Closing",!0)}},x.onError=function(){b.info(D,"onError()"),n(t.STXHD_DISCONNECT_REASON_CONNECTION_LOST,"onError() callback called.",!0),f()},x.onClose=function(){b.info(D,"onClose()"),n(t.STXHD_DISCONNECT_REASON_CONNECTION_LOST,"onClose() callback called.",!0),f()},x.onMessage=function(a){if(a instanceof ArrayBuffer){var c,f=new Uint8Array(a);try{c=d.proto.ControlMessage.decode(f)}catch(a){return void b.error(D,"ControlMessage.decode() failed: {0}\n{1}",a.message,a.stack)}switch(b.verbose(D,"onMessage(): ",JSON.stringify(c)),c.control_type){case d.proto.ControlMessage.ControlType.HELLO_REQUEST:if(!c.hello_request){b.error(D,"HELLO_REQUEST w/o hello_request value");break}if(o()){b.info(D,"Received HelloRequest (id={0}).  Sending HelloReply",c.id);try{k(c.id)}catch(a){b.error(D,"sendHelloReply() failed: {0}\n{1}",a.message,a.stack),n(t.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"sendHelloReply() failed.");break}E=r.STXHD_CONNECTION_STATE_CONNECTED,e()}else b.info(D,"Received HelloRequest (id={0}) but NOT connecting, so ignoring it.",c.id);break;case d.proto.ControlMessage.ControlType.HELLO_REPLY:var j=c.hello_reply;if(!j){b.error(D,"HELLO_REPLY w/o hello_reply value");break}o()?(b.info(D,"Received HelloReply (id={0}, request_id={1}",c.id,j.request_id),E=r.STXHD_CONNECTION_STATE_CONNECTED,e()):b.info(D,"Received HelloRequest but NOT connecting, so ignoring it.");break;case d.proto.ControlMessage.ControlType.GOODBYE_REQUEST:var l=c.goodbye_request;if(!l){b.error(D,"GOODBYE_REQUEST w/o goodbye_request value");break}b.info(D,"Received GoodbyeRequest(id={0}, reason={1}, description='{2}').  ",c.id,t.toString(l.disconnect_reason),l.description),n(t.STXHD_DISCONNECT_REASON_PEER_REQUEST,"Received GoodbyeRequest",!0);break;case d.proto.ControlMessage.ControlType.HEARTBEAT_REQUEST:var m=c.heartbeat_request;if(!m){b.error(D,"HEARTBEAT_REQUEST w/o heartbeat_request value");break}b.info(D,"Received HeartbeatRequest (id={0}, counter={1}, time={2}",c.id,m.counter,m.time),p()&&g(c.id,m.counter,m.time);break;case d.proto.ControlMessage.ControlType.HEARTBEAT_REPLY:var q=c.heartbeat_reply;if(!q){b.error(D,"HEARTBEAT_REPLY w/o heartbeat_reply value");break}b.info(D,"Received HeartbeatReply (id={0}, request_id={1}, request_counter={2}, request_time={3})",c.id,q.request_id,q.request_counter,q.request_time),p()&&h(q.request_counter,q.request_time);break;case d.proto.ControlMessage.ControlType.RESOLUTION_CHANGE_MESSAGE:var s=c.resolution_change_message;s?i(s.mediastream_name,s.width,s.height):b.error(D,"Failed to decode ResolutionChangeMessage");break;default:b.warn(D,"Unhandled message type: ",c.control_type)}}else if(a instanceof Blob){var u=new FileReader;u.onload=function(){x.onMessage(this.result)},u.readAsArrayBuffer(a,0,a.byteLength)}else b.error(D,"onMessage(): Can't understand event in handleMessage! typeof='{0}', eventData={1}",typeof a,JSON.stringify(a))},this.sendHeartbeatRequest=function(a,b){m({control_type:d.proto.ControlMessage.ControlType.HEARTBEAT_REQUEST,heartbeat_request:{counter:a,time:b}})},this.sendHeartbeatReply=function(a,b,c){m({control_type:d.proto.ControlMessage.ControlType.HEARTBEAT_REPLY,heartbeat_reply:{request_id:a,request_counter:b,request_time:c}})},this.sendResolutionChangeMessage=function(a,b,c,e){m({control_type:d.proto.ControlMessage.ControlType.RESOLUTION_CHANGE_MESSAGE,resolution_change_message:{videotrack_name:a,mediastream_name:b,width:c,height:e}})},this.close=function(a,c){p()?(b.info(D,"close(reason={0}, description='{1}')",t.toString(a),c),n(a,c,!1),l(F,G)):b.info(D,"close(reason={0}, description='{1}') NOT connected().  Ignoring.",t.toString(a),c)}}d.LABEL="StxhdControlChannel",b.exports=d},{"./stxhdconnectionstate.js":12,"./stxhddatachannel.js":14,"./stxhddisconnectreason.js":15,"StxhdControlMessages.json":7,"protobuf.noparse":28}],14:[function(a,b,c){function d(a,b,c){function e(b){j.hasOwnProperty("onMessage")?j.onMessage(b.data):a.warn(i,"StxhdDataChannel.onMessage(data) callback function was not defined for '{0}'",c.label)}function f(){j.hasOwnProperty("onOpen")?j.onOpen():a.warn(i,"StxhdDataChannel.onOpen() callback function was not defined for '{0}'",c.label)}function g(){j.hasOwnProperty("onError")?j.onError():a.warn(i,"StxhdDataChannel.onError() callback function was not defined for '{0}'",c.label)}function h(){j.hasOwnProperty("onClose")?j.onClose():a.warn(i,"StxhdDataChannel.onClose()  callback function was not defined for '{0}'",c.label)}var i="StxhdDataChannel",j=this;if(!c)throw new Error("StxhdDataChannel must have a valid webrtcDataChannel");c.onmessage=e,c.onopen=f,c.onerror=g,c.onclose=h,this.getName=function(){return c.label.substring(d.LABEL_PREFIX.length)},this.send=function(b){if(!c)throw new Error("StxhdDataChannel.send() called while the channel have not been created");if("open"!==c.readyState)return void a.warn(i,"Channel not open, send ignored.");c.bufferedAmount>0&&a.warn(i,"StxhdDataChannel.send() send buffer not empty."),c.send(b)}}d.LABEL_PREFIX="StxhdDataChannel:",b.exports=d},{}],15:[function(a,b,c){var d={STXHD_DISCONNECT_REASON_NOT_SET:0,STXHD_DISCONNECT_REASON_API_REQUEST:1,STXHD_DISCONNECT_REASON_PEER_REQUEST:2,STXHD_DISCONNECT_REASON_CONNECTION_LOST:3,STXHD_DISCONNECT_REASON_INCOMPATIBLE:4,STXHD_DISCONNECT_REASON_CREDENTIALS_EXPIRED:5,STXHD_DISCONNECT_REASON_CREDENTIALS_UNVERIFIED:6,STXHD_DISCONNECT_REASON_CREDENTIALS_IN_USE:7,STXHD_DISCONNECT_REASON_ICE_FAILED:8,STXHD_DISCONNECT_REASON_INTERNAL_ERROR:9,STXHD_DISCONNECT_REASON_INITIATOR_MISMATCH:10,toString:function(a){for(var b in this)if(this[b]===a)return b;return"ERROR: Unknown StxhdDisconnectReason value: "+a}};b.exports=d},{}],16:[function(a,b,c){function d(b,c,d,e,f,g){function h(a,b){f.verbose(E,a,"left",b.left,"top",b.top,"width",b.width,"height",b.height)}function i(){var a=e;if(0===a.videoWidth||0===a.videoHeight)return f.verbose(E,"The videosink has 0 width or height. The frame is probably not ready yet. Mouse input ignored."),null;F&&f.verbose(E,"getVideoClientRect():","video.videoWidth",a.videoWidth,"video.videoHeight",a.videoHeight);var b=a.videoWidth/a.videoHeight,c=a.getBoundingClientRect(),d=c.width/c.height,g={left:c.left,top:c.top,width:c.width,height:c.height};return F&&h("videoRect (bounds)",g),d>b?(g.width=c.height*b,g.left+=(c.width-g.width)/2):(g.height=c.width/b,g.top+=(c.height-g.height)/2),F&&h("videoRect (trimmed)",g),g}function j(){D.hasOwnProperty("onSendFailed")?D.onSendFailed():f.warn(E,"StxhdInputAdapter.onSendFailed() callback function was not defined.")}function k(a,b){D.hasOwnProperty("onResolutionChange")?D.onResolutionChange(a,b):f.warn(E,"StxhdInputAdapter.onResolutionChange(newWidth={0}, newHeight={1}) callback function was not defined.",a,b)}function l(a,b,d,g){var h=i();if(h){var k={input_type:"RAW_MOUSE",time:Math.floor(window.performance.now()),raw_mouse:{mouse_id:0,flags:X.MOUSE_MOVE_ABSOLUTE,button_flags:d,buttons:0,button_data:g||0}};0!==W.width&&0!==W.height||(f.warn(E,"Have not received the serverResolution, mouse coordinates offset not computed.  The mouse coordinates is probably off if the video element is resized."),W.width=e.videoWidth,W.height=e.videoHeight,W.aspect=W.width/W.height);var l=(W.width-e.videoWidth)/2,m=(W.height-e.videoHeight)/2;F&&f.verbose(E,"sendMouseEvent(): offsetX",l,"offsetY",m),k.raw_mouse.last_x=(a-h.left)*e.videoWidth/h.width+l+.5|0,k.raw_mouse.last_y=(b-h.top)*e.videoHeight/h.height+m+.5|0,(F||G)&&f.verbose(E,"sendMouseEvent():","last_x",k.raw_mouse.last_x,"last_y",k.raw_mouse.last_y,"flags",k.raw_mouse.flags,"button_flags",k.raw_mouse.button_flags,"button_data",k.raw_mouse.button_data,"x",a,"y",b);try{c.send(k)}catch(a){f.verbose(E,"sendMouseEvent(): inputSink.send() failed: {0}\n{1}",a.message,a.stack),j()}}}function m(a,b,d){if(d||(d=0),a===S&&(a=Q),a!==Q&&d!==R||!O){var e={input_type:"RAW_KEYBOARD",time:Math.floor(window.performance.now()),raw_keyboard:{is_key_down:b,virtual_key:a,scan_code:d}};try{c.send(e),a!==Q||O||b||n()}catch(a){f.verbose(E,"sendMouseEvent(): inputSink.send() failed: {0}\n{1}",a.message,a.stack),j()}}}function n(){var a={input_type:"RAW_KEYBOARD",time:Math.floor(window.performance.now()),raw_keyboard:{is_key_down:!1,virtual_key:-1,scan_code:-1}};try{c.send(a)}catch(a){j()}}function o(a){!a.which&&a.button&&(1&a.button?a.which=1:4&a.button?a.which=2:2&a.button&&(a.which=3))}function p(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1}function q(a){return a=a||window.event,o(a),l(a.clientX,a.clientY,0),F&&f.verbose(E,"onmousemove",a),p(a)}function r(a){a=a||window.event,o(a);var b=i();if(a.clientX<b.left)return p(a);if(a.clientX>b.left+b.width)return p(a);if(a.clientY<b.top)return p(a);if(a.clientY>b.top+b.height)return p(a);switch(a.which){default:case 1:l(a.clientX,a.clientY,X.RI_MOUSE_LEFT_BUTTON_DOWN);break;case 2:l(a.clientX,a.clientY,X.RI_MOUSE_MIDDLE_BUTTON_DOWN);break;case 3:l(a.clientX,a.clientY,X.RI_MOUSE_RIGHT_BUTTON_DOWN)}return F&&f.verbose(E,"onmousedown",a),p(a)}function s(a){switch(a=a||window.event,o(a),a.which){default:case 1:l(a.clientX,a.clientY,X.RI_MOUSE_LEFT_BUTTON_UP);break;case 2:l(a.clientX,a.clientY,X.RI_MOUSE_MIDDLE_BUTTON_UP);break;case 3:l(a.clientX,a.clientY,X.RI_MOUSE_RIGHT_BUTTON_UP)}return F&&f.verbose(E,"onmouseup",a),p(a)}function t(a){return a=a||window.event,o(a),F&&f.verbose(E,"onmouseout",a),p(a)}function u(a){var b=-Math.round(a.deltaY);return K.firefox&&1===a.deltaMode&&(b*=X.WHEEL_DELTA/3),G&&f.verbose("DeltaY: "+a.deltaY+" amountToScroll: "+b),l(a.clientX,a.clientY,X.RI_MOUSE_WHEEL,b),p(a)}function v(a){return a=a||window.event,p(a)}function w(a){var b=a.keyCode;switch(a.code){case"Minus":b=189;break;case"Equal":b=187;break;case"Semicolon":b=186}return b}function x(a){var b=0;switch(a.code){case"Escape":b=1;break;case"F1":b=59;break;case"F2":b=60;break;case"F3":b=61;break;case"F4":b=62;break;case"F5":b=63;break;case"F6":b=64;break;case"F7":b=65;break;case"F8":b=66;break;case"F9":b=67;break;case"F10":b=68;break;case"F11":b=87;break;case"F12":b=88;break;case"F13":case"PrintScreen":b=57399;break;case"ScrollLock":b=70;break;case"Pause":b=69;break;case"Backquote":b=41;break;case"Digit1":b=2;break;case"Digit2":b=3;break;case"Digit3":b=4;break;case"Digit4":b=5;break;case"Digit5":b=6;break;case"Digit6":b=7;break;case"Digit7":b=8;break;case"Digit8":b=9;break;case"Digit9":b=10;break;case"Digit0":b=11;break;case"Minus":b=12;break;case"Equal":b=13;break;case"Backspace":b=14;break;case"Tab":b=15;break;case"KeyQ":b=16;break;case"KeyW":b=17;break;case"KeyE":b=18;break;case"KeyR":b=19;break;case"KeyT":b=20;break;case"KeyY":b=21;break;case"KeyU":b=22;break;case"KeyI":b=23;break;case"KeyO":b=24;break;case"KeyP":b=25;break;case"BracketLeft":b=26;break;case"BracketRight":b=27;break;case"Enter":b=28;break;case"Backslash":b=43;break;case"CapsLock":b=58;break;case"KeyA":b=30;break;case"KeyS":b=31;break;case"KeyD":b=32;break;case"KeyF":b=33;break;case"KeyG":b=34;break;case"KeyH":b=35;break;case"KeyJ":b=36;break;case"KeyK":b=37;break;case"KeyL":b=38;break;case"Semicolon":b=39;break;case"Enter":b=28;break;case"ShiftLeft":b=42;break;case"KeyZ":b=44;break;case"KeyX":b=45;break;case"KeyC":b=46;break;case"KeyV":b=47;break;case"KeyB":b=48;break;case"KeyN":b=49;break;case"KeyM":b=50;break;case"Comma":b=51;break;case"Period":b=52;break;case"Slash":b=53;break;case"ShiftRight":b=54;break;case"ControlLeft":b=29;break;case"MetaLeft":case"OSLeft":b=57435;break;case"AltLeft":b=56;break;case"Space":b=57;break;case"AltRight":b=57400;break;case"MetaRight":case"OSRight":b=57436;break;case"ContextMenu":b=57437;break;case"ControlRight":b=57373;break;case"ArrowUp":b=57416;break;case"ArrowLeft":b=57419;break;case"ArrowRight":b=57421;break;case"ArrowDown":b=57424;break;case"NumLock":b=57413;break;case"NumpadDivide":b=57397;break;case"NumpadMultiply":b=55;break;case"NumpadSubtract":b=74;break;case"NumpadAdd":b=78;break;case"NumpadEnter":b=57372;break;case"Numpad7":b=71;break;case"Numpad8":b=72;break;case"Numpad9":b=73;break;case"Numpad4":b=75;break;case"Numpad5":b=76;break;case"Numpad6":b=77;break;case"Numpad1":b=79;break;case"Numpad2":b=80;break;case"Numpad3":b=81;break;case"Numpad0":b=82;break;case"NumpadDecimal":b=83;break;case"Insert":b=57426;break;case"Home":b=57415;break;case"PageUp":b=57417;break;case"PageDown":b=57425;break;case"Delete":b=57427;break;case"End":b=57423;break;case"Quote":b=40;break;case"IntlYen":b=125;break;case"IntlRo":b=115}return b}function y(a){a=a||window.event,H&&f.verbose(E,"keydown",a);var b=P===M?w(a):0,c=P===N?x(a):0;return a.code===T&&L?(m(b,!0,c),m(b,!1,c)):a.code===U||a.code===V?(m(b,!0,c),m(b,!1,c)):m(b,!0,c),p(a)}function z(a){a=a||window.event,H&&f.verbose(E,"keyup",a);var b=P===M?w(a):0,c=P===N?x(a):0;return a.code===T&&L?(m(b,!0,c),m(b,!1,c)):a.code===U||a.code===V?(m(b,!0,c),m(b,!1,c)):m(b,!1,c),p(a)}function A(a){return a=a||window.event,n(),H&&f.info(E,"blur",a),p(a)}function B(a){return a=a||window.event,n(),H&&f.info(E,"focus",a),p(a)}function C(a){a=a||window.event;var c=window.innerWidth||b.documentElement.clientWidth||b.body.clientWidth,d=window.innerHeight||b.documentElement.clientHeight||b.body.clientHeight;return I&&(f.verbose(E,"resized",a),f.verbose(E,"Window height: "+d+" width: "+c)),p(a)}var D=this,E="StxhdInputAdapter",F=!1,G=!1,H=!1,I=!1,J=!1,K=a("bowser"),L=navigator.platform.indexOf("Mac")>=0,M="keycode",N="scancode",O=!0,P=M,Q=91,R=57435,S=224,T="CapsLock",U="PrintScreen",V="F13",W={width:0,height:0,aspect:0},X={MOUSE_MOVE_ABSOLUTE:1,WHEEL_DELTA:120,RI_MOUSE_LEFT_BUTTON_DOWN:1,RI_MOUSE_LEFT_BUTTON_UP:2,RI_MOUSE_MIDDLE_BUTTON_DOWN:16,RI_MOUSE_MIDDLE_BUTTON_UP:32,RI_MOUSE_RIGHT_BUTTON_DOWN:4,RI_MOUSE_RIGHT_BUTTON_UP:8,RI_MOUSE_WHEEL:1024};if(!b)throw new Error("StxhdInputAdapter: no inputSource given");if(!c)throw new Error("StxhdInputAdapter: no inputSink given");if(!d)throw new Error("StxhdInputAdapter: no videoSource given");if(!e)throw new Error("StxhdInputAdapter: no videoSink given");g||f.warn(E,"No keyboardInputSource was specified, defaulting keyboard events to inputSource."),d.onResolutionChange=function(a,b){J&&f.verbose(E,"serverResolutionChange():","newWidth",a,"newHeight",b),W.width=a,W.height=b,W.aspect=a/b,k(a,b)},this.bindEvents=function(){f.info(E,"bindEvents"),b.addEventListener("mousemove",q),b.addEventListener("mousedown",r),b.addEventListener("mouseup",s),b.addEventListener("mouseout",t),b.addEventListener("wheel",u),b.addEventListener("contextmenu",v),g?(g.addEventListener("keydown",y),g.addEventListener("keyup",z)):(b.addEventListener("keydown",y),b.addEventListener("keyup",z)),window.addEventListener("blur",A),window.addEventListener("focus",B),window.addEventListener("resize",C)},this.unbindEvents=function(){f.info(E,"UN-bindEvents"),b.removeEventListener("mousemove",q),b.removeEventListener("mousedown",r),b.removeEventListener("mouseup",s),b.removeEventListener("mouseout",t),b.removeEventListener("wheel",u),b.removeEventListener("contextmenu",v),g?(g.removeEventListener("keydown",y),g.removeEventListener("keyup",z)):(b.removeEventListener("keydown",y),b.removeEventListener("keyup",z)),window.removeEventListener("blur",A),window.removeEventListener("focus",B),window.removeEventListener("resize",C)},this.clearModifiers=function(){f.info(E,"clearModifiers"),n()},this.sendKey=function(a,b){f.info(E,"sendKey"),m(a,b,0)},this.setIgnoreWinKey=function(a){O=a},this.setKeyboardType=function(a){P=a}}b.exports=d},{bowser:4}],17:[function(a,b,c){function d(b,c,e){function f(a){return!!k&&("RAW_MOUSE"===a.input_type&&"RAW_MOUSE"===k.input_type&&a.raw_mouse.button_flags===k.raw_mouse.button_flags)}function g(){r&&0!==p&&p%1e3==0&&e.verbose(m,"{0}% of {1} mouse moves sent.",Math.floor(100*q/p+.5),p)}function h(){s&&(window.clearTimeout(s),s=null)}function i(a,b){h(),s=window.setTimeout(function(){j(o+t,!0,b),s=null,r&&e.verbose(m,"deferred mouse move sent")},o+t-a)}function j(a,b,c){c.id=n++;var e=new d.proto.InputMessage(c),f=e.encode().toArrayBuffer(),g=new ArrayBuffer(4+f.byteLength);new DataView(g).setUint32(0,4294967295&f.byteLength,!0),new Uint8Array(g,4).set(new Uint8Array(f)),b?(y.send(g),q++):x.send(g),"RAW_MOUSE"===c.input_type&&(o=a,h()),k=c}var k,l=a("./stxhddatachannel.js"),m="StxhdLocalInputStream",n=1,o=0,p=0,q=0,r=!1,s=null,t=35;if(!d.proto){var u=a("protobuf.noparse"),v=a("StxhdInputEventMessages.json"),w=u.loadJson(v);d.proto=w.build("Stxhd_input_event_messages")}if(!b)throw new Error("StxhdLocalInputStream must have a name parameter");var x,y;if(!c)throw new Error("StxhdLocalInputStream must have a mWebRtcPeerConnection parameter");var z={order:!0},A=c.createDataChannel(d.RELIABLE_LABLE_PREFIX+b,z);x=new l(e,!0,A);var B={order:!1,maxRetransmits:0},C=c.createDataChannel(d.UNRELIABLE_LABLE_PREFIX+b,B);y=new l(e,!0,C),this.send=function(a){var b=window.performance.now();f(a)?(p++,b-o<t?i(b,a):j(b,!0,a),g()):j(b,!1,a)},this.setMinMsBetweenMouseMoves=function(a){t=a}}d.RELIABLE_LABLE_PREFIX="StxhdInputReliable:",d.UNRELIABLE_LABLE_PREFIX="StxhdInputUnreliable:",b.exports=d},{"./stxhddatachannel.js":14,"StxhdInputEventMessages.json":8,"protobuf.noparse":28}],18:[function(a,b,c){var d=function(){function a(){function a(a){var b="";if("string"==typeof a[0]&&a[0].indexOf("{0}")>-1){var c=Array.prototype.slice.call(a,1);return a[0].replace(/{(\d+)}/g,function(a,b){return void 0!==c[b]?c[b]:a})}for(var d=0;d<a.length;++d)"string"==typeof a[d]?b+=a[d]+" ":b+=JSON.stringify(a[d])+" ";return b}var b=3;return{SENSITIVE:1,VERBOSE:2,INFO:3,WARN:4,ERROR:5,FATAL:6,setLevel:function(a){b=a},onLog:function(a,b,c){console.warn("StxhdLog.onLog was undefined, a log was dropped:level: "+a+" tag: "+b+" message: "+c)},log:function(){var c=arguments[0];if(!(c<b)){var d,e=arguments[1];if(arguments.length>3){d=a(Array.prototype.slice.call(arguments,2))}else d=a(arguments[2]);this.onLog(c,e,d)}},sensitive:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);this.log(this.SENSITIVE,a,b)},verbose:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);this.log(this.VERBOSE,a,b)},info:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);this.log(this.INFO,a,b)},warn:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);this.log(this.WARN,a,b)},error:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);this.log(this.ERROR,a,b)},fatal:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);this.log(this.FATAL,a,b)}}}var b;return{getLogger:function(){return b||(b=a()),b}}}();b.exports=d},{}],19:[function(a,b,c){function d(b,c){function d(){V.hasOwnProperty("onSignalingConnecting")?V.onSignalingConnecting():c.info(W,"StxhdPeerConnection.onSignalingConnecting() callback function was not defined.")}function e(){V.hasOwnProperty("onSignalingConnected")?V.onSignalingConnected():c.info(W,"StxhdPeerConnection.onSignalingConnected() callback function was not defined.")}function f(){V.hasOwnProperty("onConnecting")?V.onConnecting():c.warn(W,"StxhdPeerConnection.onConnecting() callback function was not defined.")}function g(){V.hasOwnProperty("onConnected")?V.onConnected():c.warn(W,"StxhdPeerConnection.onConnected() callback function was not defined.")}function h(){V.hasOwnProperty("onDisconnecting")?V.onDisconnecting(ba):c.warn(W,"StxhdPeerConnection.onDisconnecting() callback function was not defined.")}function i(){V.hasOwnProperty("onDisconnected")?V.onDisconnected(ba):c.warn(W,"StxhdPeerConnection.onDisconnected() callback function was not defined.")}function j(){V.hasOwnProperty("onFailed")?V.onFailed(ba):c.warn(W,"StxhdPeerConnection.onFailed() callback function was not defined.")}function k(a){V.hasOwnProperty("onUtf8Message")?V.onUtf8Message(a):c.warn(W,"StxhdPeerConnection.onUtf8Message(dataJson) callback function was not defined.")}function l(a){V.hasOwnProperty("onBinaryMessage")?V.onBinaryMessage(a):c.warn(W,"StxhdPeerConnection.onBinaryMessage(dataJson) callback function was not defined.")}function m(a){V.hasOwnProperty("onAddRemoteMediaStream")?V.onAddRemoteMediaStream(a):c.warn(W,"StxhdPeerConnection.onAddRemoteMediaStream(stxhdRemoteMediaStream) callback function was not defined.")}function n(a){V.hasOwnProperty("onRemoveRemoteMediaStream")?V.onRemoveRemoteMediaStream(a):c.warn(W,"StxhdPeerConnection.onRemoveRemoteMediaStream(stxhdRemoteMediaStream) callback function was not defined.")}function o(a){V.hasOwnProperty("onAddDataChannel")?V.onAddDataChannel(a):c.warn(W,"StxhdPeerConnection.onAddDataChannel(stxhdDataChannel) callback function was not defined.")}function p(a){V.hasOwnProperty("onRemoveDataChannel")?V.onRemoveDataChannel(a):c.warn(W,"StxhdPeerConnection.onRemoveDataChannel(stxhdDataChannel) callback function was not defined.")}
function q(a){V.hasOwnProperty("onAddRemoteInputStream")?V.onAddRemoteInputStream(a):c.warn(W,"StxhdPeerConnection.onAddRemoteInputStream(stxhdRemoteInputStream) callback function was not defined.")}function r(a){V.hasOwnProperty("onRemoveRemoteInputStream")?V.onRemoveRemoteInputStream(a):c.warn(W,"StxhdPeerConnection.onRemoveRemoteInputStream(stxhdRemoteInputStream) callback function was not defined.")}function s(){d();try{b.connect()}catch(a){X.eventFailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"peerSignaler.connect() failed: "+a.message)}}function t(){c.verbose("createControlChannel()"),aa=new U(c,{webRtcPeerConnection:$}),aa.onControlChannelOpen=J,aa.onControlChannelClosed=K,aa.onHeartbeatRequest=L,aa.onHeartbeatReply=M,aa.onResolutionChangeMessage=N}function u(){c.info(W,"createOffer() mMediaConstraints='{0}'",JSON.stringify(Z)),$.createOffer(function(a){c.info(W,"createOffer(): Calling setLocalDescription()"),$.setLocalDescription(a,function(){c.info(W,"createOffer(): calling sendOfferSdp()"),a.sdp=z(a.sdp),b.sendOfferSdp(a.sdp,fa),X.eventSentOffer()},function(a){X.eventFailed(R.STXHD_DISCONNECT_REASON_NOT_SET,"createOffer(): setLocalDescription() failed: {0}",a)})},function(a){X.eventFailed(R.STXHD_DISCONNECT_REASON_NOT_SET,"createOffer(): createOffer() failed: {0}",a)},Z)}function v(a){var b=a.mediaStreamIdNamePairs,d=a.offerSdp;c.info(W,"processOffer(mediaStreamIdNamePairs={0}, offerSdp={1})",JSON.stringify(b),JSON.stringify(d)),A(b);var e={type:"offer",sdp:d},f=new P.RTCSessionDescription(e);if(!f)return void X.eventfailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"processOffer(): unable to parse '{0}' as SDP",JSON.stringify(d));c.verbose(W,"processOffer: calling setRemoteDescription()"),$.setRemoteDescription(f)}function w(){c.info(W,"createAnswer()"),$.createAnswer(function(a){c.verbose(W,"createAnswer(): calling setLocalDescription()"),$.setLocalDescription(a,function(){c.info(W,"createAnswer(): calling sendAnswerSdp()"),b.sendAnswerSdp(a.sdp,fa),X.eventSentAnswer()},function(a){X.eventFailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"createAnswer(): setLocalDescription() failed: {0}",a)})},function(a){X.eventFailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"createAnswer(): createAnswer() failed: {0}",a)})}function x(a){var b=a.mediaStreamIdNamePairs,d=a.answerSdp;c.info(W,"processAnswer(mediaStreamIdNamePairs={0}. answerSdp={1}",JSON.stringify(b),JSON.stringify(d)),A(b);var e={type:"answer",sdp:d},f=new P.RTCSessionDescription(e);if(!f)return void X.eventFailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"processAnswer(): unable to parse '{0}' as SDP",JSON.stringify(d));c.verbose(W,"processAnswer(): calling setRemoteDescription()"),$.setRemoteDescription(f)}function y(a,b,c){var d=a.match(b);return d&&d.length>=c&&parseInt(d[c])}function z(a){var b=a;c.info(W,"processWebrtcDataChannel(sdp={0})",JSON.stringify(b));var d=/Firefox\/([0-9]+)\./,e=/Chrome\/([0-9]+)\./,f=navigator.userAgent.match(d),g=navigator.userAgent.match(e);if(f||g){var h=y(navigator.userAgent,d,1),i=y(navigator.userAgent,e,1);if(h>62||i>75){var j=b.split("\r\n"),k=[],l="5000";j.forEach(function(a){if(-1!==a.indexOf("a=sctp-port")){var b=a.split(":");l=b[1],c.info(W,"processWebrtcDataChannel: got sctp-port: {0}",l)}}),j.forEach(function(a){if(-1!==a.indexOf("m=application")){var b=a.split(" "),c=b.slice(0,3);c[2]="DTLS/SCTP",c.push(l),k.push(c.join(" "))}else if(-1!==a.indexOf("a=sctp-port")){var d="a=sctpmap:"+l+" webrtc-datachannel 256";k.push(d)}else k.push(a)}),b=k.join("\r\n"),f?c.info(W,"processWebRtcDataChannel, overriden sdp for firefox v{0}: {1}",h,b):g&&c.info(W,"processWebRtcDataChannel, overriden sdp for chrome v{0}: {1}",i,b)}}return b}function A(a){var b;for(b in a)a.hasOwnProperty(b)&&(ga.hasOwnProperty(b)?ga[b][name]!==a[b]&&c.warn(W,"processMediaStreamIdNamePairs(): same stream got a diff name. Was '{0}' and now '{1}'",ga[b][name],a[b]):ga[b]={},ga[b][name]=a[b]);for(b in ga)ga.hasOwnProperty(b)&&(a.hasOwnProperty(b)||c.warn(W,"processMediaStreamIdNamePairs(): mediaStream not existing anymore."))}function B(a){var b=new P.RTCIceCandidate(a);if(c.verbose(W,"created iceCandidate: {0}",JSON.stringify(b)),!b)return void X.eventFailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"processIceCandidate() rtcAdapter.RTCIceCandidate() failed");var d=function(){c.verbose(W,"processIceCandidate(): ICE candidate added.")},e=function(){X.eventFailed(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"processIceCandidate() addIceCandidate() failed")};$.addIceCandidate(b,d,e)}function C(a,b,d){if("eventSignalingDisconnecting"===a||"eventSignalingDisconnected"===a||"eventSignalingFailed"===a||"eventStop"===a||"eventFailed"===a)D(b,d);else{var e="Unhandled event in setDisconnectReasonFromEvent: "+a;c.error(W,e),D(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,e)}}function D(a,b){R.STXHD_DISCONNECT_REASON_NOT_SET===ba?(c.info(W,"setDisconnectReason(reason={0}, description='{1}')",R.toString(a),b),ba=a,ca=b):c.info(W,"setDisconnectReason(reason={0}, description='{1}').  Already set, ignored.",R.toString(a),b)}function E(){c.info(W,"terminateWebRtc()"),b&&(b.disconnect(),b=null),aa=null,fa={},ga={},ia={},$&&($.close(),$=null)}function F(a,b){D(a,b),ha=window.setTimeout(H(),ka)}function G(){ha&&(window.clearTimeout(ha),ha=null)}function H(){G(),X.eventStop(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"ERROR: Disconnect reason should have already been set by initDisconnectTimeout().")}function I(a){if(a)return a.replace(Y,"$1.$2.$3.0")}function J(){c.info(W,"onControlChannelOpen()"),X.eventWebRtcConnected()}function K(a,b){c.info(W,"onControlChannelClosed(reason={0}, description='{1}')",R.toString(a),b),X.eventStop(a,b)}function L(){c.info(W,"onHeartbeatRequest() - NOT IMPLEMENTED")}function M(){c.info(W,"onHeartbeatRequest() - NOT IMPLEMENTED")}function N(a,b,d){c.info(W,"onResolutionChangeMessage(mediastream_name="+a+", width="+b+", height="+d+")");for(var e in ga)if(ga.hasOwnProperty(e)&&a===ga[e][name])return void ga[e].stream.notifyResolutionChange(b,d);c.warn(W,"onResolutionChangeMessage() no matching media stream name in:");for(var f in ga)ga.hasOwnProperty(f)&&c.warn(W,"    "+ga[f][name])}var O=a("state-machine"),P=a("./adapter.js"),Q=a("./stxhddatachannel.js"),R=a("./stxhddisconnectreason.js"),S=a("./stxhdremotemediastream.js"),T=a("./stxhdlocalinputstream.js"),U=a("./stxhdcontrolchannel.js");if(!b.getIceConfig())throw new Error("Given PeerSignaler is missing 'IceConfiguration'.");var V=this,W="StxhdPeerConnection",X=null,Y=new RegExp("\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b"),Z={offerToReceiveAudio:!0,offerToReceiveVideo:!0},$=new P.RTCPeerConnection({iceServers:b.getIceConfig(),iceTransportPolicy:"relay"});this.originalWebRTCPeerConnection=$;var _=null,aa=null,ba=R.STXHD_DISCONNECT_REASON_NOT_SET,ca=null,da=null,ea=[],fa={},ga={},ha=null,ia={},ja={},ka=1e3;p(null),q(null),r(null);try{var la={stateNew:{eventSignalingConnecting:"stateSignalingConnecting",eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventConnectWebRtcAsOfferer:"stateSignalingConnectingAsOfferer",eventConnectWebRtcAsAnswerer:"stateSignalingConnectingAsAnswerer",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateSignalingConnecting:{eventSignalingConnecting:"stateSignalingConnecting",eventSignalingConnected:"stateSignalingConnected",eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventConnectWebRtcAsOfferer:"stateSignalingConnectingAsOfferer",eventConnectWebRtcAsAnswerer:"stateSignalingConnectingAsAnswerer",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateSignalingConnectingAsOfferer:{eventSignalingConnecting:"stateSignalingConnectingAsOfferer",eventSignalingConnected:"stateSendingOffer",eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateSignalingConnectingAsAnswerer:{eventSignalingConnecting:"stateSignalingConnectingAsAnswerer",eventSignalingConnected:"stateAwaitingOffer",eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateSignalingConnected:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventConnectWebRtcAsOfferer:"stateSendingOffer",eventConnectWebRtcAsAnswerer:"stateAwaitingOffer",eventReceivedOffer:"stateReceivedOfferEarly",eventReceivedAnswer:"stateWebRtcDisconnecting",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateReceivedOfferEarly:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventConnectWebRtcAsOfferer:"stateWebRtcDisconnecting",eventConnectWebRtcAsAnswerer:"stateSendingAnswer",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcDisconnecting",eventReceivedIceCandidate:"stateReceivedOfferEarly",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateSendingOffer:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventSentOffer:"stateAwaitingAnswer",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcDisconnecting",eventReceivedIceCandidate:"stateWebRtcDisconnecting",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateAwaitingOffer:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventReceivedOffer:"stateSendingAnswer",eventReceivedAnswer:"stateWebRtcDisconnecting",eventReceivedIceCandidate:"stateWebRtcDisconnecting",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateSendingAnswer:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventSentAnswer:"stateWebRtcConnecting",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcDisconnecting",eventReceivedIceCandidate:"stateSendingAnswer",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateAwaitingAnswer:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcConnecting",eventReceivedIceCandidate:"stateAwaitingAnswer",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateWebRtcConnecting:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateFailed",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcDisconnecting",eventReceivedIceCandidate:"stateWebRtcConnecting",eventWebRtcConnected:"stateWebRtcConnected",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateWebRtcConnected:{eventSignalingDisconnecting:"stateWebRtcConnected",eventSignalingDisconnected:"stateWebRtcConnected",eventSignalingFailed:"stateFailed",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcDisconnecting",eventWebRtcConnected:"stateWebRtcConnected",eventReceivedIceCandidate:"stateWebRtcConnected",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateWebRtcDisconnecting:{eventSignalingDisconnecting:"stateWebRtcDisconnecting",eventSignalingDisconnected:"stateWebRtcDisconnecting",eventSignalingFailed:"stateWebRtcDisconnecting",eventReceivedOffer:"stateWebRtcDisconnecting",eventReceivedAnswer:"stateWebRtcDisconnecting",eventReceivedIceCandidate:"stateWebRtcDisconnecting",eventWebRtcDisconnected:"stateWebRtcDisconnected",eventFailed:"stateFailed",eventStop:"stateWebRtcDisconnecting"},stateWebRtcDisconnected:{eventSignalingDisconnecting:"stateWebRtcDisconnected",eventSignalingDisconnected:"stateWebRtcDisconnected",eventSignalingFailed:"stateWebRtcDisconnected",eventFailed:"stateFailed",eventStop:"stateStopped"},stateFailed:{eventSignalingDisconnecting:"stateFailed",eventSignalingDisconnected:"stateFailed",eventSignalingFailed:"stateFailed",eventFailed:"stateFailed",eventStop:"stateStopped"},stateStopped:{eventFailed:"stateStopped",eventStop:"stateStopped"}},ma=[];for(var na in la)if(la.hasOwnProperty(na)){var oa=la[na];for(var pa in oa)oa.hasOwnProperty(pa)&&ma.push({name:pa,from:na,to:oa[pa]})}X=O.create({initial:"stateNew",events:ma,error:function(a,b,d,e,f,g,h){c.error(W,"statemachine error: From {0} to {1}, error '{2}'",b,d,g),void 0!==h&&c.error(W,"{0}\n{1}",h.message,h.stack)}})}catch(a){throw c.error(W,"StateMachine.create() failed: {0}\n{1}",a.message,a.stack),a}X.onleavestateNew=function(a,b,d){c.info(W,"mStateMachine.onleavestateNew(from={0}, event={1}, to={2})",b,a,d),"eventConnectWebRtcAsOfferer"!==a&&"eventConnectWebRtcAsAnswerer"!==a||s()},X.onleavestateSignalingConnectingAsOfferer=function(a,b,d){c.info(W,"mStateMachine.onleavestateSignalingConnectingAsOfferer(from={0}, event={1}, to={2})",b,a,d),"eventSignalingConnected"===a&&e()},X.onleavestateSignalingConnectingAsAnswerer=function(a,b,d){c.info(W,"mStateMachine.onleavestateSignalingConnectingAsAnswerer(from={0}, event={1}, to={2})",b,a,d),"eventSignalingConnected"===a&&e()},X.onenterstateSignalingConnected=function(a,b,d){c.info(W,"mStateMachine.onenterstateSignalingConnected(from={0}, event={1}, to={2})",b,a,d),e()},X.onleavestateSignalingConnected=function(a,b,d,e){c.info(W,"mStateMachine.onleavestateSignalingConnected(from={0}, event={1}, to={2})",b,a,d),"eventReceivedOffer"===a&&(da=e)},X.onleavestateReceivedOfferEarly=function(a,b,d,e){if(c.info(W,"mStateMachine.onleavestateReceivedOfferEarly(from={0}, event={1}, to={2})",b,a,d),"eventConnectWebRtcAsOfferer"===a)D(R.STXHD_DISCONNECT_REASON_INITIATOR_MISMATCH,"ERROR: Both endpoints connected as initiator");else if("eventConnectWebRtcAsAnswerer"===a){f(),v(da),da=null;for(e in ea)ea.hasOwnProperty(e)&&B(e);ea=null}},X.onenterstateSendingOffer=function(a,b,d){c.info(W,"mStateMachine.onenterstateSendingOffer(from={0}, event={1}, to={2})",b,a,d),"eventSignalingConnected"===a&&e(),f(),t(),u()},X.onenterstateAwaitingOffer=function(a,b,d){c.info(W,"mStateMachine.onenterstateAwaitingOffer(from={0}, event={1}, to={2})",b,a,d),f()},X.onleavestateAwaitingOffer=function(a,b,d,e){c.info(W,"mStateMachine.onleavestateAwaitingOffer(from={0}, event={1}, to={2})",b,a,d),"eventReceivedOffer"===a&&v(e)},X.onenterstateSendingAnswer=function(a,b,d){c.info(W,"mStateMachine.onenterstateSendingAnswer(from={0}, event={1}, to={2})",b,a,d),w()},X.onleavestateAwaitingAnswer=function(a,b,d,e){c.info(W,"mStateMachine.onleavestateAwaitingAnswer(from={0}, event={1}, to={2})",b,a,d),"eventReceivedAnswer"===a&&x(e)},X.onenterstateWebRtcConnected=function(a,b,d){c.info(W,"mStateMachine.onenterstateWebRtcConnected(from={0}, event={1}, to={2})",b,a,d),g()},X.onenterstateWebRtcDisconnecting=function(a,b,d,e,f){c.info(W,"mStateMachine.onenterstateWebRtcDisconnecting(from={0}, event={1}, to={2}, reason={3}, description='{4}')",b,a,d,R.toString(e),f),void 0===e&&(e=R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR),void 0===f&&(f="Disconnect 'description' was undefined"),G(),C(a,e,f),h(),E(),X.eventWebRtcDisconnected()},X.onenterstateWebRtcDisconnected=function(a,b,d){c.info(W,"mStateMachine.onenterstateWebRtcDisonnected(from={0}, event={1}, to={2})",b,a,d),G(),i(),X.eventStop(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"mStateMachine.onenterstateWebRtcDisonnected().  'reason' and 'description' should already have been set.")},X.onenterstateFailed=function(a,b,d,e,f){c.error(W,"mStateMachine.onenterstateFailed(from={0}, event={1}, to={2}, reason={3}, description='{4}')",b,a,d,R.toString(e),f),G(),void 0===e&&(e=R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR),void 0===f&&(f="Disconnect 'description' was undefined"),C(a,e,f),j(),E(),X.eventStop(R.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"mStateMachine.onenterstateFailed().")},X.onenterstateStopped=function(a,b,d,e,f){c.info(W,"mStateMachine.onenterstateStopped(from={0}, event={1}, to={2}, reason={3}, description='{4}')",b,a,d,R.toString(e),f)},X.onbeforeeventReceivedIceCandidate=function(a,b,d,e){c.info(W,"mStateMachine.onbeforeeventReceivedIceCandidate(from={0}, event={1}, to={2}, iceCandidate='{3}')",b,a,d,JSON.stringify(e)),"stateReceivedOfferEarly"===b?ea.push(e):"stateSendingAnswer"===b||"stateAwaitingAnswer"===b||"stateWebRtcConnecting"===b||"stateWebRtcConnected"===b?B(e):"stateWebRtcDisconnecting"===b?c.info(W,"Disconnecting.  iceCandidate ignored"):c.error(W,"iceCandidate unexpected when in '{0}'.",b)},b.onInternalConnecting=function(){c.info(W,"peerSignaler.onInternalConnecting"),X.eventSignalingConnecting()},b.onInternalConnected=function(){c.info(W,"peerSignaler.onInternalConnected"),X.eventSignalingConnected()},b.onInternalDisconnecting=function(a,b){c.info(W,"peerSignaler.onInternalDisconnecting(reason={0}, description='{1}')",R.toString(a),b),X.eventSignalingDisconnecting(a,b)},b.onInternalDisconnected=function(a,b){c.info(W,"peerSignaler.onInternalDisconnected(reason={0}, description='{1}')",R.toString(a),b),X.eventSignalingDisconnected(a,b)},b.onInternalFailed=function(a,b){c.info(W,"peerSignaler.onInternalFailed(reason={0}, description='{1}')",R.toString(a),b),X.eventSignalingFailed(a,b)},b.onInternalUtf8Message=function(a){c.info(W,'peerSignaler.onInternalUtf8Message("'+a+'")'),k(a)},b.onInternalBinaryMessage=function(a){c.info(W,"peerSignaler.onInternalBinaryMessage"),l(a)},b.onInternalOfferSdp=function(a){c.info(W,"peerSignaler.onInternalOfferSdp("+JSON.stringify(a)+")"),X.eventReceivedOffer(a)},b.onInternalAnswerSdp=function(a){c.verbose(W,"peerSignaler.onInternalAnswerSdp("+JSON.stringify(a)+")"),X.eventReceivedAnswer(a)},b.onInternalIceCandidate=function(a){c.verbose(W,"peerSignaler.onInternalIceCandidate("+JSON.stringify(a)+")"),X.eventReceivedIceCandidate(a)},$.onicecandidate=function(a){a.candidate&&a.candidate.candidate&&b.sendIceCandidate(a.candidate)},$.onaddstream=function(a){c.info(W,"mWebRtcPeerConnection.onaddstream()");var b=a.stream;if(b){var d=b.id;if(c.info(W,"mWebRtcPeerConnection.onaddstream(evt.mediaStream.id="+d+")"),ga.hasOwnProperty(d)){var e=new S(c,b,ga[d][name]);ga[d].stream=e,m(e)}else c.error(W,"mWebRtcPeerConnection.onaddstream(): mediastream's name not received from it's peer")}else c.error(W,"WebRtcPeerConnection.onaddstream(): called with undefined mediastream")},$.onremovestream=function(a){var b=a.stream.id,d=ga[b];d&&d.stream?(c.info(W,"mWebRtcPeerConnection.onremovestream(): Remote stream with id "+b+" and name "+ga[b].name+" is removed"),n(d.stream),delete ga[b]):c.warn(W,"WebRtcPeerConnection.onremovestream(): try to remove non-existing mediastream with id "+b)},$.ondatachannel=function(a){var b,d=a.channel,e=d.label;c.info(W,"mWebRtcPeerConnection.ondatachannel()[RemoteDataChannel] label: "+d.label),0===e.indexOf(Q.LABEL_PREFIX)&&e.length>Q.LABEL_PREFIX.length?(b=new Q(c,!1,d),ja[e]=b,b.onOpen=function(){o(b)}):0===e.indexOf("StxhdInputReliable")||0===e.indexOf("StxhdInputUnreliable")?c.warn(W,"StxhdRemoteInputStream not yet impemented"):0===e.indexOf("StxhdControlChannel")?(b=new Q(c,!1,d),aa=new U(c,{dataChannel:b}),aa.onResolutionChangeMessage=N):c.error(W,"mWebRtcPeerConnection.onDataChannel()[RemoteDataChannel] called with unexpected label: "+e)},$.oniceconnectionstatechange=function(a){var b=a.target.iceconnectionstate||a.target.iceConnectionState;c.info(W,"WebRtcPeerConnection.onIceConnectionStateChange: "+b),c.warn(W,"Network connection state: "+(navigator.onLine?"connected":"disconnected")),"closed"===b?X.eventStop(R.STXHD_DISCONNECT_REASON_CONNECTION_LOST,"onIceConnectionStateChange: 'closed'"):"failed"===b?X.eventFailed(R.STXHD_DISCONNECT_REASON_ICE_FAILED,"onIceConnectionStateChange: 'failed'"):"disconnected"===b?c.warn(W,"IceConnectionState changed to disconnected."):c.warn(W,"Unknown IceConnectionState: "+b)},this.connect=function(a){_=a,_?X.eventConnectWebRtcAsOfferer():X.eventConnectWebRtcAsAnswerer()},this.disconnect=function(){var a="StxhdPeerConnection.disconnect()";aa&&aa.close(R.STXHD_DISCONNECT_REASON_API_REQUEST,a),F(R.STXHD_DISCONNECT_REASON_API_REQUEST,a)},this.queueUtf8Message=function(a){b.queuePeerConnectionUtf8Message(a)},this.queueBinaryMessage=function(a){b.queuePeerConnectionBinaryMessage(a)},this.sendUtf8Message=function(a){b.sendPeerConnectionUtf8Message(a)},this.sendBinaryMessage=function(a){b.sendPeerConnectionBinaryMessage(a)},this.flushMessages=function(){b.flushMessages()},this.addLocalMediaStream=function(a,b){if(!a||!b)throw c.error(W,"StxhdPeerConnection.addLocalMediaStream(): Trying to add a undefined name/mediastream to peerconnection"),new Error("addLocalMediaStream() was called with undefined name/mediaStream");var d=b.id;if(fa.hasOwnProperty(d))return void c.warn(W,"StxhdPeerConnection.addLocalMediaStream(): mediaStream has already been added.");$.addStream(b),fa[d]=a},this.removeLocalMediaStream=function(a){if(!a)throw c.error(W,"StxhdPeerConnection.removeLocalMediaStream(): Trying to remove a undefined mediastream from peerconnection"),new Error("removeLocalMediaStream() was called with undefined mediaStream");delete fa[a.id],$.removeStream(a)},this.createDataChannel=function(a,b){if(c.info(W,"StxhdPeerConnection.createDataChannel(name='{0}', dataChannelConfig={1})",a,JSON.stringify(b)),ia.hasOwnProperty(a))throw c.error(W,"StxhdPeerConnection.createDataChannelA DataChannel with the name {0} was already created.",a),new Error("A DataChannel with same name was already created.");var d=$.createDataChannel(Q.LABEL_PREFIX+a,b);return ia[a]=new Q(c,!0,d),ia[a]},this.removeDataChannel=function(a){for(var b in ia)if(ia.hasOwnProperty(b)&&ia[b]===a)return void delete ia[b];throw c.warn(W,"StxhdPeerConnection.removeDataChannel():  tried to remove a non-existing stxhdDataChannel: {0}",a),new Error("Try to remove a non-existing stxhdDataChannel")},this.createLocalInputStream=function(a){return new T(a,$,c)},this.removeLocalInputStream=function(a){c.error(W,"StxhdPeerConnection.removeLocalInputStream(stxhdLocalInputStream) have not been implmented yet. stxhdLocalInputStream: "+a)},this.requestMetrics=function(a,b,c){var d=function(c){var d={reports:[]};for(var e in c)if(c.hasOwnProperty(e)){var f=c[e],g={id:f.id,type:f.type,timestamp:new Date(f.timestamp).getTime(),values:[]};for(var h in f)f.hasOwnProperty(h)&&g.values.push({name:String(h),value:I(String(f[h]))});d.reports.push(g)}if(d.reports.length>0&&!a){var i="Undefined",j={id:"",type:"extra.metricreporttype.stxhd",timestamp:d.reports[0].timestamp,values:[{name:"mos",value:i}]};d.reports.push(j)}b(d)};$.getStats(a,d,c)}}b.exports=d},{"./adapter.js":10,"./stxhdcontrolchannel.js":13,"./stxhddatachannel.js":14,"./stxhddisconnectreason.js":15,"./stxhdlocalinputstream.js":17,"./stxhdremotemediastream.js":21,"state-machine":5}],20:[function(a,b,c){function d(b,c){function d(){R.hasOwnProperty("onConnecting")?R.onConnecting():c.info(S,"StxhdPeerSignaler.onConnecting() callback function was not defined.")}function e(){R.hasOwnProperty("onConnected")?R.onConnected():c.info(S,"StxhdPeerSignaler.onConnected() callback function was not defined.")}function f(){R.hasOwnProperty("onDisconnecting")?R.onDisconnecting($):c.info(S,"StxhdPeerSignaler.onDisconnecting(reason, description) callback function was not defined.")}function g(){R.hasOwnProperty("onDisconnected")?R.onDisconnected($):c.info(S,"StxhdPeerSignaler.onDisconnected(reason, description) callback function was not defined.")}function h(){R.hasOwnProperty("onFailed")?R.onFailed($):c.info(S,"StxhdPeerSignaler.onFailed() callback function was not defined.")}function i(a){R.hasOwnProperty("onUtf8Message")?R.onUtf8Message(a):c.info(S,"StxhdPeerSignaler.onUtf8Message(dataJson) callback function was not defined.")}function j(a){R.hasOwnProperty("onBinaryMessage")?R.onBinaryMessage(a):c.info(S,"StxhdPeerSignaler.onBinaryMessage(dataJson) callback function was not defined.")}function k(){R.hasOwnProperty("onInternalConnecting")?R.onInternalConnecting():c.warn(S,"StxhdPeerSignaler.onInternalConnecting() callback function was not defined.")}function l(){R.hasOwnProperty("onInternalConnected")?R.onInternalConnected():c.warn(S,"StxhdPeerSignaler.onInternalConnected() callback function was not defined.")}function m(){R.hasOwnProperty("onInternalDisconnecting")?R.onInternalDisconnecting($,_):c.warn(S,"StxhdPeerSignaler.onInternalDisconnecting(reason, description) callback function was not defined.")}function n(){R.hasOwnProperty("onInternalDisconnected")?R.onInternalDisconnected($,_):c.warn(S,"StxhdPeerSignaler.onInternalDisconnected(reason, description) callback function was not defined.")}function o(){R.hasOwnProperty("onInternalFailed")?R.onInternalFailed($,_):c.warn(S,"StxhdPeerSignaler.onInternalFailed(reason, description) callback function was not defined.")}function p(a){R.hasOwnProperty("onInternalUtf8Message")?R.onInternalUtf8Message(a):c.warn(S,"StxhdPeerSignaler.onInternalUtf8Message(dataJson) callback function was not defined.")}function q(a){R.hasOwnProperty("onInternalBinaryMessage")?R.onInternalBinaryMessage(a):c.warn(S,"StxhdPeerSignaler.onInternalBinaryMessage(dataJson) callback function was not defined.")}function r(a){R.hasOwnProperty("onInternalOfferSdp")?R.onInternalOfferSdp(a):c.warn(S,"StxhdPeerSignaler.onInternalOfferSdp(offer) callback function was not defined.")}function s(a){R.hasOwnProperty("onInternalAnswerSdp")?R.onInternalAnswerSdp(a):c.warn(S,"StxhdPeerSignaler.onInternalAnswerSdp(answer) callback function was not defined.")}function t(a){R.hasOwnProperty("onInternalIceCandidate")?R.onInternalIceCandidate(a):c.warn(S,"StxhdPeerSignaler.onInternalIceCandidate(candidate) callback function was not defined.")}function u(a,b){if(!a||!a[0])return void c.error(S,"setPeer() called with null or empty peerName; Ignored.");switch(b){case O.PEER_SIGNED_IN:case O.PEER_SIGNED_OUT:case O.PEER_DISCONNECTED:break;default:return void c.error(S,"setPeer() called with unknow peerStatus: "+b)}Z=b,b===O.PEER_SIGNED_IN?X?X!==a&&(c.error(S,"The signaler already has a peer signed inbut attempting to assign a new peer. Current peer: "+X+". New peer: "+a),X=a):(X=a,l(),e()):(X!==a&&c.error(S,"Clearing peer, but a different peer is given. mPeerName: "+X+" peerName: "+a+"."),X&&(X=null,M(),v(P.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"SignalingPeer signed out"),n(),g()))}function v(a,b){$===P.STXHD_DISCONNECT_REASON_NOT_SET?(c.info(S,"setDisconnectReason(reason={0}, description='{1}')",P.toString(a),b),$=a,_=b):c.info(S,"setDisconnectReason(reason={0}, description='{1}').  Already set, ignored.",P.toString(a),b)}function w(a,b){var d;switch(a){case O.RET_VAL_MISSING_CONFIG_PARAMETERS:d="Missing Config Parameters";break;case O.RET_VAL_MISSING_STATUS_LISTENER:d="Missing Status Listener";break;case O.RET_VAL_MISSING_DATA_MESSAGE_LISTENER:d="Missing Data Message Listener";break;case O.RET_VAL_MISSING_PEER_LISTENER:d="Missing Peer Listener";break;case O.RET_VAL_NOT_SIGNEDD_IN:d="Not signed in";break;case O.RET_VAL_MESSAGING_LIB_ERROR:d="Messaging Lib Error";break;default:d="Unknown Error"}c.error(S,"A2sSignalingLib Error while: "+b+" Error: "+d+" Error Code:"+a)}function x(a){switch(a){case O.STATE_INIT:return"Init";case O.STATE_SIGNING_IN:return"Signing in";case O.STATE_SIGNED_IN:return"Signed in";case O.STATE_SIGNED_OUT:return"Signed out";case O.STATE_DISCONNECTED:return"Disconnected";default:return"Undefined"}}function y(a,b){switch(c.info(S,"onStatusChanged(statusCode {0} -> {1}, description='{2}')",x(Y),x(a),b),Y=a,a){case O.STATUS_SIGN_IN_SUCCESSFUL:c.info(S,"Signed in successfully");break;case O.STATUS_SIGN_IN_FAILED_CONNECTION:v(P.STXHD_DISCONNECT_REASON_CONNECTION_LOST,"Failed connection when signing in. "+b),o(),h();break;case O.STATUS_SIGN_IN_FAILED_AUTHENTICATION:v(P.STXHD_DISCONNECT_REASON_CREDENTIALS_UNVERIFIED,"Failed Authentication when signing in. "+b),o(),h();break;case O.STATUS_DISCONNECTED_CONNECTION_CLOSED:v(P.STXHD_DISCONNECT_REASON_PEER_REQUEST,"Disconnected: Connection closed. "+b),o(),h();break;case O.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT:v(P.STXHD_DISCONNECT_REASON_CONNECTION_LOST,"Disconnected: Heartbeat timeout. "+b),o(),h();break;case O.STATUS_DISCONNECTED_SERVER_NOTIFICATION:v(P.STXHD_DISCONNECT_REASON_CONNECTION_LOST,"Disconnected: Server notification. "+b),o(),h();break;default:v(P.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"Unknown mSignalingLib statusCode. "+b),o(),h()}}function z(a,b,d){c.verbose(S,"PeerListener called from peerName: "+a+" status:"+b+" description:"+d),u(a,b)}function A(a,b){c.verbose(S,"signalingDataMessageListener(peer='{0}', data='{1}')",a,b);var d=N.arrayBufferToString(b);c.verbose(S,"message: "+d),u(a,O.PEER_SIGNED_IN);var e=null;try{e=JSON.parse(d)}catch(a){return void c.error(S,"JSON.parse() failed: {0}\n{1}",a.message,a.stack)}C(e)}function B(a,b){c.verbose(S,"Got dataAck for user:"+a+" with messageSeqNumber:"+b)}function C(a){if("[object Array]"===Object.prototype.toString.apply(a)){var b,c=!0;for(b=0;b<a.length;b+=1)D(a[b])||(c=!1);return c}return D(a)}function D(a){if(null===a)return c.warn(S,"dispatchJsonMessage() called with null"),!1;if("object"!=typeof a)return c.warn(S,"dispatchJsonMessage() called with non-'object'"),!1;if("string"!=typeof a.type)return c.warn(S,"dispatchJsonMessage() message w/o string value named 'type'"),!1;if("string"!=typeof a.id)return c.warn(S,"dispatchJsonMessage() message w/o string value named 'id'"),!1;var b="_on_"+a.type;if(R.hasOwnProperty(b)){var d=R[b];"function"==typeof d?d(a):c.warn(S,"StxhdSignalingPeer.{0} is not a function",b)}else c.warn(S,"StxhdSignalingPeer.{0} is undefined",b);return!0}function E(a){var b="!!! INCOMPATIBLE STXHD PROTOCOL DETECTED !!! Obsolete message received.  Disconnecting.  Message='"+JSON.stringify(a)+"'";c.error(S,b),I(),F({type:"StartFailedReply",requestId:a.id,code:Q.STXHD_RESULT_INCOMPATIBLE,text:b}),v(P.STXHD_DISCONNECT_REASON_INCOMPATIBLE,"Incompatible Stxhd Protocol Version"),m(),f(),L()}function F(a){H(a),R.flushMessages(a)}function G(a){ca.unshift(a)}function H(a){ca.push(a)}function I(){ca.length=0}function J(){return"client-"+da++}function K(a){var b=null;if(null===a)throw b="sendInternal() passed 'null' message",c.error(S,b),new Error(S+":"+b);if("object"!=typeof a)throw b="sendInternal() typeof message not 'object', was: '"+typeof a+"'",c.error(S,b),new Error(S+":"+b);if(U.currentState!==O.STATE_SIGNED_IN)throw b="sendInternal() not signed in",c.error(S,b),new Error(S+": "+b);if(P.STXHD_DISCONNECT_REASON_NOT_SET!==$)throw b="sendInternal() mDisconnectReason set: "+P.toString($),c.error(S,b),new Error(S+": "+b);return a=JSON.stringify(a),c.verbose(S,"Sending message: '"+a+" to: "+X),U.sendData([X],N.stringToArrayBuffer(a))<0?(w(U.lastError,"Sending Message"),null):a.id}function L(){aa=window.setTimeout(this.disconnect,ba)}function M(){aa&&(window.clearTimeout(aa),aa=null)}var N=a("PanamaSignalingClientJs/js/A2sUtilsLib.js"),O=a("PanamaSignalingClientJs/js/A2sSignalingLib.js"),P=a("./stxhddisconnectreason.js"),Q=a("./stxhdresult.js"),R=this,S="StxhdPeerSignaler",T=b.SignalingConfiguration,U=null,V=3,W=!0,X=null,Y=-1,Z=-1,$=P.STXHD_DISCONNECT_REASON_NOT_SET,_="",aa=null,ba=2e3,ca=[],da=1;if(!b.SignalingConfiguration)throw new Error("Given Panama credential is missing 'SignalingConfiguration'.")
;b.IceConfiguration||c.warn(S,S,"Given Panama credential is missing 'IceConfiguration', will not be able to preform ICEing to create PeerConnection"),this._on_HelloRequest=function(a){W=!1;var b=null;V===a.protocolVersion?(b="Received protocol version "+a.protocolVersion+" replying with STXHD_RESULT_OK.",c.info(S,b),G({type:"HelloReply",requestId:a.id,code:Q.STXHD_RESULT_OK,text:b})):(b="!!! INCOMPATIBLE STXHD PROTOCOL DETECTED !!! Received protocol version "+a.protocolVersion+" ("+V+" required)",c.error(S,b),I(),F({type:"HelloReply",requestId:a.id,code:Q.STXHD_RESULT_INCOMPATIBLE,text:b}),v(P.STXHD_DISCONNECT_REASON_INCOMPATIBLE,b),m(),f(),L())},this._on_HelloReply=function(a){c.info(S,"Received 'HelloReply (code={0}, text='{1}')",Q.toString(a.code),a.text),a.code!==Q.STXHD_RESULT_OK&&(c.error(S,"'HelloReply' with code != STXHD_RESULT_OK.  Signing out."),Q.STXHD_RESULT_INCOMPATIBLE===a.code?v(P.STXHD_DISCONNECT_REASON_INCOMPATIBLE,a.text):v(P.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,a.text),m(),f(),this.disconnect())},this._on_GoodbyeRequest=function(a){c.info(S,"Received GoodbyeRequest(code={0}, text='{1}')",P.toString(a.code),a.text),v(P.STXHD_DISCONNECT_REASON_PEER_REQUEST,"Received GoodbyeRequest from peer"),R.disconnect()},this._on_GoodbyeReply=function(){c.info(S,"Received 'GoodbyeReply'.  Signing out"),this.disconnect()},this._on_Utf8Message=function(a){p(a.data)},this._on_BinaryMessage=function(a){q(N.base64ToArrayBuffer(a.data))},this._on_SignalingUtf8Message=function(a){i(a.data)},this._on_SignalingBinaryMessage=function(a){j(N.base64ToArrayBuffer(a.data))},this._on_OfferSdp=function(a){r(a)},this._on_AnswerSdp=function(a){s(a)},this._on_IceCandidate=function(a){t(a)},this._on_StartRequest=function(a){E(a)},this._on_ApplicationData=function(a){E(a)},this.sendOfferSdp=function(a,b){return F({type:"OfferSdp",offerSdp:a,mediaStreamIdNamePairs:b})},this.sendAnswerSdp=function(a,b){return F({type:"AnswerSdp",answerSdp:a,mediaStreamIdNamePairs:b})},this.sendIceCandidate=function(a){return F({type:"IceCandidate",candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex})},this.sendPeerConnectionUtf8Message=function(a){return F({type:"Utf8Message",data:a})},this.sendPeerConnectionBinaryMessage=function(a){return F({type:"BinaryMessage",data:N.arrayBufferToBase64(a)})},this.queuePeerConnectionUtf8Message=function(a){return H({type:"Utf8Message",data:a})},this.queuePeerConnectionBinaryMessage=function(a){return H({type:"BinaryMessage",data:N.arrayBufferToBase64(a)})},this.flushMessages=function(){if(W&&(G({type:"HelloRequest",protocolVersion:V}),W=!1),0!==ca.length){var a;for(a=0;a<ca.length;a+=1)ca[a].id=J();K(1===ca.length?ca[0]:ca),I()}},this.getIceConfig=function(){return b.IceConfiguration},this.connect=function(){c.info(S,"connect()");var a=null;if(U)switch(Y){case O.STATUS_SIGN_IN_SUCCESSFUL:return void c.info(S,"connect(): already connected");case O.STATUS_SIGN_IN_FAILED_CONNECTION:case O.STATUS_SIGN_IN_FAILED_AUTHENTICATION:case O.STATUS_DISCONNECTED_CONNECTION_CLOSED:case O.STATUS_DISCONNECTED_HEARTBEAT_TIMEOUT:case O.STATUS_DISCONNECTED_SERVER_NOTIFICATION:throw a="connect() connection terminated: "+Y,c.error(S,a),new Error(a);default:throw a="Unknown mSignalingLib statusCode: "+Y,c.error(S,a),new Error(a)}if(P.STXHD_DISCONNECT_REASON_NOT_SET!==$)throw a="connect() mDisconnectReason already set: "+P.toString($),c.error(S,a),new Error(a);k(),d(),U=new O,U.configParameters=JSON.stringify(T),U.statusListener=y,U.peerListener=z,U.dataMessageListener=A,U.dataAckListener=B,c.info(S,"Starting signIn");var b=U.signIn();b!==O.RET_VAL_OK?(c.error(S,"Sign in failed"),w(b,"Signing In"),v(P.STXHD_DISCONNECT_REASON_INTERNAL_ERROR,"Sign in failed"),o(),h()):c.info(S,"Sign in initiated")},this.disconnect=function(){if(c.info(S,"disconnect()"),M(),!U)return void c.info(S,"disconnect(): not connect()ed");if(O.STATUS_SIGN_IN_SUCCESSFUL!==Y||!X)return void c.info(S,"disconnect(): already disconnected");if(P.STXHD_DISCONNECT_REASON_NOT_SET!==$)return void c.info(S,"disconnect(): already disconnecting");v(P.STXHD_DISCONNECT_REASON_API_REQUEST,S+": disconnect() called"),m(),f();var a=U.signOut();a!==O.RET_VAL_OK?(w(a,"Signing out"),o(),h()):(c.info(S,"Signed out"),n(),g())},this.sendUtf8Message=function(a){return F({type:"SignalingUtf8Message",data:a})},this.sendBinaryMessage=function(a){return F({type:"SignalingBinaryMessage",data:N.arrayBufferToBase64(a)})}}b.exports=d},{"./stxhddisconnectreason.js":15,"./stxhdresult.js":22,"PanamaSignalingClientJs/js/A2sSignalingLib.js":2,"PanamaSignalingClientJs/js/A2sUtilsLib.js":3}],21:[function(a,b,c){function d(a,b,c){var d=this;this.notifyResolutionChange=function(b,c){d.hasOwnProperty("onResolutionChange")?d.onResolutionChange(b,c):a.warn("StxhdRemoteMediaStream","StxhdRemoteMediaStream.onResolutionChange(newWidth={0}, newHeight={1}) callback function was not defined.",b,c)},this.getWebRtcMediaStream=function(){return b},this.getName=function(){return c}}b.exports=d},{}],22:[function(a,b,c){var d={STXHD_RESULT_OK:0,STXHD_RESULT_NOT_IMPLEMENTED:1,STXHD_RESULT_OUT_OF_MEMORY:2,STXHD_RESULT_INCOMPATIBLE:3,STXHD_RESULT_INVALID_ARGUMENT:4,STXHD_RESULT_NOT_FOUND:5,STXHD_RESULT_LOCKED:6,STXHD_RESULT_INVALID_STATE:7,STXHD_RESULT_TIMEOUT:8,STXHD_RESULT_CLOSED:9,STXHD_RESULT_ALREADY_SET:10,STXHD_RESULT_TOO_SMALL:11,STXHD_RESULT_NOT_LOCKED:12,STXHD_RESULT_INTERNAL_ERROR:13,STXHD_RESULT_UNKNOWN_INPUT_TYPE:14,toString:function(a){for(var b in this)if(this[b]===a)return b;return"ERROR: Unknown StxhdResult value: "+a}};b.exports=d},{}],23:[function(a,b,c){},{}],24:[function(b,c,d){!function(e){"use strict";function f(a){function b(a){var b=0;return function(){return b<a.length?a.charCodeAt(b++):null}}function c(){var a=[],b=[];return function(){if(0===arguments.length)return b.join("")+g.apply(String,a);a.length+arguments.length>1024&&(b.push(g.apply(String,a)),a.length=0),Array.prototype.push.apply(a,arguments)}}var d=function(a,b,c){if(void 0===a&&(a=d.DEFAULT_CAPACITY),void 0===b&&(b=d.DEFAULT_ENDIAN),void 0===c&&(c=d.DEFAULT_NOASSERT),!c){if((a|=0)<0)throw RangeError("Illegal capacity");b=!!b,c=!!c}this.buffer=0===a?f:new ArrayBuffer(a),this.view=0===a?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=a,this.littleEndian=void 0!==b&&!!b,this.noAssert=!!c};d.VERSION="3.5.5",d.LITTLE_ENDIAN=!0,d.BIG_ENDIAN=!1,d.DEFAULT_CAPACITY=16,d.DEFAULT_ENDIAN=d.BIG_ENDIAN,d.DEFAULT_NOASSERT=!1,d.Long=a||null;var e=d.prototype,f=new ArrayBuffer(0),g=String.fromCharCode;d.allocate=function(a,b,c){return new d(a,b,c)},d.concat=function(a,b,c,e){"boolean"!=typeof b&&"string"==typeof b||(e=c,c=b,b=void 0);for(var f,g=0,h=0,i=a.length;h<i;++h)d.isByteBuffer(a[h])||(a[h]=d.wrap(a[h],b)),(f=a[h].limit-a[h].offset)>0&&(g+=f);if(0===g)return new d(0,c,e);var j,k=new d(g,c,e),l=new Uint8Array(k.buffer);for(h=0;h<i;)j=a[h++],(f=j.limit-j.offset)<=0||(l.set(new Uint8Array(j.buffer).subarray(j.offset,j.limit),k.offset),k.offset+=f);return k.limit=k.offset,k.offset=0,k},d.isByteBuffer=function(a){return!0===(a&&a instanceof d)},d.type=function(){return ArrayBuffer},d.wrap=function(a,b,c,f){if("string"!=typeof b&&(f=c,c=b,b=void 0),"string"==typeof a)switch(void 0===b&&(b="utf8"),b){case"base64":return d.fromBase64(a,c);case"hex":return d.fromHex(a,c);case"binary":return d.fromBinary(a,c);case"utf8":return d.fromUTF8(a,c);case"debug":return d.fromDebug(a,c);default:throw Error("Unsupported encoding: "+b)}if(null===a||"object"!=typeof a)throw TypeError("Illegal buffer");var g;if(d.isByteBuffer(a))return g=e.clone.call(a),g.markedOffset=-1,g;if(a instanceof Uint8Array)g=new d(0,c,f),a.length>0&&(g.buffer=a.buffer,g.offset=a.byteOffset,g.limit=a.byteOffset+a.length,g.view=a.length>0?new DataView(a.buffer):null);else if(a instanceof ArrayBuffer)g=new d(0,c,f),a.byteLength>0&&(g.buffer=a,g.offset=0,g.limit=a.byteLength,g.view=a.byteLength>0?new DataView(a):null);else{if("[object Array]"!==Object.prototype.toString.call(a))throw TypeError("Illegal buffer");for(g=new d(a.length,c,f),g.limit=a.length,i=0;i<a.length;++i)g.view.setUint8(i,a[i])}return g},e.writeInt8=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view.setInt8(b,a),c&&(this.offset+=1),this},e.writeByte=e.writeInt8,e.readInt8=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view.getInt8(a);return b&&(this.offset+=1),c},e.readByte=e.readInt8,e.writeUint8=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view.setUint8(b,a),c&&(this.offset+=1),this},e.readUint8=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view.getUint8(a);return b&&(this.offset+=1),c},e.writeInt16=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.view.setInt16(b,a,this.littleEndian),c&&(this.offset+=2),this},e.writeShort=e.writeInt16,e.readInt16=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}var c=this.view.getInt16(a,this.littleEndian);return b&&(this.offset+=2),c},e.readShort=e.readInt16,e.writeUint16=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.view.setUint16(b,a,this.littleEndian),c&&(this.offset+=2),this},e.readUint16=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}var c=this.view.getUint16(a,this.littleEndian);return b&&(this.offset+=2),c},e.writeInt32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.view.setInt32(b,a,this.littleEndian),c&&(this.offset+=4),this},e.writeInt=e.writeInt32,e.readInt32=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=this.view.getInt32(a,this.littleEndian);return b&&(this.offset+=4),c},e.readInt=e.readInt32,e.writeUint32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.view.setUint32(b,a,this.littleEndian),c&&(this.offset+=4),this},e.readUint32=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=this.view.getUint32(a,this.littleEndian);return b&&(this.offset+=4),c},a&&(e.writeInt64=function(b,c){var d=void 0===c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b)),c+=8;var e=this.buffer.byteLength;return c>e&&this.resize((e*=2)>c?e:c),c-=8,this.littleEndian?(this.view.setInt32(c,b.low,!0),this.view.setInt32(c+4,b.high,!0)):(this.view.setInt32(c,b.high,!1),this.view.setInt32(c+4,b.low,!1)),d&&(this.offset+=8),this},e.writeLong=e.writeInt64,e.readInt64=function(b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}var d=this.littleEndian?new a(this.view.getInt32(b,!0),this.view.getInt32(b+4,!0),!1):new a(this.view.getInt32(b+4,!1),this.view.getInt32(b,!1),!1);return c&&(this.offset+=8),d},e.readLong=e.readInt64,e.writeUint64=function(b,c){var d=void 0===c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b)),c+=8;var e=this.buffer.byteLength;return c>e&&this.resize((e*=2)>c?e:c),c-=8,this.littleEndian?(this.view.setInt32(c,b.low,!0),this.view.setInt32(c+4,b.high,!0)):(this.view.setInt32(c,b.high,!1),this.view.setInt32(c+4,b.low,!1)),d&&(this.offset+=8),this},e.readUint64=function(b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}var d=this.littleEndian?new a(this.view.getInt32(b,!0),this.view.getInt32(b+4,!0),!0):new a(this.view.getInt32(b+4,!1),this.view.getInt32(b,!1),!0);return c&&(this.offset+=8),d}),e.writeFloat32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.view.setFloat32(b,a,this.littleEndian),c&&(this.offset+=4),this},e.writeFloat=e.writeFloat32,e.readFloat32=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=this.view.getFloat32(a,this.littleEndian);return b&&(this.offset+=4),c},e.readFloat=e.readFloat32,e.writeFloat64=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=8;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=8,this.view.setFloat64(b,a,this.littleEndian),c&&(this.offset+=8),this},e.writeDouble=e.writeFloat64,e.readFloat64=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+8) <= "+this.buffer.byteLength)}var c=this.view.getFloat64(a,this.littleEndian);return b&&(this.offset+=8),c},e.readDouble=e.readFloat64,d.MAX_VARINT32_BYTES=5,d.calculateVarint32=function(a){return a>>>=0,a<128?1:a<16384?2:a<1<<21?3:a<1<<28?4:5},d.zigZagEncode32=function(a){return((a|=0)<<1^a>>31)>>>0},d.zigZagDecode32=function(a){return a>>>1^-(1&a)|0},e.writeVarint32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var e,f=d.calculateVarint32(a);b+=f;var g=this.buffer.byteLength;return b>g&&this.resize((g*=2)>b?g:b),b-=f,this.view.setUint8(b,e=128|a),a>>>=0,a>=128?(e=a>>7|128,this.view.setUint8(b+1,e),a>=16384?(e=a>>14|128,this.view.setUint8(b+2,e),a>=1<<21?(e=a>>21|128,this.view.setUint8(b+3,e),a>=1<<28?(this.view.setUint8(b+4,a>>28&15),f=5):(this.view.setUint8(b+3,127&e),f=4)):(this.view.setUint8(b+2,127&e),f=3)):(this.view.setUint8(b+1,127&e),f=2)):(this.view.setUint8(b,127&e),f=1),c?(this.offset+=f,this):f},e.writeVarint32ZigZag=function(a,b){return this.writeVarint32(d.zigZagEncode32(a),b)},e.readVarint32=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c,d,e=0,f=0;do{if(d=a+e,!this.noAssert&&d>this.limit){var g=Error("Truncated");throw g.truncated=!0,g}c=this.view.getUint8(d),e<5&&(f|=(127&c)<<7*e>>>0),++e}while(128==(128&c));return f|=0,b?(this.offset+=e,f):{value:f,length:e}},e.readVarint32ZigZag=function(a){var b=this.readVarint32(a);return"object"==typeof b?b.value=d.zigZagDecode32(b.value):b=d.zigZagDecode32(b),b},a&&(d.MAX_VARINT64_BYTES=10,d.calculateVarint64=function(b){"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b));var c=b.toInt()>>>0,d=b.shiftRightUnsigned(28).toInt()>>>0,e=b.shiftRightUnsigned(56).toInt()>>>0;return 0==e?0==d?c<16384?c<128?1:2:c<1<<21?3:4:d<16384?d<128?5:6:d<1<<21?7:8:e<128?9:10},d.zigZagEncode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):!1!==b.unsigned&&(b=b.toSigned()),b.shiftLeft(1).xor(b.shiftRight(63)).toUnsigned()},d.zigZagDecode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):!1!==b.unsigned&&(b=b.toSigned()),b.shiftRightUnsigned(1).xor(b.and(a.ONE).toSigned().negate()).toSigned()},e.writeVarint64=function(b,c){var e=void 0===c;if(e&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):!1!==b.unsigned&&(b=b.toSigned());var f=d.calculateVarint64(b),g=b.toInt()>>>0,h=b.shiftRightUnsigned(28).toInt()>>>0,i=b.shiftRightUnsigned(56).toInt()>>>0;c+=f;var j=this.buffer.byteLength;switch(c>j&&this.resize((j*=2)>c?j:c),c-=f,f){case 10:this.view.setUint8(c+9,i>>>7&1);case 9:this.view.setUint8(c+8,9!==f?128|i:127&i);case 8:this.view.setUint8(c+7,8!==f?h>>>21|128:h>>>21&127);case 7:this.view.setUint8(c+6,7!==f?h>>>14|128:h>>>14&127);case 6:this.view.setUint8(c+5,6!==f?h>>>7|128:h>>>7&127);case 5:this.view.setUint8(c+4,5!==f?128|h:127&h);case 4:this.view.setUint8(c+3,4!==f?g>>>21|128:g>>>21&127);case 3:this.view.setUint8(c+2,3!==f?g>>>14|128:g>>>14&127);case 2:this.view.setUint8(c+1,2!==f?g>>>7|128:g>>>7&127);case 1:this.view.setUint8(c,1!==f?128|g:127&g)}return e?(this.offset+=f,this):f},e.writeVarint64ZigZag=function(a,b){return this.writeVarint64(d.zigZagEncode64(a),b)},e.readVarint64=function(b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+1) <= "+this.buffer.byteLength)}var d=b,e=0,f=0,g=0,h=0;if(h=this.view.getUint8(b++),e=127&h,128&h&&(h=this.view.getUint8(b++),e|=(127&h)<<7,128&h&&(h=this.view.getUint8(b++),e|=(127&h)<<14,128&h&&(h=this.view.getUint8(b++),e|=(127&h)<<21,128&h&&(h=this.view.getUint8(b++),f=127&h,128&h&&(h=this.view.getUint8(b++),f|=(127&h)<<7,128&h&&(h=this.view.getUint8(b++),f|=(127&h)<<14,128&h&&(h=this.view.getUint8(b++),f|=(127&h)<<21,128&h&&(h=this.view.getUint8(b++),g=127&h,128&h&&(h=this.view.getUint8(b++),g|=(127&h)<<7,128&h))))))))))throw Error("Buffer overrun");var i=a.fromBits(e|f<<28,f>>>4|g<<24,!1);return c?(this.offset=b,i):{value:i,length:b-d}},e.readVarint64ZigZag=function(b){var c=this.readVarint64(b);return c&&c.value instanceof a?c.value=d.zigZagDecode64(c.value):c=d.zigZagDecode64(c),c}),e.writeCString=function(a,c){var d=void 0===c;d&&(c=this.offset);var e,f=a.length;if(!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");for(e=0;e<f;++e)if(0===a.charCodeAt(e))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}f=j.calculateUTF16asUTF8(b(a))[1],c+=f+1;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=f+1,j.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),this.view.setUint8(c++,0),d?(this.offset=c,this):f},e.readCString=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var d,e=a,f=-1;return j.decodeUTF8toUTF16(function(){if(0===f)return null;if(a>=this.limit)throw RangeError("Illegal range: Truncated data, "+a+" < "+this.limit);return 0===(f=this.view.getUint8(a++))?null:f}.bind(this),d=c(),!0),b?(this.offset=a,d()):{string:d(),length:a-e}},e.writeIString=function(a,c){var d=void 0===c;if(d&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=j.calculateUTF16asUTF8(b(a),this.noAssert)[1],c+=4+e;var g=this.buffer.byteLength;if(c>g&&this.resize((g*=2)>c?g:c),c-=4+e,this.view.setUint32(c,e,this.littleEndian),c+=4,j.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),c!==f+4+e)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+4+e));return d?(this.offset=c,this):c-f},e.readIString=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var d,e=0,f=a;e=this.view.getUint32(a,this.littleEndian),a+=4;var g,h=a+e;return j.decodeUTF8toUTF16(function(){return a<h?this.view.getUint8(a++):null}.bind(this),g=c(),this.noAssert),d=g(),b?(this.offset=a,d):{string:d,length:a-f}},d.METRICS_CHARS="c",d.METRICS_BYTES="b",e.writeUTF8String=function(a,c){var d=void 0===c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=j.calculateUTF16asUTF8(b(a))[1],c+=e;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=e,j.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),d?(this.offset=c,this):c-f},e.writeString=e.writeUTF8String,d.calculateUTF8Chars=function(a){return j.calculateUTF16asUTF8(b(a))[0]},d.calculateUTF8Bytes=function(a){return j.calculateUTF16asUTF8(b(a))[1]},e.readUTF8String=function(a,b,e){"number"==typeof b&&(e=b,b=void 0);var f=void 0===e;if(f&&(e=this.offset),void 0===b&&(b=d.METRICS_CHARS),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal length: "+a+" (not an integer)");if(a|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var g,h=0,i=e;if(b===d.METRICS_CHARS){if(g=c(),j.decodeUTF8(function(){return h<a&&e<this.limit?this.view.getUint8(e++):null}.bind(this),function(a){++h,j.UTF8toUTF16(a,g)}.bind(this)),h!==a)throw RangeError("Illegal range: Truncated data, "+h+" == "+a);return f?(this.offset=e,g()):{string:g(),length:e-i}}if(b===d.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+a>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+a+") <= "+this.buffer.byteLength)}var k=e+a;if(j.decodeUTF8toUTF16(function(){return e<k?this.view.getUint8(e++):null}.bind(this),g=c(),this.noAssert),e!==k)throw RangeError("Illegal range: Truncated data, "+e+" == "+k);return f?(this.offset=e,g()):{string:g(),length:e-i}}throw TypeError("Unsupported metrics: "+b)},e.readString=e.readUTF8String,e.writeVString=function(a,c){var e=void 0===c;if(e&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var f,g,h=c;f=j.calculateUTF16asUTF8(b(a),this.noAssert)[1],g=d.calculateVarint32(f),c+=g+f;var i=this.buffer.byteLength;if(c>i&&this.resize((i*=2)>c?i:c),c-=g+f,c+=this.writeVarint32(f,c),j.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),c!==h+f+g)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+f+g));return e?(this.offset=c,this):c-h},e.readVString=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var d,e=this.readVarint32(a),f=a;a+=e.length,e=e.value;var g=a+e,h=c();return j.decodeUTF8toUTF16(function(){return a<g?this.view.getUint8(a++):null}.bind(this),h,this.noAssert),d=h(),b?(this.offset=a,d):{string:d,length:a-f}},e.append=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=void 0);var e=void 0===c;if(e&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof d||(a=d.wrap(a,b));var f=a.limit-a.offset;if(f<=0)return this;c+=f;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=f,new Uint8Array(this.buffer,c).set(new Uint8Array(a.buffer).subarray(a.offset,a.limit)),a.offset+=f,e&&(this.offset+=f),this},e.appendTo=function(a,b){return a.append(this,b),this},e.assert=function(a){return this.noAssert=!a,this},e.capacity=function(){return this.buffer.byteLength},e.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},e.clone=function(a){var b=new d(0,this.littleEndian,this.noAssert);if(a){var c=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(c).set(this.buffer),b.buffer=c,b.view=new DataView(c)}else b.buffer=this.buffer,b.view=this.view;return b.offset=this.offset,b.markedOffset=this.markedOffset,b.limit=this.limit,b},e.compact=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(0===a&&b===this.buffer.byteLength)return this;var c=b-a;if(0===c)return this.buffer=f,this.view=null,this.markedOffset>=0&&(this.markedOffset-=a),this.offset=0,this.limit=0,this;var d=new ArrayBuffer(c);return new Uint8Array(d).set(new Uint8Array(this.buffer).subarray(a,b)),this.buffer=d,this.view=new DataView(d),this.markedOffset>=0&&(this.markedOffset-=a),this.offset=0,this.limit=c,this},e.copy=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(a===b)return new d(0,this.littleEndian,this.noAssert);var c=b-a,e=new d(c,this.littleEndian,this.noAssert);return e.offset=0,e.limit=c,e.markedOffset>=0&&(e.markedOffset-=a),this.copyTo(e,0,a,b),e},e.copyTo=function(a,b,c,e){var f,g;if(!this.noAssert&&!d.isByteBuffer(a))throw TypeError("Illegal target: Not a ByteBuffer");if(b=(g=void 0===b)?a.offset:0|b,c=(f=void 0===c)?this.offset:0|c,e=void 0===e?this.limit:0|e,b<0||b>a.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+b+" <= "+a.buffer.byteLength)
;if(c<0||e>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+c+" <= "+this.buffer.byteLength);var h=e-c;return 0===h?a:(a.ensureCapacity(b+h),new Uint8Array(a.buffer).set(new Uint8Array(this.buffer).subarray(c,e),b),f&&(this.offset+=h),g&&(a.offset+=h),this)},e.ensureCapacity=function(a){var b=this.buffer.byteLength;return b<a?this.resize((b*=2)>a?b:a):this},e.fill=function(a,b,c){var d=void 0===b;if(d&&(b=this.offset),"string"==typeof a&&a.length>0&&(a=a.charCodeAt(0)),void 0===b&&(b=this.offset),void 0===c&&(c=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal begin: Not an integer");if(b>>>=0,"number"!=typeof c||c%1!=0)throw TypeError("Illegal end: Not an integer");if(c>>>=0,b<0||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(b>=c)return this;for(;b<c;)this.view.setUint8(b++,a);return d&&(this.offset=b),this},e.flip=function(){return this.limit=this.offset,this.offset=0,this},e.mark=function(a){if(a=void 0===a?this.offset:a,!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=a,this},e.order=function(a){if(!this.noAssert&&"boolean"!=typeof a)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!a,this},e.LE=function(a){return this.littleEndian=void 0===a||!!a,this},e.BE=function(a){return this.littleEndian=void 0!==a&&!a,this},e.prepend=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=void 0);var e=void 0===c;if(e&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof d||(a=d.wrap(a,b));var f=a.limit-a.offset;if(f<=0)return this;var g,h=f-c;if(h>0){var i=new ArrayBuffer(this.buffer.byteLength+h);g=new Uint8Array(i),g.set(new Uint8Array(this.buffer).subarray(c,this.buffer.byteLength),f),this.buffer=i,this.view=new DataView(i),this.offset+=h,this.markedOffset>=0&&(this.markedOffset+=h),this.limit+=h,c+=h}else g=new Uint8Array(this.buffer);return g.set(new Uint8Array(a.buffer).subarray(a.offset,a.limit),c-f),a.offset=a.limit,e&&(this.offset-=f),this},e.prependTo=function(a,b){return a.prepend(this,b),this},e.printDebug=function(a){"function"!=typeof a&&(a=console.log.bind(console)),a(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},e.remaining=function(){return this.limit-this.offset},e.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},e.resize=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal capacity: "+a+" (not an integer)");if((a|=0)<0)throw RangeError("Illegal capacity: 0 <= "+a)}if(this.buffer.byteLength<a){var b=new ArrayBuffer(a);new Uint8Array(b).set(new Uint8Array(this.buffer)),this.buffer=b,this.view=new DataView(b)}return this},e.reverse=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}return a===b?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(a,b)),this.view=new DataView(this.buffer),this)},e.skip=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal length: "+a+" (not an integer)");a|=0}var b=this.offset+a;if(!this.noAssert&&(b<0||b>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+a+" <= "+this.buffer.byteLength);return this.offset=b,this},e.slice=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var c=this.clone();return c.offset=a,c.limit=b,c},e.toBuffer=function(a){var b=this.offset,c=this.limit;if(b>c){var d=b;b=c,c=d}if(!this.noAssert){if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: Not an integer");if(b>>>=0,"number"!=typeof c||c%1!=0)throw TypeError("Illegal limit: Not an integer");if(c>>>=0,b<0||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(!a&&0===b&&c===this.buffer.byteLength)return this.buffer;if(b===c)return f;var e=new ArrayBuffer(c-b);return new Uint8Array(e).set(new Uint8Array(this.buffer).subarray(b,c),0),e},e.toArrayBuffer=e.toBuffer,e.toString=function(a,b,c){if(void 0===a)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof a&&(a="utf8",b=a,c=b),a){case"utf8":return this.toUTF8(b,c);case"base64":return this.toBase64(b,c);case"hex":return this.toHex(b,c);case"binary":return this.toBinary(b,c);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+a)}};var h=function(){for(var a={},b=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],c=[],d=0,e=b.length;d<e;++d)c[b[d]]=d;return a.encode=function(a,c){for(var d,e;null!==(d=a());)c(b[d>>2&63]),e=(3&d)<<4,null!==(d=a())?(e|=d>>4&15,c(b[63&(e|d>>4&15)]),e=(15&d)<<2,null!==(d=a())?(c(b[63&(e|d>>6&3)]),c(b[63&d])):(c(b[63&e]),c(61))):(c(b[63&e]),c(61),c(61))},a.decode=function(a,b){function d(a){throw Error("Illegal character code: "+a)}for(var e,f,g;null!==(e=a());)if(f=c[e],void 0===f&&d(e),null!==(e=a())&&(g=c[e],void 0===g&&d(e),b(f<<2>>>0|(48&g)>>4),null!==(e=a()))){if(void 0===(f=c[e])){if(61===e)break;d(e)}if(b((15&g)<<4>>>0|(60&f)>>2),null!==(e=a())){if(void 0===(g=c[e])){if(61===e)break;d(e)}b((3&f)<<6>>>0|g)}}},a.test=function(a){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(a)},a}();e.toBase64=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var d;return h.encode(function(){return a<b?this.view.getUint8(a++):null}.bind(this),d=c()),d()},d.fromBase64=function(a,c,e){if(!e){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if(a.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var f=new d(a.length/4*3,c,e),g=0;return h.decode(b(a),function(a){f.view.setUint8(g++,a)}),f.limit=g,f},d.btoa=function(a){return d.fromBinary(a).toBase64()},d.atob=function(a){return d.fromBase64(a).toBinary()},e.toBinary=function(a,b){if(a=void 0===a?this.offset:a,b=void 0===b?this.limit:b,!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(a===b)return"";for(var c=[],d=[];a<b;)c.push(this.view.getUint8(a++)),c.length>=1024&&(d.push(String.fromCharCode.apply(String,c)),c=[]);return d.join("")+String.fromCharCode.apply(String,c)},d.fromBinary=function(a,b,c){if(!c&&"string"!=typeof a)throw TypeError("Illegal str: Not a string");for(var e,f=0,g=a.length,h=new d(g,b,c);f<g;){if(e=a.charCodeAt(f),!c&&e>255)throw RangeError("Illegal charCode at "+f+": 0 <= "+e+" <= 255");h.view.setUint8(f++,e)}return h.limit=g,h},e.toDebug=function(a){for(var b,c=-1,d=this.buffer.byteLength,e="",f="",g="";c<d;){if(-1!==c&&(b=this.view.getUint8(c),e+=b<16?"0"+b.toString(16).toUpperCase():b.toString(16).toUpperCase(),a&&(f+=b>32&&b<127?String.fromCharCode(b):".")),++c,a&&c>0&&c%16==0&&c!==d){for(;e.length<51;)e+=" ";g+=e+f+"\n",e=f=""}c===this.offset&&c===this.limit?e+=c===this.markedOffset?"!":"|":c===this.offset?e+=c===this.markedOffset?"[":"<":c===this.limit?e+=c===this.markedOffset?"]":">":e+=c===this.markedOffset?"'":a||0!==c&&c!==d?" ":""}if(a&&" "!==e){for(;e.length<51;)e+=" ";g+=e+f+"\n"}return a?g:e},d.fromDebug=function(a,b,c){for(var e,f,g=a.length,h=new d((g+1)/3|0,b,c),i=0,j=0,k=!1,l=!1,m=!1,n=!1,o=!1;i<g;){switch(e=a.charAt(i++)){case"!":if(!c){if(l||m||n){o=!0;break}l=m=n=!0}h.offset=h.markedOffset=h.limit=j,k=!1;break;case"|":if(!c){if(l||n){o=!0;break}l=n=!0}h.offset=h.limit=j,k=!1;break;case"[":if(!c){if(l||m){o=!0;break}l=m=!0}h.offset=h.markedOffset=j,k=!1;break;case"<":if(!c){if(l){o=!0;break}l=!0}h.offset=j,k=!1;break;case"]":if(!c){if(n||m){o=!0;break}n=m=!0}h.limit=h.markedOffset=j,k=!1;break;case">":if(!c){if(n){o=!0;break}n=!0}h.limit=j,k=!1;break;case"'":if(!c){if(m){o=!0;break}m=!0}h.markedOffset=j,k=!1;break;case" ":k=!1;break;default:if(!c&&k){o=!0;break}if(f=parseInt(e+a.charAt(i++),16),!c&&(isNaN(f)||f<0||f>255))throw TypeError("Illegal str: Not a debug encoded string");h.view.setUint8(j++,f),k=!0}if(o)throw TypeError("Illegal str: Invalid symbol at "+i)}if(!c){if(!l||!n)throw TypeError("Illegal str: Missing offset or limit");if(j<h.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+j+" < "+g)}return h},e.toHex=function(a,b){if(a=void 0===a?this.offset:a,b=void 0===b?this.limit:b,!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}for(var c,d=new Array(b-a);a<b;)c=this.view.getUint8(a++),c<16?d.push("0",c.toString(16)):d.push(c.toString(16));return d.join("")},d.fromHex=function(a,b,c){if(!c){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if(a.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var e,f=a.length,g=new d(f/2|0,b),h=0,i=0;h<f;h+=2){if(e=parseInt(a.substring(h,h+2),16),!c&&(!isFinite(e)||e<0||e>255))throw TypeError("Illegal str: Contains non-hex characters");g.view.setUint8(i++,e)}return g.limit=i,g};var j=function(){var a={};return a.MAX_CODEPOINT=1114111,a.encodeUTF8=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<128?b(127&c):c<2048?(b(c>>6&31|192),b(63&c|128)):c<65536?(b(c>>12&15|224),b(c>>6&63|128),b(63&c|128)):(b(c>>18&7|240),b(c>>12&63|128),b(c>>6&63|128),b(63&c|128)),c=null},a.decodeUTF8=function(a,b){for(var c,d,e,f,g=function(a){a=a.slice(0,a.indexOf(null));var b=Error(a.toString());throw b.name="TruncatedError",b.bytes=a,b};null!==(c=a());)if(0==(128&c))b(c);else if(192==(224&c))null===(d=a())&&g([c,d]),b((31&c)<<6|63&d);else if(224==(240&c))(null===(d=a())||null===(e=a()))&&g([c,d,e]),b((15&c)<<12|(63&d)<<6|63&e);else{if(240!=(248&c))throw RangeError("Illegal starting byte: "+c);(null===(d=a())||null===(e=a())||null===(f=a()))&&g([c,d,e,f]),b((7&c)<<18|(63&d)<<12|(63&e)<<6|63&f)}},a.UTF16toUTF8=function(a,b){for(var c,d=null;;){if(null===(c=null!==d?d:a()))break;c>=55296&&c<=57343&&null!==(d=a())&&d>=56320&&d<=57343?(b(1024*(c-55296)+d-56320+65536),d=null):b(c)}null!==d&&b(d)},a.UTF8toUTF16=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<=65535?b(c):(c-=65536,b(55296+(c>>10)),b(c%1024+56320)),c=null},a.encodeUTF16toUTF8=function(b,c){a.UTF16toUTF8(b,function(b){a.encodeUTF8(b,c)})},a.decodeUTF8toUTF16=function(b,c){a.decodeUTF8(b,function(b){a.UTF8toUTF16(b,c)})},a.calculateCodePoint=function(a){return a<128?1:a<2048?2:a<65536?3:4},a.calculateUTF8=function(b){for(var c,d=0;null!==(c=b());)d+=a.calculateCodePoint(c);return d},a.calculateUTF16asUTF8=function(b){var c=0,d=0;return a.UTF16toUTF8(b,function(b){++c,d+=a.calculateCodePoint(b)}),[c,d]},a}();return e.toUTF8=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var d;try{j.decodeUTF8toUTF16(function(){return a<b?this.view.getUint8(a++):null}.bind(this),d=c())}catch(c){if(a!==b)throw RangeError("Illegal range: Truncated data, "+a+" != "+b)}return d()},d.fromUTF8=function(a,c,e){if(!e&&"string"!=typeof a)throw TypeError("Illegal str: Not a string");var f=new d(j.calculateUTF16asUTF8(b(a),!0)[1],c,e),g=0;return j.encodeUTF16toUTF8(b(a),function(a){f.view.setUint8(g++,a)}),f.limit=g,f},d}"function"==typeof b&&"object"==typeof c&&c&&"object"==typeof d&&d?c.exports=function(){var a;try{a=b("long")}catch(a){}return f(a)}():"function"==typeof a&&a.amd?a("ByteBuffer",["Long"],function(a){return f(a)}):(e.dcodeIO=e.dcodeIO||{}).ByteBuffer=f(e.dcodeIO.Long)}(this)},{long:25}],25:[function(b,c,d){!function(d,e){"function"==typeof a&&a.amd?a([],e):"function"==typeof b&&"object"==typeof c&&c&&c.exports?c.exports=e():(d.dcodeIO=d.dcodeIO||{}).Long=e()}(this,function(){"use strict";function a(a,b,c){this.low=0|a,this.high=0|b,this.unsigned=!!c}a.__isLong__,Object.defineProperty(a.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),a.isLong=function(a){return!0===(a&&a.__isLong__)};var b={},c={};a.fromInt=function(d,e){var f,g;return e?0<=(d>>>=0)&&d<256&&(g=c[d])?g:(f=new a(d,(0|d)<0?-1:0,!0),0<=d&&d<256&&(c[d]=f),f):-128<=(d|=0)&&d<128&&(g=b[d])?g:(f=new a(d,d<0?-1:0,!1),-128<=d&&d<128&&(b[d]=f),f)},a.fromNumber=function(b,c){return c=!!c,isNaN(b)||!isFinite(b)?a.ZERO:!c&&b<=-h?a.MIN_VALUE:!c&&b+1>=h?a.MAX_VALUE:c&&b>=g?a.MAX_UNSIGNED_VALUE:b<0?a.fromNumber(-b,c).negate():new a(b%f|0,b/f|0,c)},a.fromBits=function(b,c,d){return new a(b,c,d)},a.fromString=function(b,c,d){if(0===b.length)throw Error("number format error: empty string");if("NaN"===b||"Infinity"===b||"+Infinity"===b||"-Infinity"===b)return a.ZERO;if("number"==typeof c&&(d=c,c=!1),(d=d||10)<2||36<d)throw Error("radix out of range: "+d);var e;if((e=b.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+b);if(0===e)return a.fromString(b.substring(1),c,d).negate();for(var f=a.fromNumber(Math.pow(d,8)),g=a.ZERO,h=0;h<b.length;h+=8){var i=Math.min(8,b.length-h),j=parseInt(b.substring(h,h+i),d);if(i<8){var k=a.fromNumber(Math.pow(d,i));g=g.multiply(k).add(a.fromNumber(j))}else g=g.multiply(f),g=g.add(a.fromNumber(j))}return g.unsigned=c,g},a.fromValue=function(b){return b instanceof a?b:"number"==typeof b?a.fromNumber(b):"string"==typeof b?a.fromString(b):new a(b.low,b.high,b.unsigned)};var d=65536,e=1<<24,f=d*d,g=f*f,h=g/2,i=a.fromInt(e);return a.ZERO=a.fromInt(0),a.UZERO=a.fromInt(0,!0),a.ONE=a.fromInt(1),a.UONE=a.fromInt(1,!0),a.NEG_ONE=a.fromInt(-1),a.MAX_VALUE=a.fromBits(-1,2147483647,!1),a.MAX_UNSIGNED_VALUE=a.fromBits(-1,-1,!0),a.MIN_VALUE=a.fromBits(0,-2147483648,!1),a.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},a.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},a.prototype.toString=function(b){if((b=b||10)<2||36<b)throw RangeError("radix out of range: "+b);if(this.isZero())return"0";var c;if(this.isNegative()){if(this.equals(a.MIN_VALUE)){var d=a.fromNumber(b),e=this.divide(d);return c=e.multiply(d).subtract(this),e.toString(b)+c.toInt().toString(b)}return"-"+this.negate().toString(b)}var f=a.fromNumber(Math.pow(b,6),this.unsigned);c=this;for(var g="";;){var h=c.divide(f),i=c.subtract(h.multiply(f)).toInt()>>>0,j=i.toString(b);if(c=h,c.isZero())return j+g;for(;j.length<6;)j="0"+j;g=""+j+g}},a.prototype.getHighBits=function(){return this.high},a.prototype.getHighBitsUnsigned=function(){return this.high>>>0},a.prototype.getLowBits=function(){return this.low},a.prototype.getLowBitsUnsigned=function(){return this.low>>>0},a.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(a.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var b=0!=this.high?this.high:this.low,c=31;c>0&&0==(b&1<<c);c--);return 0!=this.high?c+33:c+1},a.prototype.isZero=function(){return 0===this.high&&0===this.low},a.prototype.isNegative=function(){return!this.unsigned&&this.high<0},a.prototype.isPositive=function(){return this.unsigned||this.high>=0},a.prototype.isOdd=function(){return 1==(1&this.low)},a.prototype.isEven=function(){return 0==(1&this.low)},a.prototype.equals=function(b){return a.isLong(b)||(b=a.fromValue(b)),(this.unsigned===b.unsigned||this.high>>>31!=1||b.high>>>31!=1)&&(this.high===b.high&&this.low===b.low)},a.eq=a.prototype.equals,a.prototype.notEquals=function(a){return!this.equals(a)},a.neq=a.prototype.notEquals,a.prototype.lessThan=function(a){return this.compare(a)<0},a.prototype.lt=a.prototype.lessThan,a.prototype.lessThanOrEqual=function(a){return this.compare(a)<=0},a.prototype.lte=a.prototype.lessThanOrEqual,a.prototype.greaterThan=function(a){return this.compare(a)>0},a.prototype.gt=a.prototype.greaterThan,a.prototype.greaterThanOrEqual=function(a){return this.compare(a)>=0},a.prototype.gte=a.prototype.greaterThanOrEqual,a.prototype.compare=function(b){if(a.isLong(b)||(b=a.fromValue(b)),this.equals(b))return 0;var c=this.isNegative(),d=b.isNegative();return c&&!d?-1:!c&&d?1:this.unsigned?b.high>>>0>this.high>>>0||b.high===this.high&&b.low>>>0>this.low>>>0?-1:1:this.subtract(b).isNegative()?-1:1},a.prototype.negate=function(){return!this.unsigned&&this.equals(a.MIN_VALUE)?a.MIN_VALUE:this.not().add(a.ONE)},a.prototype.neg=a.prototype.negate,a.prototype.add=function(b){a.isLong(b)||(b=a.fromValue(b));var c=this.high>>>16,d=65535&this.high,e=this.low>>>16,f=65535&this.low,g=b.high>>>16,h=65535&b.high,i=b.low>>>16,j=65535&b.low,k=0,l=0,m=0,n=0;return n+=f+j,m+=n>>>16,n&=65535,m+=e+i,l+=m>>>16,m&=65535,l+=d+h,k+=l>>>16,l&=65535,k+=c+g,k&=65535,a.fromBits(m<<16|n,k<<16|l,this.unsigned)},a.prototype.subtract=function(b){return a.isLong(b)||(b=a.fromValue(b)),this.add(b.negate())},a.prototype.sub=a.prototype.subtract,a.prototype.multiply=function(b){if(this.isZero())return a.ZERO;if(a.isLong(b)||(b=a.fromValue(b)),b.isZero())return a.ZERO;if(this.equals(a.MIN_VALUE))return b.isOdd()?a.MIN_VALUE:a.ZERO;if(b.equals(a.MIN_VALUE))return this.isOdd()?a.MIN_VALUE:a.ZERO;if(this.isNegative())return b.isNegative()?this.negate().multiply(b.negate()):this.negate().multiply(b).negate();if(b.isNegative())return this.multiply(b.negate()).negate();if(this.lessThan(i)&&b.lessThan(i))return a.fromNumber(this.toNumber()*b.toNumber(),this.unsigned);var c=this.high>>>16,d=65535&this.high,e=this.low>>>16,f=65535&this.low,g=b.high>>>16,h=65535&b.high,j=b.low>>>16,k=65535&b.low,l=0,m=0,n=0,o=0;return o+=f*k,n+=o>>>16,o&=65535,n+=e*k,m+=n>>>16,n&=65535,n+=f*j,m+=n>>>16,n&=65535,m+=d*k,l+=m>>>16,m&=65535,m+=e*j,l+=m>>>16,m&=65535,m+=f*h,l+=m>>>16,m&=65535,l+=c*k+d*j+e*h+f*g,l&=65535,a.fromBits(n<<16|o,l<<16|m,this.unsigned)},a.prototype.mul=a.prototype.multiply,a.prototype.divide=function(b){if(a.isLong(b)||(b=a.fromValue(b)),b.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?a.UZERO:a.ZERO;var c,d,e;if(this.equals(a.MIN_VALUE)){if(b.equals(a.ONE)||b.equals(a.NEG_ONE))return a.MIN_VALUE;if(b.equals(a.MIN_VALUE))return a.ONE;return c=this.shiftRight(1).divide(b).shiftLeft(1),c.equals(a.ZERO)?b.isNegative()?a.ONE:a.NEG_ONE:(d=this.subtract(b.multiply(c)),e=c.add(d.divide(b)))}if(b.equals(a.MIN_VALUE))return this.unsigned?a.UZERO:a.ZERO;if(this.isNegative())return b.isNegative()?this.negate().divide(b.negate()):this.negate().divide(b).negate();if(b.isNegative())return this.divide(b.negate()).negate();for(e=a.ZERO,d=this;d.greaterThanOrEqual(b);){c=Math.max(1,Math.floor(d.toNumber()/b.toNumber()));for(var f=Math.ceil(Math.log(c)/Math.LN2),g=f<=48?1:Math.pow(2,f-48),h=a.fromNumber(c),i=h.multiply(b);i.isNegative()||i.greaterThan(d);)c-=g,h=a.fromNumber(c,this.unsigned),i=h.multiply(b);h.isZero()&&(h=a.ONE),e=e.add(h),d=d.subtract(i)}return e},a.prototype.div=a.prototype.divide,a.prototype.modulo=function(b){return a.isLong(b)||(b=a.fromValue(b)),this.subtract(this.divide(b).multiply(b))},a.prototype.mod=a.prototype.modulo,a.prototype.not=function(){return a.fromBits(~this.low,~this.high,this.unsigned)},a.prototype.and=function(b){return a.isLong(b)||(b=a.fromValue(b)),a.fromBits(this.low&b.low,this.high&b.high,this.unsigned)},a.prototype.or=function(b){return a.isLong(b)||(b=a.fromValue(b)),a.fromBits(this.low|b.low,this.high|b.high,this.unsigned)},a.prototype.xor=function(b){return a.isLong(b)||(b=a.fromValue(b)),a.fromBits(this.low^b.low,this.high^b.high,this.unsigned)},a.prototype.shiftLeft=function(b){return a.isLong(b)&&(b=b.toInt()),0==(b&=63)?this:b<32?a.fromBits(this.low<<b,this.high<<b|this.low>>>32-b,this.unsigned):a.fromBits(0,this.low<<b-32,this.unsigned)},a.prototype.shl=a.prototype.shiftLeft,a.prototype.shiftRight=function(b){return a.isLong(b)&&(b=b.toInt()),0==(b&=63)?this:b<32?a.fromBits(this.low>>>b|this.high<<32-b,this.high>>b,this.unsigned):a.fromBits(this.high>>b-32,this.high>=0?0:-1,this.unsigned)},a.prototype.shr=a.prototype.shiftRight,a.prototype.shiftRightUnsigned=function(b){if(a.isLong(b)&&(b=b.toInt()),0===(b&=63))return this;var c=this.high;if(b<32){var d=this.low;return a.fromBits(d>>>b|c<<32-b,c>>>b,this.unsigned)}return 32===b?a.fromBits(c,0,this.unsigned):a.fromBits(c>>>b-32,0,this.unsigned)},a.prototype.shru=a.prototype.shiftRightUnsigned,a.prototype.toSigned=function(){return this.unsigned?new a(this.low,this.high,!1):this},a.prototype.toUnsigned=function(){return this.unsigned?this:new a(this.low,this.high,!0)},a})},{}],26:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:27}],27:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],28:[function(b,c,d){!function(e){"use strict";function f(a){var c={};return c.VERSION="3.8.2",c.WIRE_TYPES={},c.WIRE_TYPES.VARINT=0,c.WIRE_TYPES.BITS64=1,c.WIRE_TYPES.LDELIM=2,c.WIRE_TYPES.STARTGROUP=3,c.WIRE_TYPES.ENDGROUP=4,c.WIRE_TYPES.BITS32=5,c.PACKABLE_WIRE_TYPES=[c.WIRE_TYPES.VARINT,c.WIRE_TYPES.BITS64,c.WIRE_TYPES.BITS32],c.TYPES={int32:{name:"int32",wireType:c.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:c.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:c.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:c.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:c.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:c.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:c.WIRE_TYPES.VARINT},double:{name:"double",wireType:c.WIRE_TYPES.BITS64},string:{name:"string",wireType:c.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:c.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:c.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:c.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:c.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:c.WIRE_TYPES.BITS64},float:{name:"float",wireType:c.WIRE_TYPES.BITS32},enum:{name:"enum",wireType:c.WIRE_TYPES.VARINT},message:{name:"message",wireType:c.WIRE_TYPES.LDELIM},group:{name:"group",wireType:c.WIRE_TYPES.STARTGROUP}},c.ID_MIN=1,c.ID_MAX=536870911,c.ByteBuffer=a,c.Long=a.Long||null,c.convertFieldsToCamelCase=!1,c.populateAccessors=!0,c.Util=function(){Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return b.prototype=a,new b});var a={};a.IS_NODE=!1;try{a.IS_NODE="function"==typeof b&&"function"==typeof b("fs").readFileSync&&"function"==typeof b("path").resolve}catch(a){}return a.XHR=function(){for(var a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=null,c=0;c<a.length;c++){try{b=a[c]()}catch(a){continue}break}if(!b)throw Error("XMLHttpRequest is not supported");return b},a.fetch=function(c,d){if(d&&"function"!=typeof d&&(d=null),a.IS_NODE)if(d)b("fs").readFile(c,function(a,b){d(a?null:""+b)});else try{return b("fs").readFileSync(c)}catch(a){return null}else{var e=a.XHR();if(e.open("GET",c,!!d),e.setRequestHeader("Accept","text/plain"),"function"==typeof e.overrideMimeType&&e.overrideMimeType("text/plain"),!d)return e.send(null),200==e.status||0==e.status&&"string"==typeof e.responseText?e.responseText:null;if(e.onreadystatechange=function(){4==e.readyState&&d(200==e.status||0==e.status&&"string"==typeof e.responseText?e.responseText:null)},4==e.readyState)return;e.send(null)}},a.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},a}(),c.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},c.Reflect=function(b){function c(a,d){var e=d.readVarint32(),f=7&e,g=e>>3;switch(f){case b.WIRE_TYPES.VARINT:do{e=d.readUint8()}while(128==(128&e));break;case b.WIRE_TYPES.BITS64:d.offset+=8;break;case b.WIRE_TYPES.LDELIM:e=d.readVarint32(),d.offset+=e;break;case b.WIRE_TYPES.STARTGROUP:c(g,d);break;case b.WIRE_TYPES.ENDGROUP:if(g===a)return!1;throw Error("Illegal GROUPEND after unknown group: "+g+" ("+a+" expected)");case b.WIRE_TYPES.BITS32:d.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+a+": "+f)}return!0}function d(a,c){if(a&&"number"==typeof a.low&&"number"==typeof a.high&&"boolean"==typeof a.unsigned&&a.low===a.low&&a.high===a.high)return new b.Long(a.low,a.high,void 0===c?a.unsigned:c);if("string"==typeof a)return b.Long.fromString(a,c||!1,10);if("number"==typeof a)return b.Long.fromNumber(a,c||!1);throw Error("not convertible to Long")}var e={},f=function(a,b,c){this.builder=a,this.parent=b,this.name=c,this.className},g=f.prototype;g.fqn=function(){for(var a=this.name,b=this;;){if(null==(b=b.parent))break;a=b.name+"."+a}return a},g.toString=function(a){return(a?this.className+" ":"")+this.fqn()},g.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},e.T=f;var h=function(a,b,c,d){f.call(this,a,b,c),this.className="Namespace",this.children=[],this.options=d||{}},i=h.prototype=Object.create(f.prototype);i.getChildren=function(a){if(null==(a=a||null))return this.children.slice();for(var b=[],c=0,d=this.children.length;c<d;++c)this.children[c]instanceof a&&b.push(this.children[c]);return b},i.addChild=function(a){var b;if(b=this.getChild(a.name))if(b instanceof j.Field&&b.name!==b.originalName&&null===this.getChild(b.originalName))b.name=b.originalName;else{if(!(a instanceof j.Field&&a.name!==a.originalName&&null===this.getChild(a.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+a.name)
;a.name=a.originalName}this.children.push(a)},i.getChild=function(a){for(var b="number"==typeof a?"id":"name",c=0,d=this.children.length;c<d;++c)if(this.children[c][b]===a)return this.children[c];return null},i.resolve=function(a,b){var c=a.split("."),d=this,f=0;if(""===c[f]){for(;null!==d.parent;)d=d.parent;f++}var g;do{do{if(!(g=d.getChild(c[f]))||!(g instanceof e.T)||b&&g instanceof e.Message.Field){d=null;break}d=g,f++}while(f<c.length);if(null!=d)break;if(null!==this.parent)return this.parent.resolve(a,b)}while(null!=d);return d},i.build=function(){for(var a,b={},c=this.children,d=0,e=c.length;d<e;++d)(a=c[d])instanceof h&&(b[a.name]=a.build());return Object.defineProperty&&Object.defineProperty(b,"$options",{value:this.buildOpt()}),b},i.buildOpt=function(){for(var a={},b=Object.keys(this.options),c=0,d=b.length;c<d;++c){var e=b[c],f=this.options[b[c]];a[e]=f}return a},i.getOption=function(a){return void 0===a?this.options:void 0!==this.options[a]?this.options[a]:null},e.Namespace=h;var j=function(a,c,d,e,f){h.call(this,a,c,d,e),this.className="Message",this.extensions=[b.ID_MIN,b.ID_MAX],this.clazz=null,this.isGroup=!!f,this._fields=null,this._fieldsById=null,this._fieldsByName=null},k=j.prototype=Object.create(h.prototype);k.build=function(c){if(this.clazz&&!c)return this.clazz;var d=function(b,c){function d(b,c){var e={};for(var f in b)b.hasOwnProperty(f)&&(null===b[f]||"object"!=typeof b[f]?e[f]=b[f]:b[f]instanceof a?c&&(e[f]=b[f].toBase64()):e[f]=d(b[f],c));return e}var e=c.getChildren(b.Reflect.Message.Field),f=c.getChildren(b.Reflect.Message.OneOf),g=function(c,d){b.Builder.Message.call(this);for(var g=0,h=f.length;g<h;++g)this[f[g].name]=null;for(g=0,h=e.length;g<h;++g){var i=e[g];this[i.name]=i.repeated?[]:null,i.required&&null!==i.defaultValue&&(this[i.name]=i.defaultValue)}if(arguments.length>0)if(1!==arguments.length||"object"!=typeof c||"function"==typeof c.encode||b.Util.isArray(c)||c instanceof a||c instanceof ArrayBuffer||b.Long&&c instanceof b.Long)for(g=0,h=arguments.length;g<h;++g)this.$set(e[g].name,arguments[g]);else{var j=Object.keys(c);for(g=0,h=j.length;g<h;++g)this.$set(j[g],c[j[g]])}},h=g.prototype=Object.create(b.Builder.Message.prototype);h.add=function(a,d,e){var f=c._fieldsByName[a];if(!e){if(!f)throw Error(this+"#"+a+" is undefined");if(!(f instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+f.toString(!0));if(!f.repeated)throw Error(this+"#"+a+" is not a repeated field")}null===this[f.name]&&(this[f.name]=[]),this[f.name].push(e?d:f.verifyValue(d,!0))},h.$add=h.add,h.set=function(a,d,e){if(a&&"object"==typeof a){for(var f in a)a.hasOwnProperty(f)&&this.$set(f,a[f],e);return this}var g=c._fieldsByName[a];if(e)this[g.name]=d;else{if(!g)throw Error(this+"#"+a+" is not a field: undefined");if(!(g instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+g.toString(!0));this[g.name]=d=g.verifyValue(d)}return g.oneof&&(null!==d?(null!==this[g.oneof.name]&&(this[this[g.oneof.name]]=null),this[g.oneof.name]=g.name):g.oneof.name===a&&(this[g.oneof.name]=null)),this},h.$set=h.set,h.get=function(a,d){if(d)return this[a];var e=c._fieldsByName[a];if(!(e&&e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: undefined");if(!(e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+e.toString(!0));return this[e.name]},h.$get=h.get;for(var i=0;i<e.length;i++){var j=e[i];j instanceof b.Reflect.Message.ExtensionField||c.builder.options.populateAccessors&&function(a){var b=a.originalName.replace(/(_[a-zA-Z])/g,function(a){return a.toUpperCase().replace("_","")});b=b.substring(0,1).toUpperCase()+b.substring(1);var d=a.originalName.replace(/([A-Z])/g,function(a){return"_"+a}),e=function(b,c){return this[a.name]=c?b:a.verifyValue(b),this},f=function(){return this[a.name]};null===c.getChild("set"+b)&&(h["set"+b]=e),null===c.getChild("set_"+d)&&(h["set_"+d]=e),null===c.getChild("get"+b)&&(h["get"+b]=f),null===c.getChild("get_"+d)&&(h["get_"+d]=f)}(j)}h.encode=function(b,d){"boolean"==typeof b&&(d=b,b=void 0);var e=!1;b||(b=new a,e=!0);var f=b.littleEndian;try{return c.encode(this,b.LE(),d),(e?b.flip():b).LE(f)}catch(a){throw b.LE(f),a}},h.calculate=function(){return c.calculate(this)},h.encodeDelimited=function(b){var d=!1;b||(b=new a,d=!0);var e=(new a).LE();return c.encode(this,e).flip(),b.writeVarint32(e.remaining()),b.append(e),d?b.flip():b},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toArrayBuffer()),a}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBuffer()),a}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBase64()),a}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toHex()),a}},h.toHex=h.encodeHex,h.toRaw=function(a){return d(this,!!a)},g.decode=function(b,d){"string"==typeof b&&(b=a.wrap(b,d||"base64")),b=b instanceof a?b:a.wrap(b);var e=b.littleEndian;try{var f=c.decode(b.LE());return b.LE(e),f}catch(a){throw b.LE(e),a}},g.decodeDelimited=function(b,d){if("string"==typeof b&&(b=a.wrap(b,d||"base64")),b=b instanceof a?b:a.wrap(b),b.remaining()<1)return null;var e=b.offset,f=b.readVarint32();if(b.remaining()<f)return b.offset=e,null;try{var g=c.decode(b.slice(b.offset,b.offset+f).LE());return b.offset+=f,g}catch(a){throw b.offset+=f,a}},g.decode64=function(a){return g.decode(a,"base64")},g.decodeHex=function(a){return g.decode(a,"hex")},h.toString=function(){return c.toString()};return Object.defineProperty&&(Object.defineProperty(g,"$options",{value:c.buildOpt()}),Object.defineProperty(h,"$type",{get:function(){return c}})),g}(b,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var e,f=0,g=this.children.length;f<g;f++)if((e=this.children[f])instanceof p)d[e.name]=e.build();else if(e instanceof j)d[e.name]=e.build();else if(e instanceof j.Field)e.build(),this._fields.push(e),this._fieldsById[e.id]=e,this._fieldsByName[e.name]=e;else if(!(e instanceof j.OneOf||e instanceof r))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[f].toString(!0));return this.clazz=d},k.encode=function(a,b,c){for(var d,e,f=null,g=0,h=this._fields.length;g<h;++g)d=this._fields[g],e=a[d.name],d.required&&null===e?null===f&&(f=d):d.encode(c?e:d.verifyValue(e),b);if(null!==f){var i=Error("Missing at least one required field for "+this.toString(!0)+": "+f);throw i.encoded=b,i}return b},k.calculate=function(a){for(var b,c,d=0,e=0,f=this._fields.length;e<f;++e){if(b=this._fields[e],c=a[b.name],b.required&&null===c)throw Error("Missing at least one required field for "+this.toString(!0)+": "+b);d+=b.calculate(c)}return d},k.decode=function(a,d,e){d="number"==typeof d?d:-1;for(var f,g,h,i,j=a.offset,k=new this.clazz;a.offset<j+d||-1===d&&a.remaining()>0;){if(f=a.readVarint32(),g=7&f,h=f>>3,g===b.WIRE_TYPES.ENDGROUP){if(h!==e)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+h+" ("+(e?e+" expected":"not a group")+")");break}if(i=this._fieldsById[h])i.repeated&&!i.options.packed?k[i.name].push(i.decode(g,a)):(k[i.name]=i.decode(g,a),i.oneof&&(null!==this[i.oneof.name]&&(this[this[i.oneof.name]]=null),k[i.oneof.name]=i.name));else switch(g){case b.WIRE_TYPES.VARINT:a.readVarint32();break;case b.WIRE_TYPES.BITS32:a.offset+=4;break;case b.WIRE_TYPES.BITS64:a.offset+=8;break;case b.WIRE_TYPES.LDELIM:var l=a.readVarint32();a.offset+=l;break;case b.WIRE_TYPES.STARTGROUP:for(;c(h,a););break;default:throw Error("Illegal wire type for unknown field "+h+" in "+this.toString(!0)+"#decode: "+g)}}for(var m=0,n=this._fields.length;m<n;++m)if(i=this._fields[m],null===k[i.name]){if(i.required){var o=Error("Missing at least one required field for "+this.toString(!0)+": "+i.name);throw o.decoded=k,o}null!==i.defaultValue&&(k[i.name]=i.defaultValue)}return k},e.Message=j;var l=function(a,b,c,d,e,g,h,i){f.call(this,a,b,e),this.className="Message.Field",this.required="required"===c,this.repeated="repeated"===c,this.type=d,this.resolvedType=null,this.id=g,this.options=h||{},this.defaultValue=null,this.oneof=i||null,this.originalName=this.name,!this.builder.options.convertFieldsToCamelCase||this instanceof j.ExtensionField||(this.name=l._toCamelCase(this.name))};l._toCamelCase=function(a){return a.replace(/_([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};var m=l.prototype=Object.create(f.prototype);m.build=function(){this.defaultValue=void 0!==this.options.default?this.verifyValue(this.options.default):null},m.verifyValue=function(c,e){e=e||!1;var f=function(a,b){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+a+" ("+b+")")}.bind(this);if(null===c)return this.required&&f(typeof c,"required"),null;var g;if(this.repeated&&!e){b.Util.isArray(c)||(c=[c]);var h=[];for(g=0;g<c.length;g++)h.push(this.verifyValue(c[g],!0));return h}switch(!this.repeated&&b.Util.isArray(c)&&f(typeof c,"no array expected"),this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:return("number"!=typeof c||c===c&&c%1!=0)&&f(typeof c,"not an integer"),c>4294967295?0|c:c;case b.TYPES.uint32:case b.TYPES.fixed32:return("number"!=typeof c||c===c&&c%1!=0)&&f(typeof c,"not an integer"),c<0?c>>>0:c;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:if(b.Long)try{return d(c,!1)}catch(a){f(typeof c,a.message)}else f(typeof c,"requires Long.js");case b.TYPES.uint64:case b.TYPES.fixed64:if(b.Long)try{return d(c,!0)}catch(a){f(typeof c,a.message)}else f(typeof c,"requires Long.js");case b.TYPES.bool:return"boolean"!=typeof c&&f(typeof c,"not a boolean"),c;case b.TYPES.float:case b.TYPES.double:return"number"!=typeof c&&f(typeof c,"not a number"),c;case b.TYPES.string:return"string"==typeof c||c&&c instanceof String||f(typeof c,"not a string"),""+c;case b.TYPES.bytes:return a.isByteBuffer(c)?c:a.wrap(c,"base64");case b.TYPES.enum:var i=this.resolvedType.getChildren(p.Value);for(g=0;g<i.length;g++){if(i[g].name==c)return i[g].id;if(i[g].id==c)return i[g].id}f(c,"not a valid enum value");case b.TYPES.group:case b.TYPES.message:if(c&&"object"==typeof c||f(typeof c,"object expected"),c instanceof this.resolvedType.clazz)return c;if(c instanceof b.Builder.Message){var j={};for(var g in c)c.hasOwnProperty(g)&&(j[g]=c[g]);c=j}return new this.resolvedType.clazz(c)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+c+" (undefined type "+this.type+")")},m.encode=function(c,d){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return d;try{if(this.repeated){var e;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.ensureCapacity(d.offset+=1);var f=d.offset;for(e=0;e<c.length;e++)this.encodeValue(c[e],d);var g=d.offset-f,h=a.calculateVarint32(g);if(h>1){var i=d.slice(f,d.offset);f+=h-1,d.offset=f,d.append(i)}d.writeVarint32(g,f-h)}else for(e=0;e<c.length;e++)d.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(c[e],d)}else d.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(c,d)}catch(a){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+a+")")}return d},m.encodeValue=function(c,d){if(null===c)return d;switch(this.type){case b.TYPES.int32:c<0?d.writeVarint64(c):d.writeVarint32(c);break;case b.TYPES.uint32:d.writeVarint32(c);break;case b.TYPES.sint32:d.writeVarint32ZigZag(c);break;case b.TYPES.fixed32:d.writeUint32(c);break;case b.TYPES.sfixed32:d.writeInt32(c);break;case b.TYPES.int64:case b.TYPES.uint64:d.writeVarint64(c);break;case b.TYPES.sint64:d.writeVarint64ZigZag(c);break;case b.TYPES.fixed64:d.writeUint64(c);break;case b.TYPES.sfixed64:d.writeInt64(c);break;case b.TYPES.bool:"string"==typeof c?d.writeVarint32("false"===c.toLowerCase()?0:!!c):d.writeVarint32(c?1:0);break;case b.TYPES.enum:d.writeVarint32(c);break;case b.TYPES.float:d.writeFloat32(c);break;case b.TYPES.double:d.writeFloat64(c);break;case b.TYPES.string:d.writeVString(c);break;case b.TYPES.bytes:if(c.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+c.remaining()+" bytes remaining");var e=c.offset;d.writeVarint32(c.remaining()),d.append(c),c.offset=e;break;case b.TYPES.message:var f=(new a).LE();this.resolvedType.encode(c,f),d.writeVarint32(f.offset),d.append(f.flip());break;case b.TYPES.group:this.resolvedType.encode(c,d),d.writeVarint32(this.id<<3|b.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+c+" (unknown type)")}return d},m.calculate=function(c){if(c=this.verifyValue(c),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return 0;var d=0;try{if(this.repeated){var e,f;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(d+=a.calculateVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),f=0,e=0;e<c.length;e++)f+=this.calculateValue(c[e]);d+=a.calculateVarint32(f),d+=f}else for(e=0;e<c.length;e++)d+=a.calculateVarint32(this.id<<3|this.type.wireType),d+=this.calculateValue(c[e])}else d+=a.calculateVarint32(this.id<<3|this.type.wireType),d+=this.calculateValue(c)}catch(a){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+a+")")}return d},m.calculateValue=function(c){if(null===c)return 0;var d;switch(this.type){case b.TYPES.int32:return c<0?a.calculateVarint64(c):a.calculateVarint32(c);case b.TYPES.uint32:return a.calculateVarint32(c);case b.TYPES.sint32:return a.calculateVarint32(a.zigZagEncode32(c));case b.TYPES.fixed32:case b.TYPES.sfixed32:case b.TYPES.float:return 4;case b.TYPES.int64:case b.TYPES.uint64:return a.calculateVarint64(c);case b.TYPES.sint64:return a.calculateVarint64(a.zigZagEncode64(c));case b.TYPES.fixed64:case b.TYPES.sfixed64:return 8;case b.TYPES.bool:return 1;case b.TYPES.enum:return a.calculateVarint32(c);case b.TYPES.double:return 8;case b.TYPES.string:return d=a.calculateUTF8Bytes(c),a.calculateVarint32(d)+d;case b.TYPES.bytes:if(c.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+c.remaining()+" bytes remaining");return a.calculateVarint32(c.remaining())+c.remaining();case b.TYPES.message:return d=this.resolvedType.calculate(c),a.calculateVarint32(d)+d;case b.TYPES.group:return(d=this.resolvedType.calculate(c))+a.calculateVarint32(this.id<<3|b.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+c+" (unknown type)")},m.decode=function(a,c,d){var e,f;if(a!=this.type.wireType&&(d||a!=b.WIRE_TYPES.LDELIM||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+a+" ("+this.type.wireType+" expected)");if(a==b.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!d){f=c.readVarint32(),f=c.offset+f;for(var g=[];c.offset<f;)g.push(this.decode(this.type.wireType,c,!0));return g}switch(this.type){case b.TYPES.int32:return 0|c.readVarint32();case b.TYPES.uint32:return c.readVarint32()>>>0;case b.TYPES.sint32:return 0|c.readVarint32ZigZag();case b.TYPES.fixed32:return c.readUint32()>>>0;case b.TYPES.sfixed32:return 0|c.readInt32();case b.TYPES.int64:return c.readVarint64();case b.TYPES.uint64:return c.readVarint64().toUnsigned();case b.TYPES.sint64:return c.readVarint64ZigZag();case b.TYPES.fixed64:return c.readUint64();case b.TYPES.sfixed64:return c.readInt64();case b.TYPES.bool:return!!c.readVarint32();case b.TYPES.enum:return c.readVarint32();case b.TYPES.float:return c.readFloat();case b.TYPES.double:return c.readDouble();case b.TYPES.string:return c.readVString();case b.TYPES.bytes:if(f=c.readVarint32(),c.remaining()<f)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+f+" required but got only "+c.remaining());return e=c.clone(),e.limit=e.offset+f,c.offset+=f,e;case b.TYPES.message:return f=c.readVarint32(),this.resolvedType.decode(c,f);case b.TYPES.group:return this.resolvedType.decode(c,-1,this.id)}throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+a)},e.Message.Field=l;var n=function(a,b,c,d,e,f,g){l.call(this,a,b,c,d,e,f,g),this.extension};n.prototype=Object.create(l.prototype),e.Message.ExtensionField=n;var o=function(a,b,c){f.call(this,a,b,c),this.fields=[]};e.Message.OneOf=o;var p=function(a,b,c,d){h.call(this,a,b,c,d),this.className="Enum",this.object=null};(p.prototype=Object.create(h.prototype)).build=function(){for(var a={},b=this.getChildren(p.Value),c=0,d=b.length;c<d;++c)a[b[c].name]=b[c].id;return Object.defineProperty&&Object.defineProperty(a,"$options",{value:this.buildOpt()}),this.object=a},e.Enum=p;var q=function(a,b,c,d){f.call(this,a,b,c),this.className="Enum.Value",this.id=d};q.prototype=Object.create(f.prototype),e.Enum.Value=q;var r=function(a,b,c,d){f.call(this,a,b,c),this.field=d};r.prototype=Object.create(f.prototype),e.Extension=r;var s=function(a,b,c,d){h.call(this,a,b,c,d),this.className="Service",this.clazz=null};(s.prototype=Object.create(h.prototype)).build=function(a){return this.clazz&&!a?this.clazz:this.clazz=function(a,b){var c=function(b){a.Builder.Service.call(this),this.rpcImpl=b||function(a,b,c){setTimeout(c.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},d=c.prototype=Object.create(a.Builder.Service.prototype);Object.defineProperty&&(Object.defineProperty(c,"$options",{value:b.buildOpt()}),Object.defineProperty(d,"$options",{value:c.$options}));for(var e=b.getChildren(a.Reflect.Service.RPCMethod),f=0;f<e.length;f++)!function(a){d[a.name]=function(c,d){try{if(!(c&&c instanceof a.resolvedRequestType.clazz))return void setTimeout(d.bind(this,Error("Illegal request type provided to service method "+b.name+"#"+a.name)),0);this.rpcImpl(a.fqn(),c,function(c,e){if(c)return void d(c);try{e=a.resolvedResponseType.clazz.decode(e)}catch(a){}if(!(e&&e instanceof a.resolvedResponseType.clazz))return void d(Error("Illegal response type received in service method "+b.name+"#"+a.name));d(null,e)})}catch(a){setTimeout(d.bind(this,a),0)}},c[a.name]=function(b,d,e){new c(b)[a.name](d,e)},Object.defineProperty&&(Object.defineProperty(c[a.name],"$options",{value:a.buildOpt()}),Object.defineProperty(d[a.name],"$options",{value:c[a.name].$options}))}(e[f]);return c}(b,this)},e.Service=s;var t=function(a,b,c,d){f.call(this,a,b,c),this.className="Service.Method",this.options=d||{}};(t.prototype=Object.create(f.prototype)).buildOpt=i.buildOpt,e.Service.Method=t;var u=function(a,b,c,d,e,f){t.call(this,a,b,c,f),this.className="Service.RPCMethod",this.requestName=d,this.responseName=e,this.resolvedRequestType=null,this.resolvedResponseType=null};return u.prototype=Object.create(t.prototype),e.Service.RPCMethod=u,e}(c),c.Builder=function(a,c,d){var e=function(a){this.ns=new d.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=a||{}},f=e.prototype;return f.reset=function(){this.ptr=this.ns},f.define=function(a,b){if("string"!=typeof a||!c.TYPEREF.test(a))throw Error("Illegal package: "+a);var e,f=a.split(".");for(e=0;e<f.length;e++)if(!c.NAME.test(f[e]))throw Error("Illegal package: "+f[e]);for(e=0;e<f.length;e++)null===this.ptr.getChild(f[e])&&this.ptr.addChild(new d.Namespace(this,this.ptr,f[e],b)),this.ptr=this.ptr.getChild(f[e]);return this},e.isValidMessage=function(b){if("string"!=typeof b.name||!c.NAME.test(b.name))return!1;if(void 0!==b.values||void 0!==b.rpc)return!1;var d;if(void 0!==b.fields){if(!a.Util.isArray(b.fields))return!1;var f,g=[];for(d=0;d<b.fields.length;d++){if(!e.isValidMessageField(b.fields[d]))return!1;if(f=parseInt(b.fields[d].id,10),g.indexOf(f)>=0)return!1;g.push(f)}g=null}if(void 0!==b.enums){if(!a.Util.isArray(b.enums))return!1;for(d=0;d<b.enums.length;d++)if(!e.isValidEnum(b.enums[d]))return!1}if(void 0!==b.messages){if(!a.Util.isArray(b.messages))return!1;for(d=0;d<b.messages.length;d++)if(!e.isValidMessage(b.messages[d])&&!e.isValidExtend(b.messages[d]))return!1}return!!(void 0===b.extensions||a.Util.isArray(b.extensions)&&2===b.extensions.length&&"number"==typeof b.extensions[0]&&"number"==typeof b.extensions[1])},e.isValidMessageField=function(a){if("string"!=typeof a.rule||"string"!=typeof a.name||"string"!=typeof a.type||void 0===a.id)return!1;if(!(c.RULE.test(a.rule)&&c.NAME.test(a.name)&&c.TYPEREF.test(a.type)&&c.ID.test(""+a.id)))return!1;if(void 0!==a.options){if("object"!=typeof a.options)return!1;for(var b,d=Object.keys(a.options),e=0;e<d.length;e++)if("string"!=typeof(b=d[e])||"string"!=typeof a.options[b]&&"number"!=typeof a.options[b]&&"boolean"!=typeof a.options[b])return!1}return!0},e.isValidEnum=function(b){if("string"!=typeof b.name||!c.NAME.test(b.name))return!1;if(void 0===b.values||!a.Util.isArray(b.values)||0==b.values.length)return!1;for(var d=0;d<b.values.length;d++){if("object"!=typeof b.values[d])return!1;if("string"!=typeof b.values[d].name||void 0===b.values[d].id)return!1;if(!c.NAME.test(b.values[d].name)||!c.NEGID.test(""+b.values[d].id))return!1}return!0},f.create=function(b){if(!b)return this;if(a.Util.isArray(b)||(b=[b]),0==b.length)return this;var c=[];for(c.push(b);c.length>0;){if(b=c.pop(),!a.Util.isArray(b))throw Error("Not a valid namespace: "+JSON.stringify(b));for(;b.length>0;){var f=b.shift();if(e.isValidMessage(f)){var g=new d.Message(this,this.ptr,f.name,f.options,f.isGroup),h={};if(f.oneofs)for(var i=Object.keys(f.oneofs),j=0,k=i.length;j<k;++j)g.addChild(h[i[j]]=new d.Message.OneOf(this,g,i[j]));if(f.fields&&f.fields.length>0)for(j=0,k=f.fields.length;j<k;++j){var l=f.fields[j];if(null!==g.getChild(l.id))throw Error("Duplicate field id in message "+g.name+": "+l.id);if(l.options)for(var m=Object.keys(l.options),n=0,o=m.length;n<o;++n){if("string"!=typeof m[n])throw Error("Illegal field option name in message "+g.name+"#"+l.name+": "+m[n]);if("string"!=typeof l.options[m[n]]&&"number"!=typeof l.options[m[n]]&&"boolean"!=typeof l.options[m[n]])throw Error("Illegal field option value in message "+g.name+"#"+l.name+"#"+m[n]+": "+l.options[m[n]])}var p=null;if("string"==typeof l.oneof&&void 0===(p=h[l.oneof]))throw Error("Illegal oneof in message "+g.name+"#"+l.name+": "+l.oneof);l=new d.Message.Field(this,g,l.rule,l.type,l.name,l.id,l.options,p),p&&p.fields.push(l),g.addChild(l)}var q=[];if(void 0!==f.enums&&f.enums.length>0)for(j=0;j<f.enums.length;j++)q.push(f.enums[j]);if(f.messages&&f.messages.length>0)for(j=0;j<f.messages.length;j++)q.push(f.messages[j]);if(f.extensions&&(g.extensions=f.extensions,g.extensions[0]<a.ID_MIN&&(g.extensions[0]=a.ID_MIN),g.extensions[1]>a.ID_MAX&&(g.extensions[1]=a.ID_MAX)),this.ptr.addChild(g),q.length>0){c.push(b),b=q,q=null,this.ptr=g,g=null;continue}q=null,g=null}else if(e.isValidEnum(f)){for(g=new d.Enum(this,this.ptr,f.name,f.options),j=0;j<f.values.length;j++)g.addChild(new d.Enum.Value(this,g,f.values[j].name,f.values[j].id));this.ptr.addChild(g),g=null}else if(e.isValidService(f)){g=new d.Service(this,this.ptr,f.name,f.options);for(j in f.rpc)f.rpc.hasOwnProperty(j)&&g.addChild(new d.Service.RPCMethod(this,g,j,f.rpc[j].request,f.rpc[j].response,f.rpc[j].options));this.ptr.addChild(g),g=null}else{if(!e.isValidExtend(f))throw Error("Not a valid definition: "+JSON.stringify(f));if(g=this.ptr.resolve(f.ref))for(j=0;j<f.fields.length;j++){if(null!==g.getChild(f.fields[j].id))throw Error("Duplicate extended field id in message "+g.name+": "+f.fields[j].id);if(f.fields[j].id<g.extensions[0]||f.fields[j].id>g.extensions[1])throw Error("Illegal extended field id in message "+g.name+": "+f.fields[j].id+" ("+g.extensions.join(" to ")+" expected)");var r=f.fields[j].name;this.options.convertFieldsToCamelCase&&(r=d.Message.Field._toCamelCase(f.fields[j].name)),l=new d.Message.ExtensionField(this,g,f.fields[j].rule,f.fields[j].type,this.ptr.fqn()+"."+r,f.fields[j].id,f.fields[j].options);var s=new d.Extension(this,this.ptr,f.fields[j].name,l);l.extension=s,this.ptr.addChild(s),g.addChild(l)}else if(!/\.?google\.protobuf\./.test(f.ref))throw Error("Extended message "+f.ref+" is not defined")}f=null}b=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},f.import=function(c,d){if("string"==typeof d){if(a.Util.IS_NODE&&(d=b("path").resolve(d)),!0===this.files[d])return this.reset(),this;this.files[d]=!0}if(c.imports&&c.imports.length>0){var e,f="/",g=!1;"object"==typeof d?(this.importRoot=d.root,g=!0,e=this.importRoot,d=d.file,(e.indexOf("\\")>=0||d.indexOf("\\")>=0)&&(f="\\")):"string"==typeof d?this.importRoot?e=this.importRoot:d.indexOf("/")>=0?""===(e=d.replace(/\/[^\/]*$/,""))&&(e="/"):d.indexOf("\\")>=0?(e=d.replace(/\\[^\\]*$/,""),f="\\"):e=".":e=null;for(var h=0;h<c.imports.length;h++)if("string"==typeof c.imports[h]){if(!e)throw Error("Cannot determine import root: File name is unknown");var i=c.imports[h];if(/^google\/protobuf\//.test(i))continue;if(i=e+f+i,!0===this.files[i])continue;/\.proto$/i.test(i)&&!a.DotProto&&(i=i.replace(/\.proto$/,".json"));var j=a.Util.fetch(i);if(null===j)throw Error("Failed to import '"+i+"' in '"+d+"': File not found");/\.json$/i.test(i)?this.import(JSON.parse(j+""),i):this.import(new a.DotProto.Parser(j+"").parse(),i)}else d?/\.(\w+)$/.test(d)?this.import(c.imports[h],d.replace(/^(.+)\.(\w+)$/,function(a,b,c){return b+"_import"+h+"."+c})):this.import(c.imports[h],d+"_import"+h):this.import(c.imports[h]);g&&(this.importRoot=null)}return c.messages&&(c.package&&this.define(c.package,c.options),this.create(c.messages),this.reset()),c.enums&&(c.package&&this.define(c.package,c.options),this.create(c.enums),this.reset()),c.services&&(c.package&&this.define(c.package,c.options),this.create(c.services),this.reset()),c.extends&&(c.package&&this.define(c.package,c.options),this.create(c.extends),this.reset()),this},e.isValidService=function(a){return!("string"!=typeof a.name||!c.NAME.test(a.name)||"object"!=typeof a.rpc)},e.isValidExtend=function(b){if("string"!=typeof b.ref||!c.TYPEREF.test(b.ref))return!1;var d;if(void 0!==b.fields){if(!a.Util.isArray(b.fields))return!1;var f,g=[];for(d=0;d<b.fields.length;d++){if(!e.isValidMessageField(b.fields[d]))return!1;if(f=parseInt(b.id,10),g.indexOf(f)>=0)return!1;g.push(f)}g=null}return!0},f.resolveAll=function(){var b;if(null!=this.ptr&&"object"!=typeof this.ptr.type){if(this.ptr instanceof d.Namespace)for(var e=this.ptr.children,f=0,g=e.length;f<g;++f)this.ptr=e[f],this.resolveAll();else if(this.ptr instanceof d.Message.Field)if(c.TYPE.test(this.ptr.type))this.ptr.type=a.TYPES[this.ptr.type];else{if(!c.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(b=(this.ptr instanceof d.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=b,b instanceof d.Enum)this.ptr.type=a.TYPES.enum;else{if(!(b instanceof d.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=b.isGroup?a.TYPES.group:a.TYPES.message}}else if(this.ptr instanceof a.Reflect.Enum.Value);else if(this.ptr instanceof a.Reflect.Service.Method){if(!(this.ptr instanceof a.Reflect.Service.RPCMethod))throw Error("Illegal service type in "+this.ptr.toString(!0));if(!((b=this.ptr.parent.resolve(this.ptr.requestName))&&b instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=b,!((b=this.ptr.parent.resolve(this.ptr.responseName))&&b instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=b}else if(!(this.ptr instanceof a.Reflect.Message.OneOf||this.ptr instanceof a.Reflect.Extension))throw Error("Illegal object in namespace: "+typeof this.ptr+":"+this.ptr);this.reset()}},f.build=function(a){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null==this.result&&(this.result=this.ns.build()),a){for(var b=a.split("."),c=this.result,d=0;d<b.length;d++){if(!c[b[d]]){c=null;break}c=c[b[d]]}return c}return this.result},f.lookup=function(a){return a?this.ns.resolve(a):this.ns},f.toString=function(){return"Builder"},e.Message=function(){},e.Service=function(){},e}(c,c.Lang,c.Reflect),c.newBuilder=function(a){return a=a||{},void 0===a.convertFieldsToCamelCase&&(a.convertFieldsToCamelCase=c.convertFieldsToCamelCase),void 0===a.populateAccessors&&(a.populateAccessors=c.populateAccessors),new c.Builder(a)},c.loadJson=function(a,b,d){return("string"==typeof b||b&&"string"==typeof b.file&&"string"==typeof b.root)&&(d=b,b=null),b&&"object"==typeof b||(b=c.newBuilder()),"string"==typeof a&&(a=JSON.parse(a)),b.import(a,d),b.resolveAll(),b},c.loadJsonFile=function(a,b,d){if(b&&"object"==typeof b?(d=b,b=null):b&&"function"==typeof b||(b=null),b)return c.Util.fetch("string"==typeof a?a:a.root+"/"+a.file,function(e){if(null===e)return void b(Error("Failed to fetch file"));try{b(null,c.loadJson(JSON.parse(e),d,a))}catch(a){b(a)}});var e=c.Util.fetch("object"==typeof a?a.root+"/"+a.file:a);return null===e?null:c.loadJson(JSON.parse(e),d,a)},c}"function"==typeof b&&"object"==typeof c&&c&&"object"==typeof d&&d?c.exports=f(b("bytebuffer")):"function"==typeof a&&a.amd?a(["ByteBuffer"],f):(e.dcodeIO=e.dcodeIO||{}).ProtoBuf=f(e.dcodeIO.ByteBuffer)}(this)},{bytebuffer:24,fs:23,path:26}]},{},[11])(11)});7w":       ^^AJ^   <    :https://clients.amazonworkspaces.com/js/StxRtcClient.min.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAAAAgAAAAAAAAAAAAAAAAAAAAEAMQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAWDMIIFfzCCBGegAwIBAgIQCINdF8SIEjuk0NbJYMJtODANBgkqhkiG9w0BAQsFADBGMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRUwEwYDVQQLEwxTZXJ2ZXIgQ0EgMUIxDzANBgNVBAMTBkFtYXpvbjAeFw0xOTA4MDIwMDAwMDBaFw0yMDA3MTYxMjAwMDBaMCcxJTAjBgNVBAMTHGNsaWVudHMuYW1hem9ud29ya3NwYWNlcy5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCc+DUMl3cqw/EjoZExjD2FS8ATZM9Zp0KYZb4azcKec0Sfc3w2UEWdxsxQkicwK+00vF2ZGD/EyBTY18ydnfMblrdbZ+GwqUfVrEHhS32IvGyPCnEyJ1VwC1f289PY5DwHaMtD4MG18w7b8zTDHyH9uB8wF/1ZpHSkaPfB8CtPaTRp/LaLEV7F8trHNQBV7jwOLg6aBVzjXriB22PTelIJLiqqcIXiLlKYLaBzcwxaKRic+mLv5OhiRKlv1Wx9IIP4bcRUSGVhwhmEjSLoVr8Io1gwUdJS5e4u8kSPPB3kNajRDsb8dcBejBe9r7CTKIMaqx+6+LuZpj6TfzqJbI1zAgMBAAGjggKGMIICgjAfBgNVHSMEGDAWgBRZpGYGUqB7lZI8o5QHJ5Z0W/k90DAdBgNVHQ4EFgQU9l/H/7wmF/kWJiwSEc/ysV1HpfMwJwYDVR0RBCAwHoIcY2xpZW50cy5hbWF6b253b3Jrc3BhY2VzLmNvbTAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMDsGA1UdHwQ0MDIwMKAuoCyGKmh0dHA6Ly9jcmwuc2NhMWIuYW1hem9udHJ1c3QuY29tL3NjYTFiLmNybDAgBgNVHSAEGTAXMAsGCWCGSAGG/WwBAjAIBgZngQwBAgEwdQYIKwYBBQUHAQEEaTBnMC0GCCsGAQUFBzABhiFodHRwOi8vb2NzcC5zY2ExYi5hbWF6b250cnVzdC5jb20wNgYIKwYBBQUHMAKGKmh0dHA6Ly9jcnQuc2NhMWIuYW1hem9udHJ1c3QuY29tL3NjYTFiLmNydDAMBgNVHRMBAf8EAjAAMIIBAgYKKwYBBAHWeQIEAgSB8wSB8ADuAHUAu9nfvB+KcbWTlCOXqpJ7RzhXlQqrUugakJZkNo4e0YUAAAFsU0PrYAAABAMARjBEAiAYLDsESOAvMwPqI1LqnvUWBUYRpxAMd2ebWM2kANvGuAIgGxahWBBnVzuT8kzrrZNkG4/f+uNcrQYpxbzVdUU0JRUAdQCHdb/nWXz4jEOZX73zbv9WjUdWNv9KtWDBtOr/XqCDDwAAAWxTQ+utAAAEAwBGMEQCIAXjTnSLPsSHLakgDV9YyN0CnsrnTiStLhJLObrzLZJJAiAc0ZQ6s8iwvzJItAiKFvPCFeSaj7iOIFRK1AF6ANQA3jANBgkqhkiG9w0BAQsFAAOCAQEAkGFPuMyyMZjDw9BTsDsZzHvSoKs02cj7ZboSmndq5xtZ2TIlDVCNrLiNNCuayNGFn8psJWCp0ghE1nP1V+riLtba61L62XuKVy/MLiR38TzApOBsdKbRzb7ZAZoW8WsriatPbHXeS+R7sU1It5kADhv2tP01GIq97j2Hk+4pyYEbfXZTIoPr+y7U/h+AfQjVzB8FbwpUdykt5IxelyuhQPUOcf4NS6nI849wGpxtpGkcwdoUcRV9YF5M2q5mPVh251zyqU6X9eXNQa7OM4JwcMbRwcs3g/N58GGoVccVJGghgoybRc5F5liXYf3K7mAlMqy2BQ7UaZKKn/nHC8InQcAvAAMAAAAAAQEAAAAAAAAEbm9uZQAAABBSU0EtUEtDUzEtU0hBMjU2AZWfsWVlF0h/q5vYkTvlMZeudM2lzS9HP5b18Lf/9ixoAAAAA2YKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAABYMwggV/MIIEZ6ADAgECAhAIg10XxIgSO6TQ1slgwm04MA0GCSqGSIb3DQEBCwUAMEYxCzAJBgNVBAYTAlVTMQ8wDQYDVQQKEwZBbWF6b24xFTATBgNVBAsTDFNlcnZlciBDQSAxQjEPMA0GA1UEAxMGQW1hem9uMB4XDTE5MDgwMjAwMDAwMFoXDTIwMDcxNjEyMDAwMFowJzElMCMGA1UEAxMcY2xpZW50cy5hbWF6b253b3Jrc3BhY2VzLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJz4NQyXdyrD8SOhkTGMPYVLwBNkz1mnQphlvhrNwp5zRJ9zfDZQRZ3GzFCSJzAr7TS8XZkYP8TIFNjXzJ2d8xuWt1tn4bCpR9WsQeFLfYi8bI8KcTInVXALV/bz09jkPAdoy0PgwbXzDtvzNMMfIf24HzAX/VmkdKRo98HwK09pNGn8tosRXsXy2sc1AFXuPA4uDpoFXONeuIHbY9N6UgkuKqpwheIuUpgtoHNzDFopGJz6Yu/k6GJEqW/VbH0gg/htxFRIZWHCGYSNIuhWvwijWDBR0lLl7i7yRI88HeQ1qNEOxvx1wF6MF72vsJMogxqrH7r4u5mmPpN/OolsjXMCAwEAAaOCAoYwggKCMB8GA1UdIwQYMBaAFFmkZgZSoHuVkjyjlAcnlnRb+T3QMB0GA1UdDgQWBBT2X8f/vCYX+RYmLBIRz/KxXUel8zAnBgNVHREEIDAeghxjbGllbnRzLmFtYXpvbndvcmtzcGFjZXMuY29tMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwOwYDVR0fBDQwMjAwoC6gLIYqaHR0cDovL2NybC5zY2ExYi5hbWF6b250cnVzdC5jb20vc2NhMWIuY3JsMCAGA1UdIAQZMBcwCwYJYIZIAYb9bAECMAgGBmeBDAECATB1BggrBgEFBQcBAQRpMGcwLQYIKwYBBQUHMAGGIWh0dHA6Ly9vY3NwLnNjYTFiLmFtYXpvbnRydXN0LmNvbTA2BggrBgEFBQcwAoYqaHR0cDovL2NydC5zY2ExYi5hbWF6b250cnVzdC5jb20vc2NhMWIuY3J0MAwGA1UdEwEB/wQCMAAwggECBgorBgEEAdZ5AgQCBIHzBIHwAO4AdQC72d+8H4pxtZOUI5eqkntHOFeVCqtS6BqQlmQ2jh7RhQAAAWxTQ+tgAAAEAwBGMEQCIBgsOwRI4C8zA+ojUuqe9RYFRhGnEAx3Z5tYzaQA28a4AiAbFqFYEGdXO5PyTOutk2Qbj9/641ytBinFvNV1RTQlFQB1AId1v+dZfPiMQ5lfvfNu/1aNR1Y2/0q1YMG06v9eoIMPAAABbFND660AAAQDAEYwRAIgBeNOdIs+xIctqSANX1jI3QKeyudOJK0uEks5uvMtkkkCIBzRlDqzyLC/Mki0CIoW88IV5JqPuI4gVErUAXoA1ADeMA0GCSqGSIb3DQEBCwUAA4IBAQCQYU+4zLIxmMPD0FOwOxnMe9KgqzTZyPtluhKad2rnG1nZMiUNUI2suI00K5rI0YWfymwlYKnSCETWc/VX6uIu1trrUvrZe4pXL8wuJHfxPMCk4Gx0ptHNvtkBmhbxayuJq09sdd5L5HuxTUi3mQAOG/a0/TUYir3uPYeT7inJgRt9dlMig+v7LtT+H4B9CNXMHwVvClR3KS3kjF6XK6FA9Q5x/g1Lqcjzj3AanG2kaRzB2hRxFX1gXkzarmY9WHbnXPKpTpf15c1Brs4zgnBwxtHByzeD83nwYahVxxUkaCGCjJtFzkXmWJdh/cruYCUyrLYFDtRpkoqf+ccLwidBZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAETTCCBEkwggMxoAMCAQICEwZ/lFeFh+isd96yUzJbvJmLVg0wDQYJKoZIhvcNAQELBQAwOTELMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEZMBcGA1UEAxMQQW1hem9uIFJvb3QgQ0EgMTAeFw0xNTEwMjIwMDAwMDBaFw0yNTEwMTkwMDAwMDBaMEYxCzAJBgNVBAYTAlVTMQ8wDQYDVQQKEwZBbWF6b24xFTATBgNVBAsTDFNlcnZlciBDQSAxQjEPMA0GA1UEAxMGQW1hem9uMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwk4WZ93OvGrIN1rsOjCwHebREugSKEjM6CnBuW5T1aPrAzkazHeH9gG52XDMz2uN4+MDcYaZbcumlCpOE9anvQTsChY8Cus5scS1WKO2x1Yl7D5SeqjjKRYHuW5Qz/tfMfgdugNKYokDrj5H8g8nkeMUIIX4+umKNfVfnplN52s376RQPkTs+lqFZgecfhdqVfMXijUe7umsw3VOWFV9U2sKa5sUQtflrAGJs+qj/s/AKwyEwthTFctn8NCIyjrRF3P1X5rUxXIefgHxmDBjKqryei3F4gIahuUyPg69EbTPPJPvF1AQnkPCBirgDWi+04iLSmWMStTDLkybVfSG5QIDAQABo4IBOzCCATcwEgYDVR0TAQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwHQYDVR0OBBYEFFmkZgZSoHuVkjyjlAcnlnRb+T3QMB8GA1UdIwQYMBaAFIQYzIU07LwMlJQuCFmcx7IQTgoIMHsGCCsGAQUFBwEBBG8wbTAvBggrBgEFBQcwAYYjaHR0cDovL29jc3Aucm9vdGNhMS5hbWF6b250cnVzdC5jb20wOgYIKwYBBQUHMAKGLmh0dHA6Ly9jcnQucm9vdGNhMS5hbWF6b250cnVzdC5jb20vcm9vdGNhMS5jZXIwPwYDVR0fBDgwNjA0oDKgMIYuaHR0cDovL2NybC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbS9yb290Y2ExLmNybDATBgNVHSAEDDAKMAgGBmeBDAECATANBgkqhkiG9w0BAQsFAAOCAQEAhZK+Nbt5z6OBQhzk42NzUzlSNefRrf2umYqsiRIvu+dvmtVOcuogMGH5l7LNpScCRajKdj6YSoOetuZF4PJD9gjebehu2zEHE/AvMQ2TbWE3e1jw/FGYkSgCTwV2t9PwG8LmXtBmhREPLoHGEIEp/iBgSPPy8IQTU2U1FRFrglFAVVdfGLWwIj6t8l6jAePDs/nLQVrmUpG75DaHTy2ppAdoNbqUcs0O6g59V/J5/DfFe2CesuvALZB3DUkQJ6U4rcQSo7SjyEizFQse4uIZ3MR2Usi8ikF4cNltl7NKi3gtXrQPo0xgyuFHy3gtEhexUovKOSy9tS/CMwKWq9qUf2YKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAAA0UwggNBMIICKaADAgECAhMGbJ/Pmb+MCjni8HiKQ+aWNlvKMA0GCSqGSIb3DQEBCwUAMDkxCzAJBgNVBAYTAlVTMQ8wDQYDVQQKEwZBbWF6b24xGTAXBgNVBAMTEEFtYXpvbiBSb290IENBIDEwHhcNMTUwNTI2MDAwMDAwWhcNMzgwMTE3MDAwMDAwWjA5MQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRkwFwYDVQQDExBBbWF6b24gUm9vdCBDQSAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsniAccp41eNxr0eAUHR9btjXiHb0mWj3WCFg+XSEAS+sAi2G06BDek6ypNA2ugG+jdtIyAcXNkz07ogjxz7rN/W1GfhJaLDe17l2OB1hnqT+gjal5UpW5EXh+f20Fvp02pybNTkv+rAgUAZsetCAsqb5r+xHGY9QOAfcooc5WPi61an5SGcwlu6UeF5viaNRwDCGZqFFZrpU66PDkflI3P/R6DAtfS10cDXXiCT3nsRZbrtzhxfyMkYouEP6tx2qyrTynyQOLUv3cVxeaf/qlQLLOIquUDhv2/stYhvFxx5U4XfgZ8gPnIcj1j9AIH8ggMSATD47JCaOBK5smsiqDQIDAQABo0IwQDAPBgNVHRMBAf8EBTADAQH/MA4GA1UdDwEB/wQEAwIBhjAdBgNVHQ4EFgQUhBjMhTTsvAyUlC4IWZzHshBOCggwDQYJKoZIhvcNAQELBQADggEBAJjyN1pBkKEaxXZRKCA2Iw6u5ii7qviUrkikMH8b/CSNS7TIoZf2tvF6cMhTk8wIKOOYJc8jpPneIdN8hQmtTpp1OsILaol4dkRHGGVsjUGOO3+ay/S1p1DXBSw36ANLrelhoAJu9fLwxbLtW7fc+pRcd54TpX9SrZXy+JM73otcW8paUltgrxT3S++j+59AlW0xVPxC08dGHyOt2Q9IcJrZdXhx0XJDNHVuV1nCAlwmYCnPIxkWjohDpdTkywj7IxFD6EMpcmKhqV1eCNSQrrjYzhTC0FXyhvbEk0N3ZmHAuehB15d4YANuSnKupdF9uhCehmwbirlZM/jrxJC+8bkA request-method GET response-head HTTP/1.1 200 OK
Content-Type: application/javascript
Content-Length: 189692
Last-Modified: Wed, 10 Jul 2019 23:51:51 GMT
Accept-Ranges: bytes
Server: AmazonS3
Date: Thu, 18 Jun 2020 13:00:16 GMT
ETag: "ffff5478e95680b65b8117f28c4a69ca"
X-Cache: Hit from cloudfront
Via: 1.1 4c7c693b007dfce603c83f138e31bccb.cloudfront.net (CloudFront)
X-Amz-Cf-Pop: SEA19-C2
X-Amz-Cf-Id: dsy7BqBPTzigNigHKcM8x3rjlM4_xAzKwnoN3Hq6V5zn3DSp0R1zEw==
Age: 21871
 original-response-headers Content-Type: application/javascript
Content-Length: 189692
Connection: keep-alive
Last-Modified: Wed, 10 Jul 2019 23:51:51 GMT
Accept-Ranges: bytes
Server: AmazonS3
Date: Thu, 18 Jun 2020 13:00:16 GMT
ETag: "ffff5478e95680b65b8117f28c4a69ca"
X-Cache: Hit from cloudfront
Via: 1.1 4c7c693b007dfce603c83f138e31bccb.cloudfront.net (CloudFront)
X-Amz-Cf-Pop: SEA19-C2
X-Amz-Cf-Id: dsy7BqBPTzigNigHKcM8x3rjlM4_xAzKwnoN3Hq6V5zn3DSp0R1zEw==
Age: 21871
 ctid 2 eTLD1Access 1;0;1645175795, uncompressed-len 0 net-response-time-onstart 67 net-response-time-onstop 80  